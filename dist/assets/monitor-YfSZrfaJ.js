import{au as j,j as e}from"./index-D-CDyacC.js";import{C as R,P as xe}from"./People-CBjQFpaO.js";import{f as ye}from"./index-KbUEj7NM.js";import"./typeof-QjJsDpFa.js";const pe=j(e.jsx("path",{d:"M3 13h8V3H3zm0 8h8v-6H3zm10 0h8V11h-8zm0-18v6h8V3z"}),"Dashboard"),L=j(e.jsx("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download"),V=j(e.jsx("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}),"History"),me=j(e.jsx("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2m6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1z"}),"Notifications"),ue=j(e.jsx("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh"),_=j(e.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility"),S=j(e.jsx("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff"),je=j(e.jsx("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning"),l={getDashboardSummary:async()=>({totalUsers:1250,deactivatedAccounts:87,recoveredAccounts:52,todayActivities:24,weeklyDeactivations:15,weeklyRecoveries:9,pendingRecoveries:6}),getAccountActivities:async(s=1,a=10)=>({activities:Array(a).fill(0).map((i,d)=>({id:`act-${s}-${d}`,type:["account_created","login","password_changed","account_deactivated","account_reactivated"][Math.floor(Math.random()*5)],userId:`user-${Math.floor(Math.random()*100)}`,userName:`User ${Math.floor(Math.random()*100)}`,userEmail:`user${Math.floor(Math.random()*100)}@example.com`,timestamp:new Date(Date.now()-Math.floor(Math.random()*30)*24*60*60*1e3),status:["completed","pending","failed"][Math.floor(Math.random()*3)],ipAddress:`192.168.1.${Math.floor(Math.random()*255)}`,read:Math.random()>.5})),pagination:{total:120,page:s,pages:12,limit:a}}),getAutoDeactivationStats:async()=>({autoDeactivatedCount:78,expiredTokensCount:23,recentDeactivations:15,inactiveLoginAttempts:31,reactivatedAccounts:9}),getReactivationMetrics:async()=>({deactivations:{total:412,today:5,week:15,month:62},loginAttempts:{total:256,today:8,week:37,month:89},reactivations:{total:184,today:3,week:9,month:32},reactivationRates:{weekly:24.32,monthly:35.96,overall:71.88}}),getSystemHealth:async()=>({userMetrics:{total:1250,active:1163,inactive:134,admins:5,deactivated:87},systemMetrics:{activities:8742,notifications:2365,systemUptime:864e3}}),getNotifications:async(s=1,a=10)=>({notifications:Array(a).fill(0).map((i,d)=>({id:`notif-${s}-${d}`,title:`Notification ${s*a+d}`,message:`This is a notification message ${s*a+d}`,type:["info","warning","success","error"][Math.floor(Math.random()*4)],timestamp:new Date(Date.now()-Math.floor(Math.random()*30)*24*60*60*1e3),read:Math.random()>.5})),pagination:{total:85,page:s,pages:9,limit:a}}),getInactiveAccountLogins:async(s=1,a=10,o=30)=>({attempts:Array(a).fill(0).map((d,c)=>({id:`user-${s}-${c}`,name:`User ${s*a+c}`,email:`user${s*a+c}@example.com`,status:["Deleted","Auto-deactivated"][Math.floor(Math.random()*2)],deactivatedAt:new Date(Date.now()-Math.floor(Math.random()*60)*24*60*60*1e3),lastLoginAttempt:new Date(Date.now()-Math.floor(Math.random()*30)*24*60*60*1e3),totalAttempts:Math.floor(Math.random()*5)+1,reactivatedAt:Math.random()>.7?new Date(Date.now()-Math.floor(Math.random()*15)*24*60*60*1e3):null,wasReactivated:Math.random()>.7})),pagination:{total:65,page:s,pages:7,limit:a},timeframe:{days:o,startDate:new Date(Date.now()-o*24*60*60*1e3),endDate:new Date}}),triggerAutoDeactivation:async()=>({success:!0,message:"Auto-deactivation process triggered"}),markActivityAsRead:async s=>({success:!0,message:"Activity marked as read"}),markAllActivitiesAsRead:async()=>({success:!0,message:"All activities marked as read"}),markNotificationAsRead:async s=>({success:!0,message:"Notification marked as read"}),markAllNotificationsAsRead:async()=>({success:!0,message:"All notifications marked as read"})},v=s=>s?ye(new Date(s),"MMM dd, yyyy HH:mm"):"N/A",F=s=>{const a=Math.floor(s/86400),o=Math.floor(s%(24*60*60)/(60*60)),i=Math.floor(s%(60*60)/60);return`${a}d ${o}h ${i}m`},u=({title:s,value:a,icon:o,color:i})=>e.jsx(Card,{sx:{p:2,height:"100%"},children:e.jsxs(Box,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(Box,{children:[e.jsx(Typography,{variant:"body2",color:"text.secondary",children:s}),e.jsx(Typography,{variant:"h4",fontWeight:"bold",mt:1,children:a})]}),e.jsx(Box,{sx:{p:1.5,borderRadius:"50%",bgcolor:`${i}.light`,color:`${i}.main`},children:o})]})}),ge=({type:s})=>{let a,o;switch(s){case"account_created":a="success",o="Created";break;case"login":a="info",o="Login";break;case"password_changed":a="warning",o="Password";break;case"account_deactivated":a="error",o="Deactivated";break;case"account_reactivated":a="success",o="Reactivated";break;default:a="default",o=s}return e.jsx(Chip,{size:"small",color:a,label:o})},be=({status:s})=>{let a;switch(s){case"completed":a="success";break;case"pending":a="warning";break;case"failed":a="error";break;default:a="default"}return e.jsx(Chip,{size:"small",color:a,label:s})},Ae=()=>{var z,G,N,P,$,H,U,E;const[s,a]=useState(0),[o,i]=useState(!1),[d,c]=useState(null),[f,T]=useState(null),[h,I]=useState(null),[y,C]=useState({activities:[],pagination:{total:0,page:1,pages:1}}),[A,O]=useState(1),[b,q]=useState(null),[x,Y]=useState(null),[r,J]=useState(null),[p,M]=useState({notifications:[],pagination:{total:0,page:1,pages:1}}),[B,K]=useState(1),[g,Q]=useState({attempts:[],pagination:{total:0,page:1,pages:1}}),[k,X]=useState(1),[D,Z]=useState(30);useState(null),useState(null),useState(""),useState("");const[ee,w]=useState(!1);useEffect(()=>{te()},[]),useEffect(()=>{W()},[s,A,B,k,D]);const te=async()=>{i(!0);try{const t=await l.getDashboardSummary();I(t);const n=await l.getAccountActivities(1,10);C(n),i(!1)}catch{c("Error loading dashboard data. Please try again."),i(!1)}},W=async()=>{if(!o){i(!0);try{switch(s){case 0:const t=await l.getDashboardSummary();I(t);const n=await l.getAccountActivities(A,10);C(n);break;case 1:const m=await l.getAutoDeactivationStats();q(m);const le=await l.getReactivationMetrics();Y(le);const ce=await l.getInactiveAccountLogins(k,10,D);Q(ce);break;case 2:const de=await l.getSystemHealth();J(de);break;case 3:const he=await l.getNotifications(B,10);M(he);break;default:break}i(!1)}catch{c("Error loading data. Please try again."),i(!1)}}},se=(t,n)=>{a(n)},ae=async()=>{i(!0);try{const t=await l.triggerAutoDeactivation();T(t.message),w(!1),i(!1)}catch{c("Error triggering auto-deactivation. Please try again."),i(!1)}},ie=async t=>{i(!0);try{await l.markActivityAsRead(t),C(n=>({...n,activities:n.activities.map(m=>m.id===t?{...m,read:!0}:m)})),i(!1)}catch{c("Error marking activity as read. Please try again."),i(!1)}},re=async()=>{i(!0);try{await l.markAllActivitiesAsRead(),C(t=>({...t,activities:t.activities.map(n=>({...n,read:!0}))})),T("All activities marked as read"),i(!1)}catch{c("Error marking all activities as read. Please try again."),i(!1)}},ne=async t=>{i(!0);try{await l.markNotificationAsRead(t),M(n=>({...n,notifications:n.notifications.map(m=>m.id===t?{...m,read:!0}:m)})),i(!1)}catch{c("Error marking notification as read. Please try again."),i(!1)}},oe=async()=>{i(!0);try{await l.markAllNotificationsAsRead(),M(t=>({...t,notifications:t.notifications.map(n=>({...n,read:!0}))})),T("All notifications marked as read"),i(!1)}catch{c("Error marking all notifications as read. Please try again."),i(!1)}};return useEffect(()=>{if(f){const t=setTimeout(()=>T(null),5e3);return()=>clearTimeout(t)}if(d){const t=setTimeout(()=>c(null),5e3);return()=>clearTimeout(t)}},[f,d]),e.jsxs(Box,{sx:{p:3},children:[e.jsxs(Box,{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(Typography,{variant:"h4",fontWeight:"bold",children:"Admin Dashboard"}),e.jsx(Box,{children:e.jsx(Button,{variant:"outlined",startIcon:e.jsx(ue,{}),onClick:W,disabled:o,children:"Refresh"})})]}),f&&e.jsx(Alert,{severity:"success",sx:{mb:2},children:f}),d&&e.jsx(Alert,{severity:"error",sx:{mb:2},children:d}),e.jsxs(Tabs,{value:s,onChange:se,indicatorColor:"primary",textColor:"primary",variant:"fullWidth",sx:{mb:3,borderBottom:1,borderColor:"divider"},children:[e.jsx(Tab,{icon:e.jsx(pe,{}),label:"Dashboard"}),e.jsx(Tab,{icon:e.jsx(S,{}),label:"Auto-Deactivation"}),e.jsx(Tab,{icon:e.jsx(R,{}),label:"System Health"}),e.jsx(Tab,{icon:e.jsx(me,{}),label:"Notifications"})]}),o&&e.jsx(Box,{display:"flex",justifyContent:"center",my:4,children:e.jsx(CircularProgress,{})}),!o&&e.jsxs(e.Fragment,{children:[s===0&&h&&e.jsxs(Box,{children:[e.jsxs(Grid,{container:!0,spacing:3,mb:4,children:[e.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:e.jsx(u,{title:"Total Users",value:h.totalUsers,icon:e.jsx(xe,{}),color:"primary"})}),e.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:e.jsx(u,{title:"Deactivated Accounts",value:h.deactivatedAccounts,icon:e.jsx(S,{}),color:"error"})}),e.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:e.jsx(u,{title:"Recovered Accounts",value:h.recoveredAccounts,icon:e.jsx(R,{}),color:"success"})}),e.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:e.jsx(u,{title:"Today's Activities",value:h.todayActivities,icon:e.jsx(V,{}),color:"info"})})]}),e.jsxs(Card,{sx:{mb:4,p:3},children:[e.jsx(Typography,{variant:"h6",mb:2,children:"Weekly Account Status"}),e.jsxs(Grid,{container:!0,spacing:3,children:[e.jsxs(Grid,{item:!0,xs:12,md:6,children:[e.jsxs(Box,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx(Typography,{children:"New Deactivations (7 days)"}),e.jsx(Typography,{fontWeight:"bold",children:h.weeklyDeactivations})]}),e.jsx(Divider,{sx:{my:2}}),e.jsxs(Box,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx(Typography,{children:"Pending Recovery Requests"}),e.jsx(Typography,{fontWeight:"bold",children:h.pendingRecoveries})]})]}),e.jsxs(Grid,{item:!0,xs:12,md:6,children:[e.jsxs(Box,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx(Typography,{children:"Successful Recoveries (7 days)"}),e.jsx(Typography,{fontWeight:"bold",children:h.weeklyRecoveries})]}),e.jsx(Divider,{sx:{my:2}}),e.jsxs(Box,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx(Typography,{children:"Recovery Rate"}),e.jsx(Typography,{fontWeight:"bold",children:h.weeklyDeactivations>0?`${(h.weeklyRecoveries/h.weeklyDeactivations*100).toFixed(1)}%`:"0%"})]})]})]})]}),e.jsxs(Card,{sx:{mb:4},children:[e.jsxs(Box,{p:2,display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx(Typography,{variant:"h6",children:"Recent Account Activities"}),e.jsx(Button,{variant:"text",size:"small",onClick:re,disabled:!((z=y==null?void 0:y.activities)!=null&&z.some(t=>!t.read)),children:"Mark All as Read"})]}),e.jsx(Divider,{}),e.jsx(TableContainer,{children:e.jsxs(Table,{children:[e.jsx(TableHead,{children:e.jsxs(TableRow,{children:[e.jsx(TableCell,{children:"Activity"}),e.jsx(TableCell,{children:"User"}),e.jsx(TableCell,{children:"Time"}),e.jsx(TableCell,{children:"Status"}),e.jsx(TableCell,{children:"IP Address"}),e.jsx(TableCell,{children:"Actions"})]})}),e.jsx(TableBody,{children:(G=y==null?void 0:y.activities)==null?void 0:G.map(t=>e.jsxs(TableRow,{sx:{bgcolor:t.read?"inherit":"action.hover","&:hover":{bgcolor:"action.selected"}},children:[e.jsx(TableCell,{children:e.jsx(ge,{type:t.type})}),e.jsxs(TableCell,{children:[e.jsx(Typography,{variant:"body2",fontWeight:"medium",children:t.userName}),e.jsx(Typography,{variant:"caption",color:"text.secondary",children:t.userEmail})]}),e.jsx(TableCell,{children:v(t.timestamp)}),e.jsx(TableCell,{children:e.jsx(be,{status:t.status})}),e.jsx(TableCell,{children:e.jsx(Typography,{variant:"body2",children:t.ipAddress})}),e.jsx(TableCell,{children:e.jsx(Tooltip,{title:t.read?"Already read":"Mark as read",children:e.jsx("span",{children:e.jsx(IconButton,{size:"small",onClick:()=>ie(t.id),disabled:t.read,children:e.jsx(_,{fontSize:"small"})})})})})]},t.id))})]})}),e.jsx(Box,{p:2,display:"flex",justifyContent:"center",children:e.jsx(Pagination,{count:((N=y==null?void 0:y.pagination)==null?void 0:N.pages)||1,page:A,onChange:(t,n)=>O(n),color:"primary"})})]})]}),s===1&&b&&x&&e.jsxs(Box,{children:[e.jsxs(Grid,{container:!0,spacing:3,mb:4,children:[e.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:e.jsx(u,{title:"Auto-deactivated Accounts",value:b.autoDeactivatedCount,icon:e.jsx(S,{}),color:"warning"})}),e.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:e.jsx(u,{title:"Expired Tokens",value:b.expiredTokensCount,icon:e.jsx(je,{}),color:"error"})}),e.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:e.jsx(u,{title:"Recent Deactivations (7d)",value:b.recentDeactivations,icon:e.jsx(V,{}),color:"info"})}),e.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:e.jsx(u,{title:"Reactivated Accounts",value:b.reactivatedAccounts,icon:e.jsx(R,{}),color:"success"})})]}),e.jsxs(Card,{sx:{mb:4,p:3},children:[e.jsx(Typography,{variant:"h6",mb:2,children:"Reactivation Metrics"}),e.jsxs(Grid,{container:!0,spacing:3,children:[e.jsxs(Grid,{item:!0,xs:12,md:4,children:[e.jsx(Typography,{variant:"subtitle2",color:"text.secondary",children:"Deactivations"}),e.jsxs(Box,{mt:2,children:[e.jsxs(Box,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1,children:[e.jsx(Typography,{children:"Today"}),e.jsx(Typography,{fontWeight:"bold",children:x.deactivations.today})]}),e.jsxs(Box,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1,children:[e.jsx(Typography,{children:"This Week"}),e.jsx(Typography,{fontWeight:"bold",children:x.deactivations.week})]}),e.jsxs(Box,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx(Typography,{children:"This Month"}),e.jsx(Typography,{fontWeight:"bold",children:x.deactivations.month})]})]})]}),e.jsxs(Grid,{item:!0,xs:12,md:4,children:[e.jsx(Typography,{variant:"subtitle2",color:"text.secondary",children:"Login Attempts"}),e.jsxs(Box,{mt:2,children:[e.jsxs(Box,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1,children:[e.jsx(Typography,{children:"Today"}),e.jsx(Typography,{fontWeight:"bold",children:x.loginAttempts.today})]}),e.jsxs(Box,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1,children:[e.jsx(Typography,{children:"This Week"}),e.jsx(Typography,{fontWeight:"bold",children:x.loginAttempts.week})]}),e.jsxs(Box,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx(Typography,{children:"This Month"}),e.jsx(Typography,{fontWeight:"bold",children:x.loginAttempts.month})]})]})]}),e.jsxs(Grid,{item:!0,xs:12,md:4,children:[e.jsx(Typography,{variant:"subtitle2",color:"text.secondary",children:"Reactivation Rates"}),e.jsxs(Box,{mt:2,children:[e.jsxs(Box,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1,children:[e.jsx(Typography,{children:"Weekly Rate"}),e.jsxs(Typography,{fontWeight:"bold",children:[x.reactivationRates.weekly,"%"]})]}),e.jsxs(Box,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1,children:[e.jsx(Typography,{children:"Monthly Rate"}),e.jsxs(Typography,{fontWeight:"bold",children:[x.reactivationRates.monthly,"%"]})]}),e.jsxs(Box,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx(Typography,{children:"Overall Rate"}),e.jsxs(Typography,{fontWeight:"bold",children:[x.reactivationRates.overall,"%"]})]})]})]})]})]}),e.jsxs(Card,{sx:{mb:4},children:[e.jsxs(Box,{p:2,display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx(Typography,{variant:"h6",children:"Inactive Account Login Attempts"}),e.jsxs(Box,{children:[e.jsxs(TextField,{select:!0,size:"small",value:D,onChange:t=>Z(Number(t.target.value)),SelectProps:{native:!0},label:"Timeframe",sx:{width:120,mr:2},children:[e.jsx("option",{value:7,children:"7 days"}),e.jsx("option",{value:30,children:"30 days"}),e.jsx("option",{value:90,children:"90 days"})]}),e.jsx(Button,{variant:"outlined",startIcon:e.jsx(L,{}),size:"small",children:"Export"})]})]}),e.jsx(Divider,{}),e.jsx(TableContainer,{children:e.jsxs(Table,{children:[e.jsx(TableHead,{children:e.jsxs(TableRow,{children:[e.jsx(TableCell,{children:"User"}),e.jsx(TableCell,{children:"Status"}),e.jsx(TableCell,{children:"Deactivated At"}),e.jsx(TableCell,{children:"Last Login Attempt"}),e.jsx(TableCell,{children:"Attempts"}),e.jsx(TableCell,{children:"Reactivated"})]})}),e.jsx(TableBody,{children:(P=g==null?void 0:g.attempts)==null?void 0:P.map(t=>e.jsxs(TableRow,{children:[e.jsxs(TableCell,{children:[e.jsx(Typography,{variant:"body2",fontWeight:"medium",children:t.name}),e.jsx(Typography,{variant:"caption",color:"text.secondary",children:t.email})]}),e.jsx(TableCell,{children:e.jsx(Chip,{size:"small",color:t.status==="Deleted"?"error":"warning",label:t.status})}),e.jsx(TableCell,{children:v(t.deactivatedAt)}),e.jsx(TableCell,{children:v(t.lastLoginAttempt)}),e.jsx(TableCell,{children:t.totalAttempts}),e.jsx(TableCell,{children:t.wasReactivated?e.jsx(Chip,{size:"small",color:"success",label:`Yes - ${v(t.reactivatedAt).split(" ")[0]}`}):e.jsx(Chip,{size:"small",color:"default",label:"No"})})]},t.id))})]})}),e.jsx(Box,{p:2,display:"flex",justifyContent:"center",children:e.jsx(Pagination,{count:(($=g==null?void 0:g.pagination)==null?void 0:$.pages)||1,page:k,onChange:(t,n)=>X(n),color:"primary"})})]}),e.jsx(Card,{sx:{mb:4,p:3},children:e.jsxs(Box,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(Box,{children:[e.jsx(Typography,{variant:"h6",children:"Manual Controls"}),e.jsx(Typography,{variant:"body2",color:"text.secondary",mt:1,children:"Manually trigger auto-deactivation processes for testing and maintenance."})]}),e.jsx(Button,{variant:"contained",color:"warning",onClick:()=>w(!0),children:"Trigger Auto-Deactivation"})]})}),e.jsxs(Dialog,{open:ee,onClose:()=>w(!1),children:[e.jsx(DialogTitle,{children:"Trigger Auto-Deactivation Process"}),e.jsx(DialogContent,{children:e.jsx(Typography,{children:"Are you sure you want to manually trigger the auto-deactivation process? This will scan for inactive users and deactivate their accounts according to the configured rules."})}),e.jsxs(DialogActions,{children:[e.jsx(Button,{onClick:()=>w(!1),children:"Cancel"}),e.jsx(Button,{onClick:ae,color:"warning",variant:"contained",disabled:o,children:o?e.jsx(CircularProgress,{size:24}):"Confirm"})]})]})]}),s===2&&r&&e.jsxs(Box,{children:[e.jsxs(Grid,{container:!0,spacing:3,mb:4,children:[e.jsx(Grid,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(Card,{sx:{p:3,height:"100%"},children:[e.jsx(Typography,{variant:"h6",mb:2,children:"User Metrics"}),e.jsxs(Box,{children:[e.jsxs(Box,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsx(Typography,{children:"Total Users"}),e.jsx(Typography,{fontWeight:"bold",children:r.userMetrics.total})]}),e.jsxs(Box,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsx(Typography,{children:"Active Users"}),e.jsx(Typography,{fontWeight:"bold",children:r.userMetrics.active})]}),e.jsxs(Box,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsx(Typography,{children:"Inactive Users"}),e.jsx(Typography,{fontWeight:"bold",children:r.userMetrics.inactive})]}),e.jsxs(Box,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsx(Typography,{children:"Admin Users"}),e.jsx(Typography,{fontWeight:"bold",children:r.userMetrics.admins})]}),e.jsxs(Box,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx(Typography,{children:"Deactivated Users"}),e.jsx(Typography,{fontWeight:"bold",children:r.userMetrics.deactivated})]})]})]})}),e.jsx(Grid,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(Card,{sx:{p:3,height:"100%"},children:[e.jsx(Typography,{variant:"h6",mb:2,children:"System Metrics"}),e.jsxs(Box,{children:[e.jsxs(Box,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsx(Typography,{children:"Total Activities"}),e.jsx(Typography,{fontWeight:"bold",children:r.systemMetrics.activities})]}),e.jsxs(Box,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsx(Typography,{children:"Total Notifications"}),e.jsx(Typography,{fontWeight:"bold",children:r.systemMetrics.notifications})]}),e.jsxs(Box,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx(Typography,{children:"System Uptime"}),e.jsx(Typography,{fontWeight:"bold",children:F(r.systemMetrics.systemUptime)})]})]})]})}),e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsxs(Card,{sx:{p:3,height:"100%"},children:[e.jsx(Typography,{variant:"h6",mb:2,children:"Account Status Distribution"}),e.jsxs(Box,{sx:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center"},children:[e.jsxs(Box,{sx:{mb:2},children:[e.jsx(Typography,{variant:"body2",mb:1,children:"Active Users"}),e.jsx(Box,{sx:{width:"100%",bgcolor:"background.paper",borderRadius:1,overflow:"hidden"},children:e.jsx(Box,{sx:{bgcolor:"success.main",height:24,width:`${r.userMetrics.active/r.userMetrics.total*100}%`}})})]}),e.jsxs(Box,{sx:{mb:2},children:[e.jsx(Typography,{variant:"body2",mb:1,children:"Inactive Users"}),e.jsx(Box,{sx:{width:"100%",bgcolor:"background.paper",borderRadius:1,overflow:"hidden"},children:e.jsx(Box,{sx:{bgcolor:"warning.main",height:24,width:`${r.userMetrics.inactive/r.userMetrics.total*100}%`}})})]}),e.jsxs(Box,{children:[e.jsx(Typography,{variant:"body2",mb:1,children:"Deactivated Users"}),e.jsx(Box,{sx:{width:"100%",bgcolor:"background.paper",borderRadius:1,overflow:"hidden"},children:e.jsx(Box,{sx:{bgcolor:"error.main",height:24,width:`${r.userMetrics.deactivated/r.userMetrics.total*100}%`}})})]})]})]})})]}),e.jsxs(Card,{sx:{mb:4,p:3},children:[e.jsxs(Box,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,children:[e.jsx(Typography,{variant:"h6",children:"System Health Report"}),e.jsx(Button,{variant:"outlined",startIcon:e.jsx(L,{}),size:"small",children:"Download Report"})]}),e.jsx(Divider,{sx:{mb:3}}),e.jsxs(Grid,{container:!0,spacing:3,children:[e.jsxs(Grid,{item:!0,xs:12,md:6,children:[e.jsx(Typography,{variant:"subtitle2",fontWeight:"bold",gutterBottom:!0,children:"Account Status"}),e.jsx(Box,{sx:{mb:3},children:e.jsxs(Typography,{variant:"body2",children:["The system currently has ",r.userMetrics.total," total registered users. Of these, ",r.userMetrics.active," accounts (",(r.userMetrics.active/r.userMetrics.total*100).toFixed(1),"%) are currently active. There are ",r.userMetrics.deactivated," deactivated accounts, which represents ",(r.userMetrics.deactivated/r.userMetrics.total*100).toFixed(1),"% of all accounts."]})}),e.jsx(Typography,{variant:"subtitle2",fontWeight:"bold",gutterBottom:!0,children:"Admin Access"}),e.jsxs(Typography,{variant:"body2",children:["There are ",r.userMetrics.admins," admin users with privileged access to the system."]})]}),e.jsxs(Grid,{item:!0,xs:12,md:6,children:[e.jsx(Typography,{variant:"subtitle2",fontWeight:"bold",gutterBottom:!0,children:"System Performance"}),e.jsx(Box,{sx:{mb:3},children:e.jsxs(Typography,{variant:"body2",children:["The system has been running for ",F(r.systemMetrics.systemUptime)," without interruption. During this time, it has recorded ",r.systemMetrics.activities," user activities and generated ",r.systemMetrics.notifications," notifications."]})}),e.jsx(Typography,{variant:"subtitle2",fontWeight:"bold",gutterBottom:!0,children:"Recommendations"}),e.jsxs(Typography,{variant:"body2",children:["Based on the current system metrics, consider reviewing inactive user accounts (",r.userMetrics.inactive," users) that may be eligible for auto-deactivation."]})]})]})]})]}),s===3&&e.jsxs(Box,{children:[e.jsxs(Card,{sx:{mb:4},children:[e.jsxs(Box,{p:2,display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx(Typography,{variant:"h6",children:"Admin Notifications"}),e.jsx(Button,{variant:"text",size:"small",onClick:oe,disabled:!((H=p==null?void 0:p.notifications)!=null&&H.some(t=>!t.read)),children:"Mark All as Read"})]}),e.jsx(Divider,{}),e.jsx(TableContainer,{children:e.jsxs(Table,{children:[e.jsx(TableHead,{children:e.jsxs(TableRow,{children:[e.jsx(TableCell,{children:"Type"}),e.jsx(TableCell,{children:"Title"}),e.jsx(TableCell,{children:"Message"}),e.jsx(TableCell,{children:"Time"}),e.jsx(TableCell,{children:"Actions"})]})}),e.jsx(TableBody,{children:(U=p==null?void 0:p.notifications)==null?void 0:U.map(t=>e.jsxs(TableRow,{sx:{bgcolor:t.read?"inherit":"action.hover","&:hover":{bgcolor:"action.selected"}},children:[e.jsx(TableCell,{children:e.jsx(Chip,{size:"small",color:t.type==="success"?"success":t.type==="warning"?"warning":t.type==="error"?"error":"info",label:t.type})}),e.jsx(TableCell,{children:e.jsx(Typography,{variant:"body2",fontWeight:"medium",children:t.title})}),e.jsx(TableCell,{children:e.jsx(Typography,{variant:"body2",children:t.message})}),e.jsx(TableCell,{children:v(t.timestamp)}),e.jsx(TableCell,{children:e.jsx(Tooltip,{title:t.read?"Already read":"Mark as read",children:e.jsx("span",{children:e.jsx(IconButton,{size:"small",onClick:()=>ne(t.id),disabled:t.read,children:e.jsx(_,{fontSize:"small"})})})})})]},t.id))})]})}),e.jsx(Box,{p:2,display:"flex",justifyContent:"center",children:e.jsx(Pagination,{count:((E=p==null?void 0:p.pagination)==null?void 0:E.pages)||1,page:B,onChange:(t,n)=>K(n),color:"primary"})})]}),e.jsxs(Card,{sx:{p:3},children:[e.jsx(Typography,{variant:"h6",mb:2,children:"Email Notification Settings"}),e.jsxs(Grid,{container:!0,spacing:3,children:[e.jsxs(Grid,{item:!0,xs:12,md:6,children:[e.jsx(Typography,{variant:"body2",mb:2,children:"Configure which events trigger email notifications to administrators."}),e.jsx(Box,{sx:{mt:2},children:[{label:"Account Recovery Notifications",checked:!0},{label:"Deactivation Notifications",checked:!0},{label:"Failed Login Attempts",checked:!1},{label:"System Health Reports",checked:!0}].map((t,n)=>e.jsxs(Box,{display:"flex",alignItems:"center",mb:1,children:[e.jsx(ve,{checked:t.checked}),e.jsx(Typography,{children:t.label})]},n))})]}),e.jsxs(Grid,{item:!0,xs:12,md:6,children:[e.jsx(Typography,{variant:"subtitle2",gutterBottom:!0,children:"Recipient Admins"}),e.jsx(TextField,{fullWidth:!0,label:"Admin Email Addresses",multiline:!0,rows:3,placeholder:"Enter email addresses, separated by commas",defaultValue:"admin@example.com, admin2@example.com",sx:{mb:2}}),e.jsx(Button,{variant:"contained",children:"Save Settings"})]})]})]})]})]})]})},ve=({checked:s})=>e.jsx(Box,{sx:{width:20,height:20,borderRadius:.5,border:"1px solid",borderColor:s?"primary.main":"grey.400",bgcolor:s?"primary.main":"transparent",display:"flex",alignItems:"center",justifyContent:"center",mr:1},children:s&&e.jsx(Box,{component:"span",sx:{width:12,height:12,borderRadius:.2,bgcolor:"white"}})});export{Ae as default};
