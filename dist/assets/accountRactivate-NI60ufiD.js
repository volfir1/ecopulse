import{b as N,d as P,e as C,r as n,j as e,L as R,s as A,x as L,i as S,f}from"./index-D-CDyacC.js";import{c as E}from"./crosswalk-C791ooMc.js";import{R as x}from"./refresh-cw-BS07gTpP.js";import{A as q}from"./arrow-right-BLt4xx2t.js";const B=()=>{const v=N(),g=P(),c=C(),[h,i]=n.useState(!0),[s,t]=n.useState("processing"),[b,p]=n.useState(""),[w,a]=n.useState(""),[$,j]=n.useState(""),l="#18753C",d="#0D5C2B",y="#334155";n.useEffect(()=>{const r=new URLSearchParams(g.search),u=r.get("token"),m=r.get("email");if(!u||!m){t("error"),a("Invalid reactivation link. Please request a new one from the login page."),i(!1);return}j(u),p(m),(async()=>{try{const o=await f.reactivateAccount(m,u);o.success?(t("success"),a(o.message||"Your account has been successfully reactivated!")):o.expired?(t("expired"),a("This reactivation link has expired. Please request a new one.")):(t("error"),a(o.message||"Failed to reactivate your account. Please try again."))}catch(o){console.error("Reactivation error:",o),t("error"),a("An error occurred while reactivating your account. Please try again.")}finally{i(!1)}})()},[g.search]);const k=async()=>{if(!b){c.error("Email address is missing.");return}i(!0);try{const r=await f.requestReactivation(b);r.success?(c.success("A new reactivation link has been sent to your email."),a("A new reactivation link has been sent to your email. Please check your inbox."),t("expired")):c.error(r.message||"Failed to send reactivation email.")}catch(r){console.error("Error requesting new link:",r),c.error("An error occurred. Please try again later.")}finally{i(!1)}};return e.jsxs(e.Fragment,{children:[h&&e.jsx(R,{}),e.jsxs("div",{className:"flex min-h-screen",children:[e.jsxs("div",{className:"relative flex items-center justify-center w-1/2 bg-center bg-cover",style:{backgroundImage:`url(${E})`,backgroundSize:"cover",backgroundPosition:"center"},children:[e.jsx("div",{className:"absolute inset-0",style:{backgroundColor:"rgba(255, 255, 255, 0.9)"}}),e.jsxs("div",{className:"relative z-10 w-full max-w-md p-8 mx-12 bg-white shadow-xl rounded-3xl",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsxs("div",{className:`w-16 h-16 rounded-full flex items-center justify-center ${s==="success"?"bg-green-100":s==="error"||s==="expired"?"bg-red-100":"bg-blue-100"}`,children:[s==="success"&&e.jsx(A,{className:"w-8 h-8 text-green-600"}),s==="error"&&e.jsx(L,{className:"w-8 h-8 text-red-600"}),s==="expired"&&e.jsx(x,{className:"w-8 h-8 text-orange-600"}),s==="processing"&&e.jsx(x,{className:"w-8 h-8 text-blue-600 animate-spin"})]})}),e.jsx("h2",{className:"mb-6 text-2xl font-bold text-center",style:{color:y},children:s==="success"?"Account Reactivated":s==="error"?"Reactivation Failed":s==="expired"?"Link Expired":"Reactivating Account"}),e.jsx("div",{className:`p-4 mb-6 rounded-lg ${s==="success"?"bg-green-50 border border-green-200":s==="error"?"bg-red-50 border border-red-200":s==="expired"?"bg-orange-50 border border-orange-200":"bg-blue-50 border border-blue-200"}`,children:e.jsx("p",{className:`text-sm ${s==="success"?"text-green-700":s==="error"?"text-red-700":s==="expired"?"text-orange-700":"text-blue-700"}`,children:w||(s==="processing"?"We are reactivating your account. Please wait a moment...":"")})}),s==="success"&&e.jsxs("button",{onClick:()=>v("/login"),className:"w-full h-10 flex items-center justify-center gap-2 bg-green-700 text-white rounded-lg font-medium hover:bg-green-800 transition-colors text-sm",style:{backgroundColor:l,":hover":{backgroundColor:d}},children:[e.jsx("span",{children:"Proceed to Login"}),e.jsx(q,{className:"w-4 h-4"})]}),s==="expired"&&e.jsxs("button",{onClick:k,disabled:h,className:"w-full h-10 flex items-center justify-center gap-2 bg-green-700 text-white rounded-lg font-medium hover:bg-green-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm",style:{backgroundColor:l,":hover":{backgroundColor:d}},children:[e.jsx(x,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Request New Link"})]}),(s==="error"||s==="expired")&&e.jsx("div",{className:"mt-4 text-center",children:e.jsx(S,{to:"/login",className:"text-sm font-medium text-green-700 hover:underline",style:{color:l},children:"Return to Login Page"})})]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 p-12 text-center",style:{background:`linear-gradient(135deg, ${l}, ${d})`},children:[e.jsx("img",{src:"/logo.png",alt:"EcoPulse Logo",className:"w-32 h-32 mb-6"}),e.jsx("h1",{className:"mb-6 text-5xl font-bold text-white",children:"EcoPulse"}),e.jsx("p",{className:"text-lg leading-relaxed text-white/80 max-w-md",children:"Join our community of eco-conscious individuals and businesses. Together, we can make a difference for a sustainable future."})]})]})]})};export{B as default};
