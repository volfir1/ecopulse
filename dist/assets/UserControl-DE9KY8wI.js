import{ao as ir,ap as or,r as R,aq as lr,j as o,ag as cr,aj as ur,ar as dr,T as fe,as as fr,at as se,au as hr,av as Lt,aw as m,G as vr,_ as mr,B,V as Xe,ab as Ie,a as ve,E as gr,C as pr,K as yr,a8 as Ke,ax as wr,ay as xr,J as Le,X as Ye,az as Dr,aA as ft,aB as ht,aC as vt,aD as mt,n as Ze,a5 as Oe,N as br,f as gt,l as Tr,L as Cr,aE as pt,aF as Ur}from"./index-CeiZKB8G.js";import{P as T}from"./index-BGHELInD.js";import{r as y,t as b,a as _,b as nt,g as je,m as kr,c as jr,d as Ar,e as Pr,s as Je,h as Ot,i as Mr,j as Lr,l as St,k as yt,n as Or,o as wt,q as Sr,u as Ir,v as Rr,w as It,f as Ee,p as Er}from"./index-CSy9Y5X6.js";import{F as Rt,S as Et}from"./Select-CMa9xVQT.js";import{I as Ft,T as xe}from"./TextField-CJViWXc3.js";import{L as Fr,D as xt,I as Dt}from"./DatePicker-Ds6sJbAa.js";import{t as Hr,_ as v}from"./defineProperty-DwkOtAkb.js";import{S as Ht}from"./Stack-DquXuBVl.js";import{C as Re}from"./Chip-D2qSxnvf.js";import{R as Yr,a as Wr,X as $r,Y as _r,T as Nr,L as zr}from"./generateCategoricalChart-D0QOHPu-.js";import{L as qr,a as ze}from"./LineChart-BbR2cBpr.js";import{G as be}from"./Grid-D1VGGK9h.js";import{T as Yt,a as $e}from"./Tabs-DKAoBmDF.js";import{T as Br,a as Vr}from"./TablePagination-CbCjEsJh.js";import{T as Qr,a as Gr,b as qe,c as ne,d as Xr}from"./TableRow-DpNBZInR.js";import"./index-D_GLsIW_.js";import"./useThemeProps-B7RzBULZ.js";import"./styled-ZZIuKTKu.js";import"./KeyboardArrowRight-Bas1HYWb.js";function Kr(i){return ir("MuiDialogContentText",i)}or("MuiDialogContentText",["root"]);const Zr=i=>{const{classes:s}=i,t=dr({root:["root"]},Kr,s);return{...s,...t}},Jr=cr(fe,{shouldForwardProp:i=>fr(i)||i==="classes",name:"MuiDialogContentText",slot:"Root",overridesResolver:(i,s)=>s.root})({}),Be=R.forwardRef(function(s,a){const t=lr({props:s,name:"MuiDialogContentText"}),{children:e,className:n,...r}=t,l=Zr(r);return o.jsx(Jr,{component:"p",variant:"body1",color:"textSecondary",ref:a,ownerState:r,className:ur(l.root,n),...t,classes:l})}),bt=se([o.jsx("path",{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6"},"0"),o.jsx("path",{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12m0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17"},"1")],"AdminPanelSettings"),Wt=se(o.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12m8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8"}),"Block"),ea=se(o.jsx("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 16H5V10h14zM9 14H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2zm-8 4H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2z"}),"CalendarMonth"),ta=se(o.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle"),Ve=se(o.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear"),ra=se(o.jsx("path",{d:"M9 11H7v2h2zm4 0h-2v2h2zm4 0h-2v2h2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 16H5V9h14z"}),"DateRange"),aa=se(o.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),na=se(o.jsx("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61"}),"FilterAlt"),sa=se(o.jsx("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"}),"FilterList"),ia=se(o.jsx("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l4 4 4-4H6c0-3.86 3.14-7 7-7s7 3.14 7 7-3.14 7-7 7c-1.9 0-3.62-.76-4.88-1.99L6.7 18.42C8.32 20.01 10.55 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m2 8v-1c0-1.1-.9-2-2-2s-2 .9-2 2v1c-.55 0-1 .45-1 1v3c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-3c0-.55-.45-1-1-1m-1 0h-2v-1c0-.55.45-1 1-1s1 .45 1 1z"}),"LockReset"),oa=se(o.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 14H4V8l8 5 8-5zm-8-7L4 6h16z"}),"MailOutline"),la=se(o.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert"),et=se(o.jsx("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"People"),ca=se(o.jsx("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd"),ua=se(o.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search"),da=se(o.jsx("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp"),fa=se(o.jsx("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm-2 16-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9z"}),"VerifiedUser");function $t(i,s){y(2,arguments);var a=b(i),t=_(s);return isNaN(t)?new Date(NaN):(t&&a.setDate(a.getDate()+t),a)}function st(i,s){y(2,arguments);var a=b(i),t=_(s);if(isNaN(t))return new Date(NaN);if(!t)return a;var e=a.getDate(),n=new Date(a.getTime());n.setMonth(a.getMonth()+t+1,0);var r=n.getDate();return e>=r?n:(a.setFullYear(n.getFullYear(),n.getMonth(),e),a)}var ha=36e5;function va(i,s){y(2,arguments);var a=_(s);return nt(i,a*ha)}function Fe(i,s){var a,t,e,n,r,l,d,f;y(1,arguments);var k=je(),j=_((a=(t=(e=(n=s==null?void 0:s.weekStartsOn)!==null&&n!==void 0?n:s==null||(r=s.locale)===null||r===void 0||(l=r.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&e!==void 0?e:k.weekStartsOn)!==null&&t!==void 0?t:(d=k.locale)===null||d===void 0||(f=d.options)===null||f===void 0?void 0:f.weekStartsOn)!==null&&a!==void 0?a:0);if(!(j>=0&&j<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var w=b(i),C=w.getDay(),V=(C<j?7:0)+C-j;return w.setDate(w.getDate()-V),w.setHours(0,0,0,0),w}function tt(i){y(1,arguments);var s=b(i);return s.setHours(0,0,0,0),s}var ma=6e4;function ga(i,s){y(2,arguments);var a=_(s);return nt(i,a*ma)}function pa(i,s){y(2,arguments);var a=_(s);return nt(i,a*1e3)}function ya(i,s){y(2,arguments);var a=_(s),t=a*7;return $t(i,t)}function wa(i,s){y(2,arguments);var a=_(s);return st(i,a*12)}function xa(i,s){y(2,arguments);var a=tt(i),t=tt(s);return a.getTime()===t.getTime()}function Tt(i){y(1,arguments);var s=b(i);return s.setHours(23,59,59,999),s}function rt(i){y(1,arguments);var s=b(i),a=s.getMonth();return s.setFullYear(s.getFullYear(),a+1,0),s.setHours(23,59,59,999),s}function at(i){y(1,arguments);var s=b(i);return s.setDate(1),s.setHours(0,0,0,0),s}function Ct(i){y(1,arguments);var s=b(i),a=s.getFullYear();return s.setFullYear(a+1,0,0),s.setHours(23,59,59,999),s}function Da(i){y(1,arguments);var s=b(i),a=new Date(0);return a.setFullYear(s.getFullYear(),0,1),a.setHours(0,0,0,0),a}function ba(i,s){var a,t,e,n,r,l,d,f;y(1,arguments);var k=je(),j=_((a=(t=(e=(n=s==null?void 0:s.weekStartsOn)!==null&&n!==void 0?n:s==null||(r=s.locale)===null||r===void 0||(l=r.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&e!==void 0?e:k.weekStartsOn)!==null&&t!==void 0?t:(d=k.locale)===null||d===void 0||(f=d.options)===null||f===void 0?void 0:f.weekStartsOn)!==null&&a!==void 0?a:0);if(!(j>=0&&j<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var w=b(i),C=w.getDay(),V=(C<j?-7:0)+6-(C-j);return w.setDate(w.getDate()+V),w.setHours(23,59,59,999),w}function Ta(i,s){if(i==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(i[a]=s[a]);return i}function Ca(i){y(1,arguments);var s=b(i),a=s.getDate();return a}function _t(i){y(1,arguments);var s=b(i),a=s.getFullYear(),t=s.getMonth(),e=new Date(0);return e.setFullYear(a,t+1,0),e.setHours(0,0,0,0),e.getDate()}function Ua(i){y(1,arguments);var s=b(i),a=s.getHours();return a}function ka(i){y(1,arguments);var s=b(i),a=s.getMilliseconds();return a}function ja(i){y(1,arguments);var s=b(i),a=s.getMinutes();return a}function Aa(i){y(1,arguments);var s=b(i),a=s.getMonth();return a}function Pa(i){y(1,arguments);var s=b(i),a=s.getSeconds();return a}function Ma(i,s){var a,t,e,n,r,l,d,f;y(1,arguments);var k=b(i),j=k.getFullYear(),w=je(),C=_((a=(t=(e=(n=s==null?void 0:s.firstWeekContainsDate)!==null&&n!==void 0?n:s==null||(r=s.locale)===null||r===void 0||(l=r.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&e!==void 0?e:w.firstWeekContainsDate)!==null&&t!==void 0?t:(d=w.locale)===null||d===void 0||(f=d.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(C>=1&&C<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var V=new Date(0);V.setFullYear(j+1,0,C),V.setHours(0,0,0,0);var Q=Fe(V,s),ie=new Date(0);ie.setFullYear(j,0,C),ie.setHours(0,0,0,0);var x=Fe(ie,s);return k.getTime()>=Q.getTime()?j+1:k.getTime()>=x.getTime()?j:j-1}function La(i,s){var a,t,e,n,r,l,d,f;y(1,arguments);var k=je(),j=_((a=(t=(e=(n=s==null?void 0:s.firstWeekContainsDate)!==null&&n!==void 0?n:s==null||(r=s.locale)===null||r===void 0||(l=r.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&e!==void 0?e:k.firstWeekContainsDate)!==null&&t!==void 0?t:(d=k.locale)===null||d===void 0||(f=d.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&a!==void 0?a:1),w=Ma(i,s),C=new Date(0);C.setFullYear(w,0,j),C.setHours(0,0,0,0);var V=Fe(C,s);return V}var Oa=6048e5;function Sa(i,s){y(1,arguments);var a=b(i),t=Fe(a,s).getTime()-La(a,s).getTime();return Math.round(t/Oa)+1}function Ia(i){return y(1,arguments),b(i).getFullYear()}function Qe(i,s){y(2,arguments);var a=b(i),t=b(s);return a.getTime()>t.getTime()}function Ge(i,s){y(2,arguments);var a=b(i),t=b(s);return a.getTime()<t.getTime()}function Ra(i,s){y(2,arguments);var a=b(i),t=b(s);return a.getTime()===t.getTime()}function Ut(i,s){(s==null||s>i.length)&&(s=i.length);for(var a=0,t=Array(s);a<s;a++)t[a]=i[a];return t}function Ea(i,s){if(i){if(typeof i=="string")return Ut(i,s);var a={}.toString.call(i).slice(8,-1);return a==="Object"&&i.constructor&&(a=i.constructor.name),a==="Map"||a==="Set"?Array.from(i):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Ut(i,s):void 0}}function kt(i,s){var a=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!a){if(Array.isArray(i)||(a=Ea(i))||s){a&&(i=a);var t=0,e=function(){};return{s:e,n:function(){return t>=i.length?{done:!0}:{done:!1,value:i[t++]}},e:function(f){throw f},f:e}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var n,r=!0,l=!1;return{s:function(){a=a.call(i)},n:function(){var f=a.next();return r=f.done,f},e:function(f){l=!0,n=f},f:function(){try{r||a.return==null||a.return()}finally{if(l)throw n}}}}function O(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(s&&s.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),s&&hr(i,s)}function _e(i){return _e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},_e(i)}function Nt(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Nt=function(){return!!i})()}function Fa(i,s){if(s&&(Lt(s)=="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m(i)}function S(i){var s=Nt();return function(){var a,t=_e(i);if(s){var e=_e(this).constructor;a=Reflect.construct(t,arguments,e)}else a=t.apply(this,arguments);return Fa(this,a)}}function M(i,s){if(!(i instanceof s))throw new TypeError("Cannot call a class as a function")}function Ha(i,s){for(var a=0;a<s.length;a++){var t=s[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(i,Hr(t.key),t)}}function L(i,s,a){return s&&Ha(i.prototype,s),Object.defineProperty(i,"prototype",{writable:!1}),i}var Ya=10,zt=function(){function i(){M(this,i),v(this,"priority",void 0),v(this,"subPriority",0)}return L(i,[{key:"validate",value:function(a,t){return!0}}]),i}(),Wa=function(i){O(a,i);var s=S(a);function a(t,e,n,r,l){var d;return M(this,a),d=s.call(this),d.value=t,d.validateValue=e,d.setValue=n,d.priority=r,l&&(d.subPriority=l),d}return L(a,[{key:"validate",value:function(e,n){return this.validateValue(e,this.value,n)}},{key:"set",value:function(e,n,r){return this.setValue(e,n,this.value,r)}}]),a}(zt),$a=function(i){O(a,i);var s=S(a);function a(){var t;M(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),v(m(t),"priority",Ya),v(m(t),"subPriority",-1),t}return L(a,[{key:"set",value:function(e,n){if(n.timestampIsSet)return e;var r=new Date(0);return r.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),r.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),r}}]),a}(zt),F=function(){function i(){M(this,i),v(this,"incompatibleTokens",void 0),v(this,"priority",void 0),v(this,"subPriority",void 0)}return L(i,[{key:"run",value:function(a,t,e,n){var r=this.parse(a,t,e,n);return r?{setter:new Wa(r.value,this.validate,this.set,this.priority,this.subPriority),rest:r.rest}:null}},{key:"validate",value:function(a,t,e){return!0}}]),i}(),_a=function(i){O(a,i);var s=S(a);function a(){var t;M(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),v(m(t),"priority",140),v(m(t),"incompatibleTokens",["R","u","t","T"]),t}return L(a,[{key:"parse",value:function(e,n,r){switch(n){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});case"GGGG":default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}},{key:"set",value:function(e,n,r){return n.era=r,e.setUTCFullYear(r,0,1),e.setUTCHours(0,0,0,0),e}}]),a}(F),te={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},me={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function re(i,s){return i&&{value:s(i.value),rest:i.rest}}function K(i,s){var a=s.match(i);return a?{value:parseInt(a[0],10),rest:s.slice(a[0].length)}:null}function ge(i,s){var a=s.match(i);if(!a)return null;if(a[0]==="Z")return{value:0,rest:s.slice(1)};var t=a[1]==="+"?1:-1,e=a[2]?parseInt(a[2],10):0,n=a[3]?parseInt(a[3],10):0,r=a[5]?parseInt(a[5],10):0;return{value:t*(e*kr+n*jr+r*Ar),rest:s.slice(a[0].length)}}function qt(i){return K(te.anyDigitsSigned,i)}function Z(i,s){switch(i){case 1:return K(te.singleDigit,s);case 2:return K(te.twoDigits,s);case 3:return K(te.threeDigits,s);case 4:return K(te.fourDigits,s);default:return K(new RegExp("^\\d{1,"+i+"}"),s)}}function Ne(i,s){switch(i){case 1:return K(te.singleDigitSigned,s);case 2:return K(te.twoDigitsSigned,s);case 3:return K(te.threeDigitsSigned,s);case 4:return K(te.fourDigitsSigned,s);default:return K(new RegExp("^-?\\d{1,"+i+"}"),s)}}function it(i){switch(i){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Bt(i,s){var a=s>0,t=a?s:1-s,e;if(t<=50)e=i||100;else{var n=t+50,r=Math.floor(n/100)*100,l=i>=n%100;e=i+r-(l?100:0)}return a?e:1-e}function Vt(i){return i%400===0||i%4===0&&i%100!==0}var Na=function(i){O(a,i);var s=S(a);function a(){var t;M(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),v(m(t),"priority",130),v(m(t),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),t}return L(a,[{key:"parse",value:function(e,n,r){var l=function(f){return{year:f,isTwoDigitYear:n==="yy"}};switch(n){case"y":return re(Z(4,e),l);case"yo":return re(r.ordinalNumber(e,{unit:"year"}),l);default:return re(Z(n.length,e),l)}}},{key:"validate",value:function(e,n){return n.isTwoDigitYear||n.year>0}},{key:"set",value:function(e,n,r){var l=e.getUTCFullYear();if(r.isTwoDigitYear){var d=Bt(r.year,l);return e.setUTCFullYear(d,0,1),e.setUTCHours(0,0,0,0),e}var f=!("era"in n)||n.era===1?r.year:1-r.year;return e.setUTCFullYear(f,0,1),e.setUTCHours(0,0,0,0),e}}]),a}(F),za=function(i){O(a,i);var s=S(a);function a(){var t;M(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),v(m(t),"priority",130),v(m(t),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),t}return L(a,[{key:"parse",value:function(e,n,r){var l=function(f){return{year:f,isTwoDigitYear:n==="YY"}};switch(n){case"Y":return re(Z(4,e),l);case"Yo":return re(r.ordinalNumber(e,{unit:"year"}),l);default:return re(Z(n.length,e),l)}}},{key:"validate",value:function(e,n){return n.isTwoDigitYear||n.year>0}},{key:"set",value:function(e,n,r,l){var d=Pr(e,l);if(r.isTwoDigitYear){var f=Bt(r.year,d);return e.setUTCFullYear(f,0,l.firstWeekContainsDate),e.setUTCHours(0,0,0,0),Je(e,l)}var k=!("era"in n)||n.era===1?r.year:1-r.year;return e.setUTCFullYear(k,0,l.firstWeekContainsDate),e.setUTCHours(0,0,0,0),Je(e,l)}}]),a}(F),qa=function(i){O(a,i);var s=S(a);function a(){var t;M(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),v(m(t),"priority",130),v(m(t),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),t}return L(a,[{key:"parse",value:function(e,n){return Ne(n==="R"?4:n.length,e)}},{key:"set",value:function(e,n,r){var l=new Date(0);return l.setUTCFullYear(r,0,4),l.setUTCHours(0,0,0,0),Ot(l)}}]),a}(F),Ba=function(i){O(a,i);var s=S(a);function a(){var t;M(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),v(m(t),"priority",130),v(m(t),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),t}return L(a,[{key:"parse",value:function(e,n){return Ne(n==="u"?4:n.length,e)}},{key:"set",value:function(e,n,r){return e.setUTCFullYear(r,0,1),e.setUTCHours(0,0,0,0),e}}]),a}(F),Va=function(i){O(a,i);var s=S(a);function a(){var t;M(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),v(m(t),"priority",120),v(m(t),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),t}return L(a,[{key:"parse",value:function(e,n,r){switch(n){case"Q":case"QQ":return Z(n.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,n){return n>=1&&n<=4}},{key:"set",value:function(e,n,r){return e.setUTCMonth((r-1)*3,1),e.setUTCHours(0,0,0,0),e}}]),a}(F),Qa=function(i){O(a,i);var s=S(a);function a(){var t;M(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),v(m(t),"priority",120),v(m(t),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),t}return L(a,[{key:"parse",value:function(e,n,r){switch(n){case"q":case"qq":return Z(n.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,n){return n>=1&&n<=4}},{key:"set",value:function(e,n,r){return e.setUTCMonth((r-1)*3,1),e.setUTCHours(0,0,0,0),e}}]),a}(F),Ga=function(i){O(a,i);var s=S(a);function a(){var t;M(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),v(m(t),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),v(m(t),"priority",110),t}return L(a,[{key:"parse",value:function(e,n,r){var l=function(f){return f-1};switch(n){case"M":return re(K(te.month,e),l);case"MM":return re(Z(2,e),l);case"Mo":return re(r.ordinalNumber(e,{unit:"month"}),l);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,n){return n>=0&&n<=11}},{key:"set",value:function(e,n,r){return e.setUTCMonth(r,1),e.setUTCHours(0,0,0,0),e}}]),a}(F),Xa=function(i){O(a,i);var s=S(a);function a(){var t;M(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),v(m(t),"priority",110),v(m(t),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),t}return L(a,[{key:"parse",value:function(e,n,r){var l=function(f){return f-1};switch(n){case"L":return re(K(te.month,e),l);case"LL":return re(Z(2,e),l);case"Lo":return re(r.ordinalNumber(e,{unit:"month"}),l);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,n){return n>=0&&n<=11}},{key:"set",value:function(e,n,r){return e.setUTCMonth(r,1),e.setUTCHours(0,0,0,0),e}}]),a}(F);function Ka(i,s,a){y(2,arguments);var t=b(i),e=_(s),n=Mr(t,a)-e;return t.setUTCDate(t.getUTCDate()-n*7),t}var Za=function(i){O(a,i);var s=S(a);function a(){var t;M(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),v(m(t),"priority",100),v(m(t),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),t}return L(a,[{key:"parse",value:function(e,n,r){switch(n){case"w":return K(te.week,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return Z(n.length,e)}}},{key:"validate",value:function(e,n){return n>=1&&n<=53}},{key:"set",value:function(e,n,r,l){return Je(Ka(e,r,l),l)}}]),a}(F);function Ja(i,s){y(2,arguments);var a=b(i),t=_(s),e=Lr(a)-t;return a.setUTCDate(a.getUTCDate()-e*7),a}var en=function(i){O(a,i);var s=S(a);function a(){var t;M(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),v(m(t),"priority",100),v(m(t),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),t}return L(a,[{key:"parse",value:function(e,n,r){switch(n){case"I":return K(te.week,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return Z(n.length,e)}}},{key:"validate",value:function(e,n){return n>=1&&n<=53}},{key:"set",value:function(e,n,r){return Ot(Ja(e,r))}}]),a}(F),tn=[31,28,31,30,31,30,31,31,30,31,30,31],rn=[31,29,31,30,31,30,31,31,30,31,30,31],an=function(i){O(a,i);var s=S(a);function a(){var t;M(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),v(m(t),"priority",90),v(m(t),"subPriority",1),v(m(t),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),t}return L(a,[{key:"parse",value:function(e,n,r){switch(n){case"d":return K(te.date,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return Z(n.length,e)}}},{key:"validate",value:function(e,n){var r=e.getUTCFullYear(),l=Vt(r),d=e.getUTCMonth();return l?n>=1&&n<=rn[d]:n>=1&&n<=tn[d]}},{key:"set",value:function(e,n,r){return e.setUTCDate(r),e.setUTCHours(0,0,0,0),e}}]),a}(F),nn=function(i){O(a,i);var s=S(a);function a(){var t;M(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),v(m(t),"priority",90),v(m(t),"subpriority",1),v(m(t),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),t}return L(a,[{key:"parse",value:function(e,n,r){switch(n){case"D":case"DD":return K(te.dayOfYear,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return Z(n.length,e)}}},{key:"validate",value:function(e,n){var r=e.getUTCFullYear(),l=Vt(r);return l?n>=1&&n<=366:n>=1&&n<=365}},{key:"set",value:function(e,n,r){return e.setUTCMonth(0,r),e.setUTCHours(0,0,0,0),e}}]),a}(F);function ot(i,s,a){var t,e,n,r,l,d,f,k;y(2,arguments);var j=je(),w=_((t=(e=(n=(r=a==null?void 0:a.weekStartsOn)!==null&&r!==void 0?r:a==null||(l=a.locale)===null||l===void 0||(d=l.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&n!==void 0?n:j.weekStartsOn)!==null&&e!==void 0?e:(f=j.locale)===null||f===void 0||(k=f.options)===null||k===void 0?void 0:k.weekStartsOn)!==null&&t!==void 0?t:0);if(!(w>=0&&w<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var C=b(i),V=_(s),Q=C.getUTCDay(),ie=V%7,x=(ie+7)%7,D=(x<w?7:0)+V-Q;return C.setUTCDate(C.getUTCDate()+D),C}var sn=function(i){O(a,i);var s=S(a);function a(){var t;M(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),v(m(t),"priority",90),v(m(t),"incompatibleTokens",["D","i","e","c","t","T"]),t}return L(a,[{key:"parse",value:function(e,n,r){switch(n){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,n){return n>=0&&n<=6}},{key:"set",value:function(e,n,r,l){return e=ot(e,r,l),e.setUTCHours(0,0,0,0),e}}]),a}(F),on=function(i){O(a,i);var s=S(a);function a(){var t;M(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),v(m(t),"priority",90),v(m(t),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),t}return L(a,[{key:"parse",value:function(e,n,r,l){var d=function(k){var j=Math.floor((k-1)/7)*7;return(k+l.weekStartsOn+6)%7+j};switch(n){case"e":case"ee":return re(Z(n.length,e),d);case"eo":return re(r.ordinalNumber(e,{unit:"day"}),d);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,n){return n>=0&&n<=6}},{key:"set",value:function(e,n,r,l){return e=ot(e,r,l),e.setUTCHours(0,0,0,0),e}}]),a}(F),ln=function(i){O(a,i);var s=S(a);function a(){var t;M(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),v(m(t),"priority",90),v(m(t),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),t}return L(a,[{key:"parse",value:function(e,n,r,l){var d=function(k){var j=Math.floor((k-1)/7)*7;return(k+l.weekStartsOn+6)%7+j};switch(n){case"c":case"cc":return re(Z(n.length,e),d);case"co":return re(r.ordinalNumber(e,{unit:"day"}),d);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,n){return n>=0&&n<=6}},{key:"set",value:function(e,n,r,l){return e=ot(e,r,l),e.setUTCHours(0,0,0,0),e}}]),a}(F);function cn(i,s){y(2,arguments);var a=_(s);a%7===0&&(a=a-7);var t=1,e=b(i),n=e.getUTCDay(),r=a%7,l=(r+7)%7,d=(l<t?7:0)+a-n;return e.setUTCDate(e.getUTCDate()+d),e}var un=function(i){O(a,i);var s=S(a);function a(){var t;M(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),v(m(t),"priority",90),v(m(t),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),t}return L(a,[{key:"parse",value:function(e,n,r){var l=function(f){return f===0?7:f};switch(n){case"i":case"ii":return Z(n.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return re(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),l);case"iiiii":return re(r.day(e,{width:"narrow",context:"formatting"}),l);case"iiiiii":return re(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),l);case"iiii":default:return re(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),l)}}},{key:"validate",value:function(e,n){return n>=1&&n<=7}},{key:"set",value:function(e,n,r){return e=cn(e,r),e.setUTCHours(0,0,0,0),e}}]),a}(F),dn=function(i){O(a,i);var s=S(a);function a(){var t;M(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),v(m(t),"priority",80),v(m(t),"incompatibleTokens",["b","B","H","k","t","T"]),t}return L(a,[{key:"parse",value:function(e,n,r){switch(n){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,n,r){return e.setUTCHours(it(r),0,0,0),e}}]),a}(F),fn=function(i){O(a,i);var s=S(a);function a(){var t;M(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),v(m(t),"priority",80),v(m(t),"incompatibleTokens",["a","B","H","k","t","T"]),t}return L(a,[{key:"parse",value:function(e,n,r){switch(n){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,n,r){return e.setUTCHours(it(r),0,0,0),e}}]),a}(F),hn=function(i){O(a,i);var s=S(a);function a(){var t;M(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),v(m(t),"priority",80),v(m(t),"incompatibleTokens",["a","b","t","T"]),t}return L(a,[{key:"parse",value:function(e,n,r){switch(n){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,n,r){return e.setUTCHours(it(r),0,0,0),e}}]),a}(F),vn=function(i){O(a,i);var s=S(a);function a(){var t;M(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),v(m(t),"priority",70),v(m(t),"incompatibleTokens",["H","K","k","t","T"]),t}return L(a,[{key:"parse",value:function(e,n,r){switch(n){case"h":return K(te.hour12h,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return Z(n.length,e)}}},{key:"validate",value:function(e,n){return n>=1&&n<=12}},{key:"set",value:function(e,n,r){var l=e.getUTCHours()>=12;return l&&r<12?e.setUTCHours(r+12,0,0,0):!l&&r===12?e.setUTCHours(0,0,0,0):e.setUTCHours(r,0,0,0),e}}]),a}(F),mn=function(i){O(a,i);var s=S(a);function a(){var t;M(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),v(m(t),"priority",70),v(m(t),"incompatibleTokens",["a","b","h","K","k","t","T"]),t}return L(a,[{key:"parse",value:function(e,n,r){switch(n){case"H":return K(te.hour23h,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return Z(n.length,e)}}},{key:"validate",value:function(e,n){return n>=0&&n<=23}},{key:"set",value:function(e,n,r){return e.setUTCHours(r,0,0,0),e}}]),a}(F),gn=function(i){O(a,i);var s=S(a);function a(){var t;M(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),v(m(t),"priority",70),v(m(t),"incompatibleTokens",["h","H","k","t","T"]),t}return L(a,[{key:"parse",value:function(e,n,r){switch(n){case"K":return K(te.hour11h,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return Z(n.length,e)}}},{key:"validate",value:function(e,n){return n>=0&&n<=11}},{key:"set",value:function(e,n,r){var l=e.getUTCHours()>=12;return l&&r<12?e.setUTCHours(r+12,0,0,0):e.setUTCHours(r,0,0,0),e}}]),a}(F),pn=function(i){O(a,i);var s=S(a);function a(){var t;M(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),v(m(t),"priority",70),v(m(t),"incompatibleTokens",["a","b","h","H","K","t","T"]),t}return L(a,[{key:"parse",value:function(e,n,r){switch(n){case"k":return K(te.hour24h,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return Z(n.length,e)}}},{key:"validate",value:function(e,n){return n>=1&&n<=24}},{key:"set",value:function(e,n,r){var l=r<=24?r%24:r;return e.setUTCHours(l,0,0,0),e}}]),a}(F),yn=function(i){O(a,i);var s=S(a);function a(){var t;M(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),v(m(t),"priority",60),v(m(t),"incompatibleTokens",["t","T"]),t}return L(a,[{key:"parse",value:function(e,n,r){switch(n){case"m":return K(te.minute,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return Z(n.length,e)}}},{key:"validate",value:function(e,n){return n>=0&&n<=59}},{key:"set",value:function(e,n,r){return e.setUTCMinutes(r,0,0),e}}]),a}(F),wn=function(i){O(a,i);var s=S(a);function a(){var t;M(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),v(m(t),"priority",50),v(m(t),"incompatibleTokens",["t","T"]),t}return L(a,[{key:"parse",value:function(e,n,r){switch(n){case"s":return K(te.second,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return Z(n.length,e)}}},{key:"validate",value:function(e,n){return n>=0&&n<=59}},{key:"set",value:function(e,n,r){return e.setUTCSeconds(r,0),e}}]),a}(F),xn=function(i){O(a,i);var s=S(a);function a(){var t;M(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),v(m(t),"priority",30),v(m(t),"incompatibleTokens",["t","T"]),t}return L(a,[{key:"parse",value:function(e,n){var r=function(d){return Math.floor(d*Math.pow(10,-n.length+3))};return re(Z(n.length,e),r)}},{key:"set",value:function(e,n,r){return e.setUTCMilliseconds(r),e}}]),a}(F),Dn=function(i){O(a,i);var s=S(a);function a(){var t;M(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),v(m(t),"priority",10),v(m(t),"incompatibleTokens",["t","T","x"]),t}return L(a,[{key:"parse",value:function(e,n){switch(n){case"X":return ge(me.basicOptionalMinutes,e);case"XX":return ge(me.basic,e);case"XXXX":return ge(me.basicOptionalSeconds,e);case"XXXXX":return ge(me.extendedOptionalSeconds,e);case"XXX":default:return ge(me.extended,e)}}},{key:"set",value:function(e,n,r){return n.timestampIsSet?e:new Date(e.getTime()-r)}}]),a}(F),bn=function(i){O(a,i);var s=S(a);function a(){var t;M(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),v(m(t),"priority",10),v(m(t),"incompatibleTokens",["t","T","X"]),t}return L(a,[{key:"parse",value:function(e,n){switch(n){case"x":return ge(me.basicOptionalMinutes,e);case"xx":return ge(me.basic,e);case"xxxx":return ge(me.basicOptionalSeconds,e);case"xxxxx":return ge(me.extendedOptionalSeconds,e);case"xxx":default:return ge(me.extended,e)}}},{key:"set",value:function(e,n,r){return n.timestampIsSet?e:new Date(e.getTime()-r)}}]),a}(F),Tn=function(i){O(a,i);var s=S(a);function a(){var t;M(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),v(m(t),"priority",40),v(m(t),"incompatibleTokens","*"),t}return L(a,[{key:"parse",value:function(e){return qt(e)}},{key:"set",value:function(e,n,r){return[new Date(r*1e3),{timestampIsSet:!0}]}}]),a}(F),Cn=function(i){O(a,i);var s=S(a);function a(){var t;M(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),v(m(t),"priority",20),v(m(t),"incompatibleTokens","*"),t}return L(a,[{key:"parse",value:function(e){return qt(e)}},{key:"set",value:function(e,n,r){return[new Date(r),{timestampIsSet:!0}]}}]),a}(F),Un={G:new _a,y:new Na,Y:new za,R:new qa,u:new Ba,Q:new Va,q:new Qa,M:new Ga,L:new Xa,w:new Za,I:new en,d:new an,D:new nn,E:new sn,e:new on,c:new ln,i:new un,a:new dn,b:new fn,B:new hn,h:new vn,H:new mn,K:new gn,k:new pn,m:new yn,s:new wn,S:new xn,X:new Dn,x:new bn,t:new Tn,T:new Cn},kn=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,jn=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,An=/^'([^]*?)'?$/,Pn=/''/g,Mn=/\S/,Ln=/[a-zA-Z]/;function On(i,s,a,t){var e,n,r,l,d,f,k,j,w,C,V,Q,ie,x,D,U,g,h;y(3,arguments);var P=String(i),N=String(s),G=je(),z=(e=(n=t==null?void 0:t.locale)!==null&&n!==void 0?n:G.locale)!==null&&e!==void 0?e:St;if(!z.match)throw new RangeError("locale must contain match property");var he=_((r=(l=(d=(f=t==null?void 0:t.firstWeekContainsDate)!==null&&f!==void 0?f:t==null||(k=t.locale)===null||k===void 0||(j=k.options)===null||j===void 0?void 0:j.firstWeekContainsDate)!==null&&d!==void 0?d:G.firstWeekContainsDate)!==null&&l!==void 0?l:(w=G.locale)===null||w===void 0||(C=w.options)===null||C===void 0?void 0:C.firstWeekContainsDate)!==null&&r!==void 0?r:1);if(!(he>=1&&he<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var oe=_((V=(Q=(ie=(x=t==null?void 0:t.weekStartsOn)!==null&&x!==void 0?x:t==null||(D=t.locale)===null||D===void 0||(U=D.options)===null||U===void 0?void 0:U.weekStartsOn)!==null&&ie!==void 0?ie:G.weekStartsOn)!==null&&Q!==void 0?Q:(g=G.locale)===null||g===void 0||(h=g.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&V!==void 0?V:0);if(!(oe>=0&&oe<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(N==="")return P===""?b(a):new Date(NaN);var de={firstWeekContainsDate:he,weekStartsOn:oe,locale:z},ae=[new $a],$=N.match(jn).map(function(X){var E=X[0];if(E in yt){var ue=yt[E];return ue(X,z.formatLong)}return X}).join("").match(kn),u=[],H=kt($),Y;try{var ce=function(){var E=Y.value;!(t!=null&&t.useAdditionalWeekYearTokens)&&Or(E)&&wt(E,N,i),!(t!=null&&t.useAdditionalDayOfYearTokens)&&Sr(E)&&wt(E,N,i);var ue=E[0],Te=Un[ue];if(Te){var we=Te.incompatibleTokens;if(Array.isArray(we)){var Ce=u.find(function(Me){return we.includes(Me.token)||Me.token===ue});if(Ce)throw new RangeError("The format string mustn't contain `".concat(Ce.fullToken,"` and `").concat(E,"` at the same time"))}else if(Te.incompatibleTokens==="*"&&u.length>0)throw new RangeError("The format string mustn't contain `".concat(E,"` and any other token at the same time"));u.push({token:ue,fullToken:E});var Pe=Te.run(P,E,z.match,de);if(!Pe)return{v:new Date(NaN)};ae.push(Pe.setter),P=Pe.rest}else{if(ue.match(Ln))throw new RangeError("Format string contains an unescaped latin alphabet character `"+ue+"`");if(E==="''"?E="'":ue==="'"&&(E=Sn(E)),P.indexOf(E)===0)P=P.slice(E.length);else return{v:new Date(NaN)}}};for(H.s();!(Y=H.n()).done;){var le=ce();if(Lt(le)==="object")return le.v}}catch(X){H.e(X)}finally{H.f()}if(P.length>0&&Mn.test(P))return new Date(NaN);var Ae=ae.map(function(X){return X.priority}).sort(function(X,E){return E-X}).filter(function(X,E,ue){return ue.indexOf(X)===E}).map(function(X){return ae.filter(function(E){return E.priority===X}).sort(function(E,ue){return ue.subPriority-E.subPriority})}).map(function(X){return X[0]}),I=b(a);if(isNaN(I.getTime()))return new Date(NaN);var q=Ir(I,Rr(I)),W={},J=kt(Ae),pe;try{for(J.s();!(pe=J.n()).done;){var De=pe.value;if(!De.validate(q,de))return new Date(NaN);var ye=De.set(q,W,de);Array.isArray(ye)?(q=ye[0],Ta(W,ye[1])):q=ye}}catch(X){J.e(X)}finally{J.f()}return q}function Sn(i){return i.match(An)[1].replace(Pn,"'")}function jt(i){y(1,arguments);var s=b(i);return s.setMinutes(0,0,0),s}function In(i,s){y(2,arguments);var a=jt(i),t=jt(s);return a.getTime()===t.getTime()}function Rn(i,s){y(2,arguments);var a=b(i),t=b(s);return a.getFullYear()===t.getFullYear()&&a.getMonth()===t.getMonth()}function En(i,s){y(2,arguments);var a=b(i),t=b(s);return a.getFullYear()===t.getFullYear()}function Qt(i,s){y(2,arguments);var a=b(i).getTime(),t=b(s.start).getTime(),e=b(s.end).getTime();if(!(t<=e))throw new RangeError("Invalid interval");return a>=t&&a<=e}function Fn(i,s){y(2,arguments);var a=b(i),t=_(s),e=a.getFullYear(),n=a.getDate(),r=new Date(0);r.setFullYear(e,t,15),r.setHours(0,0,0,0);var l=_t(r);return a.setMonth(t,Math.min(n,l)),a}function Hn(i,s){y(2,arguments);var a=b(i),t=_(s);return a.setDate(t),a}function Yn(i,s){y(2,arguments);var a=b(i),t=_(s);return a.setHours(t),a}function Wn(i,s){y(2,arguments);var a=b(i),t=_(s);return a.setMilliseconds(t),a}function $n(i,s){y(2,arguments);var a=b(i),t=_(s);return a.setMinutes(t),a}function _n(i,s){y(2,arguments);var a=b(i),t=_(s);return a.setSeconds(t),a}function Nn(i,s){y(2,arguments);var a=b(i),t=_(s);return isNaN(a.getTime())?new Date(NaN):(a.setFullYear(t),a)}function At(i,s){y(2,arguments);var a=_(s);return st(i,-a)}var We={exports:{}},Pt;function zn(){return Pt||(Pt=1,function(i,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=function(d,f){switch(d){case"P":return f.date({width:"short"});case"PP":return f.date({width:"medium"});case"PPP":return f.date({width:"long"});case"PPPP":default:return f.date({width:"full"})}},t=function(d,f){switch(d){case"p":return f.time({width:"short"});case"pp":return f.time({width:"medium"});case"ppp":return f.time({width:"long"});case"pppp":default:return f.time({width:"full"})}},e=function(d,f){var k=d.match(/(P+)(p+)?/)||[],j=k[1],w=k[2];if(!w)return a(d,f);var C;switch(j){case"P":C=f.dateTime({width:"short"});break;case"PP":C=f.dateTime({width:"medium"});break;case"PPP":C=f.dateTime({width:"long"});break;case"PPPP":default:C=f.dateTime({width:"full"});break}return C.replace("{{date}}",a(j,f)).replace("{{time}}",t(w,f))},n={p:t,P:e},r=n;s.default=r,i.exports=s.default}(We,We.exports)),We.exports}var qn=zn();const Bn=vr(qn),Vn={y:{sectionType:"year",contentType:"digit",maxLength:4},yy:"year",yyy:{sectionType:"year",contentType:"digit",maxLength:4},yyyy:"year",M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMMM:{sectionType:"month",contentType:"letter"},MMM:{sectionType:"month",contentType:"letter"},L:{sectionType:"month",contentType:"digit",maxLength:2},LL:"month",LLL:{sectionType:"month",contentType:"letter"},LLLL:{sectionType:"month",contentType:"letter"},d:{sectionType:"day",contentType:"digit",maxLength:2},dd:"day",do:{sectionType:"day",contentType:"digit-with-letter"},E:{sectionType:"weekDay",contentType:"letter"},EE:{sectionType:"weekDay",contentType:"letter"},EEE:{sectionType:"weekDay",contentType:"letter"},EEEE:{sectionType:"weekDay",contentType:"letter"},EEEEE:{sectionType:"weekDay",contentType:"letter"},i:{sectionType:"weekDay",contentType:"digit",maxLength:1},ii:"weekDay",iii:{sectionType:"weekDay",contentType:"letter"},iiii:{sectionType:"weekDay",contentType:"letter"},e:{sectionType:"weekDay",contentType:"digit",maxLength:1},ee:"weekDay",eee:{sectionType:"weekDay",contentType:"letter"},eeee:{sectionType:"weekDay",contentType:"letter"},eeeee:{sectionType:"weekDay",contentType:"letter"},eeeeee:{sectionType:"weekDay",contentType:"letter"},c:{sectionType:"weekDay",contentType:"digit",maxLength:1},cc:"weekDay",ccc:{sectionType:"weekDay",contentType:"letter"},cccc:{sectionType:"weekDay",contentType:"letter"},ccccc:{sectionType:"weekDay",contentType:"letter"},cccccc:{sectionType:"weekDay",contentType:"letter"},a:"meridiem",aa:"meridiem",aaa:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},Qn={year:"yyyy",month:"LLLL",monthShort:"MMM",dayOfMonth:"d",dayOfMonthFull:"do",weekday:"EEEE",weekdayShort:"EEEEEE",hours24h:"HH",hours12h:"hh",meridiem:"aa",minutes:"mm",seconds:"ss",fullDate:"PP",keyboardDate:"P",shortDate:"MMM d",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",fullTime:"p",fullTime12h:"hh:mm aa",fullTime24h:"HH:mm",keyboardDateTime:"P p",keyboardDateTime12h:"P hh:mm aa",keyboardDateTime24h:"P HH:mm"};class Gn{constructor(s){this.isMUIAdapter=!0,this.isTimezoneCompatible=!1,this.lib=void 0,this.locale=void 0,this.formats=void 0,this.formatTokenMap=Vn,this.escapedCharacters={start:"'",end:"'"},this.longFormatters=void 0,this.date=r=>typeof r>"u"?new Date:r===null?null:new Date(r),this.getInvalidDate=()=>new Date("Invalid Date"),this.getTimezone=()=>"default",this.setTimezone=r=>r,this.toJsDate=r=>r,this.getCurrentLocaleCode=()=>this.locale.code,this.is12HourCycleInCurrentLocale=()=>/a/.test(this.locale.formatLong.time({width:"short"})),this.expandFormat=r=>{const l=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;return r.match(l).map(d=>{const f=d[0];if(f==="p"||f==="P"){const k=this.longFormatters[f];return k(d,this.locale.formatLong)}return d}).join("")},this.formatNumber=r=>r,this.getDayOfWeek=r=>r.getDay()+1;const{locale:a,formats:t,longFormatters:e,lib:n}=s;this.locale=a,this.formats=mr({},Qn,t),this.longFormatters=e,this.lib=n||"date-fns"}}class Xn extends Gn{constructor({locale:s,formats:a}={}){super({locale:s??St,formats:a,longFormatters:Bn}),this.parse=(t,e)=>t===""?null:On(t,e,new Date,{locale:this.locale}),this.isValid=t=>t==null?!1:It(t),this.format=(t,e)=>this.formatByString(t,this.formats[e]),this.formatByString=(t,e)=>Ee(t,e,{locale:this.locale}),this.isEqual=(t,e)=>t===null&&e===null?!0:t===null||e===null?!1:Ra(t,e),this.isSameYear=(t,e)=>En(t,e),this.isSameMonth=(t,e)=>Rn(t,e),this.isSameDay=(t,e)=>xa(t,e),this.isSameHour=(t,e)=>In(t,e),this.isAfter=(t,e)=>Qe(t,e),this.isAfterYear=(t,e)=>Qe(t,Ct(e)),this.isAfterDay=(t,e)=>Qe(t,Tt(e)),this.isBefore=(t,e)=>Ge(t,e),this.isBeforeYear=(t,e)=>Ge(t,this.startOfYear(e)),this.isBeforeDay=(t,e)=>Ge(t,this.startOfDay(e)),this.isWithinRange=(t,[e,n])=>Qt(t,{start:e,end:n}),this.startOfYear=t=>Da(t),this.startOfMonth=t=>at(t),this.startOfWeek=t=>Fe(t,{locale:this.locale}),this.startOfDay=t=>tt(t),this.endOfYear=t=>Ct(t),this.endOfMonth=t=>rt(t),this.endOfWeek=t=>ba(t,{locale:this.locale}),this.endOfDay=t=>Tt(t),this.addYears=(t,e)=>wa(t,e),this.addMonths=(t,e)=>st(t,e),this.addWeeks=(t,e)=>ya(t,e),this.addDays=(t,e)=>$t(t,e),this.addHours=(t,e)=>va(t,e),this.addMinutes=(t,e)=>ga(t,e),this.addSeconds=(t,e)=>pa(t,e),this.getYear=t=>Ia(t),this.getMonth=t=>Aa(t),this.getDate=t=>Ca(t),this.getHours=t=>Ua(t),this.getMinutes=t=>ja(t),this.getSeconds=t=>Pa(t),this.getMilliseconds=t=>ka(t),this.setYear=(t,e)=>Nn(t,e),this.setMonth=(t,e)=>Fn(t,e),this.setDate=(t,e)=>Hn(t,e),this.setHours=(t,e)=>Yn(t,e),this.setMinutes=(t,e)=>$n(t,e),this.setSeconds=(t,e)=>_n(t,e),this.setMilliseconds=(t,e)=>Wn(t,e),this.getDaysInMonth=t=>_t(t),this.getWeekArray=t=>{const e=this.startOfWeek(this.startOfMonth(t)),n=this.endOfWeek(this.endOfMonth(t));let r=0,l=e;const d=[];for(;this.isBefore(l,n);){const f=Math.floor(r/7);d[f]=d[f]||[],d[f].push(l),l=this.addDays(l,1),r+=1}return d},this.getWeekNumber=t=>Sa(t,{locale:this.locale}),this.getYearRange=([t,e])=>{const n=this.startOfYear(t),r=this.endOfYear(e),l=[];let d=n;for(;this.isBefore(d,r);)l.push(d),d=this.addYears(d,1);return l}}}const Se=(i,s="MMM d")=>{if(!i)return null;if(i.includes(" ")){const[t,e]=i.split(" "),n=new Date().getFullYear(),r=`${t} ${e}, ${n}`,l=new Date(r);return s?Ee(l,s):l}const a=Er(i);return It(a)?s?Ee(a,s):a:null},ke=({title:i,value:s,icon:a,color:t})=>o.jsx(pr,{elevation:1,sx:{borderRadius:"10px"},children:o.jsx(yr,{children:o.jsxs(B,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[o.jsxs(B,{children:[o.jsx(fe,{variant:"subtitle2",color:"textSecondary",sx:{mb:1},children:i}),o.jsx(fe,{variant:"h3",component:"div",fontWeight:"bold",children:s})]}),o.jsx(Ke,{sx:{bgcolor:t,width:56,height:56},children:a})]})})}),Gt=({data:i})=>{const s=i.statistics||{totalUsers:"0",activeUsers:"0",newUsers:"0",verifiedUsers:"0"},a=parseInt(s.totalUsers.replace(/,/g,""))-parseInt(s.activeUsers.replace(/,/g,"")),t=i.activityData&&i.activityData.length>0?i.activityData:[{date:"Feb 19",totalVisits:7,activeUsers:4,newUsers:2},{date:"Feb 20",totalVisits:5,activeUsers:3,newUsers:1},{date:"Feb 21",totalVisits:6,activeUsers:4,newUsers:0},{date:"Feb 22",totalVisits:6,activeUsers:3,newUsers:2},{date:"Feb 23",totalVisits:8,activeUsers:4,newUsers:1},{date:"Feb 24",totalVisits:10,activeUsers:4,newUsers:3},{date:"Feb 25",totalVisits:4,activeUsers:3,newUsers:0}],[e,n]=R.useState({startDate:At(new Date,6),endDate:new Date}),[r,l]=R.useState("6months"),[d,f]=R.useState(t),[k,j]=R.useState(!1),w=[{value:"30days",label:"Last 30 Days"},{value:"3months",label:"Last 3 Months"},{value:"6months",label:"Last 6 Months"},{value:"1year",label:"Last Year"},{value:"custom",label:"Custom Range"}],C=(g,h)=>{if(g==="preset"){if(l(h),h==="custom"){j(!0);return}j(!1);const P=new Date;let N=P;N=At(P,{"30days":1,"3months":3,"6months":6,"1year":12}[h]||6),n({startDate:at(N),endDate:rt(P)})}else g==="start"?n({...e,startDate:at(h)}):g==="end"&&n({...e,endDate:rt(h)})},V=g=>{C("preset",g.target.value)};R.useEffect(()=>{if(!(t!=null&&t.length))return;const g=t.filter(h=>{const P=Se(h.date,null);return P?Qt(P,{start:e.startDate,end:e.endDate}):!1}).sort((h,P)=>{const N=Se(h.date,null),G=Se(P.date,null);return!N||!G?0:N-G});f(g)},[t,e]);const Q=`${Ee(e.startDate,"MMM yyyy")} - ${Ee(e.endDate,"MMM yyyy")}`,ie=()=>{if(!(!e.startDate||!e.endDate)&&e.startDate>e.endDate){const g=e.startDate;n({startDate:e.endDate,endDate:g})}},x=d.reduce((g,h)=>g+h.totalVisits,0),D=d.length>0?Math.round(d.reduce((g,h)=>g+h.activeUsers,0)/d.length):0,U=d.reduce((g,h)=>g+h.newUsers,0);return o.jsxs(B,{sx:{mt:4},children:[o.jsx(fe,{variant:"h6",sx:{mb:2},children:"User Dashboard"}),o.jsxs(B,{sx:{display:"flex",flexWrap:"wrap",gap:3,mb:4},children:[o.jsx(B,{sx:{flex:"1 1 200px"},children:o.jsx(ke,{title:"Total Users",value:s.totalUsers,icon:o.jsx(et,{fontSize:"medium",sx:{color:"white"}}),color:"#34a853"})}),o.jsx(B,{sx:{flex:"1 1 200px"},children:o.jsx(ke,{title:"Active Users",value:s.activeUsers,icon:o.jsx(da,{fontSize:"medium",sx:{color:"white"}}),color:"#8bc34a"})}),o.jsx(B,{sx:{flex:"1 1 200px"},children:o.jsx(ke,{title:"New Users",value:s.newUsers,icon:o.jsx(ca,{fontSize:"medium",sx:{color:"white"}}),color:"#2196f3"})}),o.jsx(B,{sx:{flex:"1 1 200px"},children:o.jsx(ke,{title:"Verified Users",value:s.verifiedUsers,icon:o.jsx(fa,{fontSize:"medium",sx:{color:"white"}}),color:"#ffc107"})}),o.jsx(B,{sx:{flex:"1 1 200px"},children:o.jsx(ke,{title:"Inactive Users",value:a.toString(),icon:o.jsx(Wt,{fontSize:"medium",sx:{color:"white"}}),color:"#f44336"})})]}),o.jsxs(Xe,{elevation:1,sx:{p:3,borderRadius:"4px",border:"1px dashed #e0e0e0"},children:[o.jsxs(B,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,flexWrap:"wrap"},children:[o.jsx(fe,{variant:"h6",children:"User Activity"}),o.jsxs(Rt,{size:"small",sx:{minWidth:180},children:[o.jsx(Ft,{id:"date-range-preset-label",children:"Time Period"}),o.jsx(Et,{labelId:"date-range-preset-label",value:r,label:"Time Period",onChange:V,startAdornment:o.jsx(ea,{fontSize:"small",sx:{mr:1}}),children:w.map(g=>o.jsx(Ie,{value:g.value,children:g.label},g.value))})]})]}),k&&o.jsx(B,{sx:{mb:3,p:2,bgcolor:"#f9f9f9",borderRadius:1},children:o.jsx(Fr,{dateAdapter:Xn,children:o.jsxs(Ht,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",children:[o.jsx(xt,{label:"Start Month",views:["year","month"],value:e.startDate,onChange:g=>C("start",g),renderInput:g=>o.jsx(xe,{size:"small",...g,helperText:null})}),o.jsx(xt,{label:"End Month",views:["year","month"],value:e.endDate,onChange:g=>C("end",g),renderInput:g=>o.jsx(xe,{size:"small",...g,helperText:null}),minDate:e.startDate}),o.jsx(ve,{variant:"contained",color:"primary",onClick:ie,startIcon:o.jsx(na,{}),children:"Apply"})]})})}),o.jsx(gr,{sx:{mb:2},children:o.jsx(Re,{icon:o.jsx(ra,{}),label:Q,color:"primary",variant:"outlined"})}),o.jsxs(B,{sx:{display:"flex",mb:3,justifyContent:"space-around",flexWrap:"wrap"},children:[o.jsxs(fe,{variant:"body2",color:"text.secondary",children:["Total Visits: ",o.jsx("strong",{children:x})]}),o.jsxs(fe,{variant:"body2",color:"text.secondary",children:["Avg. Active Users: ",o.jsx("strong",{children:D})]}),o.jsxs(fe,{variant:"body2",color:"text.secondary",children:["New Users: ",o.jsx("strong",{children:U})]})]}),o.jsx(B,{sx:{height:300},children:d.length>0?o.jsx(Yr,{width:"100%",height:"100%",children:o.jsxs(qr,{data:d,margin:{top:10,right:30,left:0,bottom:10},children:[o.jsx(Wr,{strokeDasharray:"3 3",vertical:!1}),o.jsx($r,{dataKey:"date",tickFormatter:g=>Se(g)}),o.jsx(_r,{}),o.jsx(Nr,{formatter:(g,h)=>[`${g}`,h],labelFormatter:g=>Se(g,"MMM d, yyyy")||g}),o.jsx(zr,{wrapperStyle:{position:"relative",marginTop:"10px"}}),o.jsx(ze,{type:"monotone",dataKey:"totalVisits",name:"Total Visits",stroke:"#2196f3",strokeWidth:2,activeDot:{r:6}}),o.jsx(ze,{type:"monotone",dataKey:"activeUsers",name:"Active Users",stroke:"#4caf50",strokeWidth:2}),o.jsx(ze,{type:"monotone",dataKey:"newUsers",name:"New Users",stroke:"#ff9800",strokeWidth:2})]})}):o.jsx(B,{sx:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(fe,{variant:"body1",color:"text.secondary",children:"No data available for the selected time period"})})})]})]})};ke.propTypes={title:T.string.isRequired,value:T.string.isRequired,icon:T.node.isRequired,color:T.string.isRequired};Gt.propTypes={data:T.shape({statistics:T.shape({totalUsers:T.string,activeUsers:T.string,newUsers:T.string,verifiedUsers:T.string,deletedUsers:T.string}),activityData:T.array}).isRequired};const Xt=({users:i,deletedUsers:s,handleEdit:a,handleDeactivateUser:t,handleSendRecovery:e,handleSendPasswordReset:n,updateUserRole:r})=>{const[l,d]=R.useState(null),[f,k]=R.useState(null),[j,w]=R.useState(!1),[C,V]=R.useState(""),[Q,ie]=R.useState({userId:null,userName:"",currentRole:"",newRole:"",confirmationPhrase:""}),[x,D]=R.useState({open:!1,title:"",message:"",confirmText:"",action:null}),[U,g]=R.useState({deactivate:!1,recover:!1,resetPassword:!1,roleChange:!1}),[h,P]=R.useState(0),[N,G]=R.useState(0),[z,he]=R.useState(10),[oe,de]=R.useState(""),[ae,$]=R.useState(!1),[u,H]=R.useState(!1),[Y,ce]=R.useState({status:"all",createdAfter:"",createdBefore:"",lastActiveAfter:"",lastActiveBefore:""}),le=c=>{if(!c)return"Never";try{return new Date(c).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(p){return console.error("Date formatting error:",p),"Invalid date"}},Ae=(c,p)=>{d(c.currentTarget),k(p)},I=()=>{d(null),k(null)},q=c=>{I();const p=c==="admin"?`make ${f.name} admin`:`remove admin from ${f.name}`;ie({userId:f.id,userName:f.name,currentRole:f.role,newRole:c,confirmationPhrase:p}),w(!0)},W=()=>{w(!1),V("")},J=async()=>{if(C===Q.confirmationPhrase)try{g(p=>({...p,roleChange:!0}));const c=await r(Q.userId,Q.newRole);c.success?W():console.error("Failed to update role:",c.error)}catch(c){console.error("Error updating user role:",c)}finally{g(c=>({...c,roleChange:!1}))}},pe=(c,p)=>{if(!(c&&typeof c=="string"&&/^[0-9a-fA-F]{24}$/.test(c))){console.error(`Invalid userId format: ${c}. Expected 24-character hex string.`),D({open:!0,title:"Error",message:"Unable to deactivate user. The ID format is invalid. This may occur when using test data.",confirmText:"OK",action:()=>{}});return}D({open:!0,title:"Confirm User Deactivation",message:`Are you sure you want to deactivate the user "${p}"? This action can be reversed later by sending a recovery link.`,confirmText:"Deactivate",action:async()=>{g(ee=>({...ee,deactivate:!0}));try{await t(c)}finally{g(ee=>({...ee,deactivate:!1}))}}})},De=(c,p)=>{D({open:!0,title:"Send Recovery Link",message:`Are you sure you want to send a recovery link to "${p}" (${c})?`,confirmText:"Send Recovery Link",action:async()=>{g(A=>({...A,recover:!0}));try{await e(c)}finally{g(A=>({...A,recover:!1}))}}})},ye=(c,p)=>{D({open:!0,title:"Send Password Reset Link",message:`Are you sure you want to send a password reset link to "${p}" (${c})?`,confirmText:"Send Reset Link",action:async()=>{g(A=>({...A,resetPassword:!0}));try{await n(c)}finally{g(A=>({...A,resetPassword:!1}))}}})},X=async()=>{x.action&&await x.action(),D({...x,open:!1})},E=(c,p)=>{P(p),G(0)},ue=(c,p)=>{G(p)},Te=c=>{he(parseInt(c.target.value,10)),G(0)},[we,Ce]=R.useState("all"),Pe=c=>{const p=c.target.value;de(p),$(p.length>0),G(0)},Me=()=>{de(""),$(!1)},Kt=()=>{H(c=>!c),u||G(0)},Ue=(c,p)=>{ce(A=>({...A,[c]:p})),G(0)},lt=()=>{ce({status:"all",createdAfter:"",createdBefore:"",lastActiveAfter:"",lastActiveBefore:""})},Zt=()=>{const c=[...i,...s],p=new Set(c.map(A=>A.status));return["all",...Array.from(p)].filter(A=>A!=="all")},Jt=c=>{if(!oe.trim())return c;const p=oe.toLowerCase().trim();return c.filter(A=>A.name.toLowerCase().includes(p)||A.email.toLowerCase().includes(p)||A.role.toLowerCase().includes(p)||A.status.toLowerCase().includes(p))},er=c=>u?c.filter(p=>{if(Y.status!=="all"&&p.status!==Y.status)return!1;if(Y.createdAfter){const A=new Date(p.createdAt),ee=new Date(Y.createdAfter);if(A<ee)return!1}if(Y.createdBefore){const A=new Date(p.createdAt),ee=new Date(Y.createdBefore);if(A>ee)return!1}if(Y.lastActiveAfter&&p.lastActive){const A=new Date(p.lastActive),ee=new Date(Y.lastActiveAfter);if(A<ee)return!1}if(Y.lastActiveBefore&&p.lastActive){const A=new Date(p.lastActive),ee=new Date(Y.lastActiveBefore);if(A>ee)return!1}return!0}):c,ct=c=>{const p=h===0&&we!=="all"?c.filter(ee=>ee.role===we):c,A=Jt(p);return er(A)},tr=ct(i),rr=ct(s),He=h===0?tr:rr,ut=He.slice(N*z,N*z+z),dt=oe.trim()||u?`${He.length} ${He.length===1?"match":"matches"}`:null,ar=c=>{let p=0;for(let ee=0;ee<c.length;ee++)p=c.charCodeAt(ee)+((p<<5)-p);let A="#";for(let ee=0;ee<3;ee++){const sr=p>>ee*8&255;A+=`00${sr.toString(16)}`.slice(-2)}return A},nr=c=>{if(!c)return"?";const p=c.split(" ");return p.length>1?`${p[0][0]}${p[1][0]}`:c.substring(0,2).toUpperCase()};return o.jsxs(B,{sx:{mt:2},children:[o.jsxs(B,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,flexWrap:"wrap"},children:[o.jsxs(B,{sx:{display:"flex",alignItems:"center",gap:2,flexWrap:"wrap"},children:[o.jsx(fe,{variant:"h6",sx:{mr:2},children:"Users Management"}),h===0&&o.jsxs(Ht,{direction:"row",spacing:1,children:[o.jsx(ve,{variant:we==="all"?"contained":"outlined",size:"small",onClick:()=>Ce("all"),children:"All Users"}),o.jsxs(ve,{variant:we==="admin"?"contained":"outlined",size:"small",onClick:()=>Ce("admin"),color:"primary",children:[o.jsx(bt,{sx:{mr:.5,fontSize:18}}),"Admins"]}),o.jsxs(ve,{variant:we==="user"?"contained":"outlined",size:"small",onClick:()=>Ce("user"),color:"info",children:[o.jsx(et,{sx:{mr:.5,fontSize:18}}),"Regular Users"]})]})]}),o.jsx(ve,{variant:"text",color:"primary",size:"small",onClick:Kt,endIcon:u?o.jsx(Ve,{}):o.jsx(sa,{}),children:u?"Hide Advanced Filters":"Advanced Filters"})]}),o.jsx(wr,{in:u,children:o.jsxs(Xe,{sx:{p:2,mb:2},elevation:1,children:[o.jsxs(be,{container:!0,spacing:2,alignItems:"center",children:[o.jsx(be,{item:!0,xs:12,sm:6,md:3,children:o.jsxs(Rt,{fullWidth:!0,size:"small",children:[o.jsx(Ft,{children:"Status"}),o.jsxs(Et,{value:Y.status,onChange:c=>Ue("status",c.target.value),label:"Status",children:[o.jsx(Ie,{value:"all",children:"All Statuses"}),Zt().map(c=>o.jsx(Ie,{value:c,children:c.charAt(0).toUpperCase()+c.slice(1)},c))]})]})}),o.jsx(be,{item:!0,xs:12,sm:6,md:3,children:o.jsx(xe,{label:"Created After",type:"date",size:"small",fullWidth:!0,InputLabelProps:{shrink:!0},value:Y.createdAfter,onChange:c=>Ue("createdAfter",c.target.value)})}),o.jsx(be,{item:!0,xs:12,sm:6,md:3,children:o.jsx(xe,{label:"Created Before",type:"date",size:"small",fullWidth:!0,InputLabelProps:{shrink:!0},value:Y.createdBefore,onChange:c=>Ue("createdBefore",c.target.value)})}),h===0&&o.jsxs(o.Fragment,{children:[o.jsx(be,{item:!0,xs:12,sm:6,md:3,children:o.jsx(xe,{label:"Last Active After",type:"date",size:"small",fullWidth:!0,InputLabelProps:{shrink:!0},value:Y.lastActiveAfter,onChange:c=>Ue("lastActiveAfter",c.target.value)})}),o.jsx(be,{item:!0,xs:12,sm:6,md:3,children:o.jsx(xe,{label:"Last Active Before",type:"date",size:"small",fullWidth:!0,InputLabelProps:{shrink:!0},value:Y.lastActiveBefore,onChange:c=>Ue("lastActiveBefore",c.target.value)})})]}),o.jsx(be,{item:!0,container:!0,justifyContent:"flex-end",xs:12,sm:h===0?6:12,md:h===0?3:6,children:o.jsx(ve,{variant:"outlined",color:"secondary",size:"small",onClick:lt,startIcon:o.jsx(Ve,{}),children:"Clear Filters"})})]}),o.jsx(B,{sx:{mt:2,display:"flex",flexWrap:"wrap",gap:1},children:Object.entries(Y).map(([c,p])=>{if(!p||p==="all")return null;let A="";switch(c){case"status":A=`Status: ${p}`;break;case"createdAfter":A=`Created after: ${new Date(p).toLocaleDateString()}`;break;case"createdBefore":A=`Created before: ${new Date(p).toLocaleDateString()}`;break;case"lastActiveAfter":A=`Last active after: ${new Date(p).toLocaleDateString()}`;break;case"lastActiveBefore":A=`Last active before: ${new Date(p).toLocaleDateString()}`;break;default:return null}return o.jsx(Re,{label:A,onDelete:()=>Ue(c,c==="status"?"all":""),size:"small",color:"primary",variant:"outlined"},c)})})]})}),o.jsxs(B,{sx:{borderBottom:1,borderColor:"divider",mb:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsxs(Yt,{value:h,onChange:E,sx:{flexGrow:1},TabIndicatorProps:{style:{height:"3px",backgroundColor:h===0?"#1b5e20":"#d32f2f"}},children:[o.jsx($e,{label:"Active Users",icon:o.jsx(ta,{}),iconPosition:"start",sx:{fontWeight:h===0?"bold":"normal",color:h===0?"#1b5e20":"inherit"}}),o.jsx($e,{label:"Deactivated Users",icon:o.jsx(Wt,{}),iconPosition:"start",sx:{fontWeight:h===1?"bold":"normal",color:h===1?"#d32f2f":"inherit"}})]}),o.jsxs(B,{sx:{display:"flex",alignItems:"center",minWidth:"300px",maxWidth:"400px",ml:2},children:[o.jsx(xe,{placeholder:`Search ${h===0?"active":"deactivated"} users...`,variant:"outlined",size:"small",fullWidth:!0,value:oe,onChange:Pe,InputProps:{startAdornment:o.jsx(Dt,{position:"start",children:o.jsx(ua,{color:"action"})}),endAdornment:o.jsx(xr,{in:ae,children:o.jsx(Dt,{position:"end",children:o.jsx(Le,{size:"small",onClick:Me,"aria-label":"Clear search",children:o.jsx(Ve,{fontSize:"small"})})})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:"20px"}}}),dt&&o.jsx(Re,{label:dt,size:"small",color:"primary",sx:{ml:1}})]})]}),o.jsx(Br,{component:Xe,elevation:0,sx:{border:"1px solid #e0e0e0"},children:o.jsxs(Qr,{children:[o.jsx(Gr,{sx:{backgroundColor:h===0?"#f5f5f5":"#ffebee"},children:o.jsxs(qe,{children:[o.jsx(ne,{width:"60px",children:"Profile"}),o.jsx(ne,{children:"Name"}),o.jsx(ne,{children:"Email"}),o.jsx(ne,{children:"Role"}),o.jsx(ne,{children:"Status"}),h===1&&o.jsx(ne,{children:"Deactivated At"}),o.jsx(ne,{children:h===0?"Last Active":"Created At"}),o.jsx(ne,{align:"right",children:"Actions"})]})}),o.jsx(Xr,{children:ut.length>0?ut.map(c=>o.jsxs(qe,{sx:{"&:last-child td, &:last-child th":{border:0},bgcolor:h===0&&c.role==="admin"?"rgba(27, 94, 32, 0.04)":h===1?"rgba(211, 47, 47, 0.04)":"transparent"},children:[o.jsx(ne,{children:c.profileImage?o.jsx(Ke,{src:c.profileImage,alt:c.name,sx:{width:40,height:40}}):o.jsx(Ke,{sx:{width:40,height:40,bgcolor:ar(c.name)},children:nr(c.name)})}),o.jsx(ne,{children:c.name}),o.jsx(ne,{children:c.email}),o.jsx(ne,{children:o.jsx(Re,{label:c.role,color:c.role==="admin"?"primary":"default",size:"small",sx:{bgcolor:c.role==="admin"?"#1b5e20":"transparent",color:c.role==="admin"?"white":"inherit",fontWeight:500}})}),o.jsx(ne,{children:o.jsx(Re,{label:c.status,color:c.status==="active"?"success":c.status==="deleted"||c.status==="deactivated"?"error":"warning",size:"small",sx:{bgcolor:c.status==="active"?"#4caf50":c.status==="deleted"||c.status==="deactivated"?"#d32f2f":"#ff9800",color:"white",fontWeight:500}})}),h===1&&o.jsx(ne,{children:le(c.deactivatedAt||c.deletedAt)}),o.jsx(ne,{children:le(h===0?c.lastActive:c.createdAt)}),o.jsx(ne,{align:"right",children:h===0?o.jsxs(B,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center"},children:[o.jsx(Ye,{title:"Send Password Reset Link",children:o.jsx(Le,{size:"small",onClick:()=>ye(c.email,c.name),color:"primary",sx:{mx:.5},disabled:U.resetPassword,children:o.jsx(ia,{fontSize:"small"})})}),o.jsx(Ye,{title:"Deactivate User",children:o.jsx(Le,{size:"small",onClick:()=>pe(c.id,c.name),color:"error",sx:{mx:.5},disabled:U.deactivate,children:o.jsx(aa,{fontSize:"small"})})}),o.jsx(Ye,{title:"More actions",children:o.jsx(Le,{size:"small",onClick:p=>Ae(p,c),sx:{mx:.5},children:o.jsx(la,{fontSize:"small"})})})]}):o.jsx(B,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center"},children:o.jsx(Ye,{title:"Send Reactivation Link",children:o.jsx(Le,{size:"small",onClick:()=>De(c.email,c.name),color:"warning",disabled:U.recover,children:o.jsx(oa,{fontSize:"small"})})})})})]},c.id)):o.jsx(qe,{children:o.jsxs(ne,{colSpan:h===0?7:8,align:"center",sx:{py:3},children:[o.jsx(fe,{variant:"body1",color:"textSecondary",children:oe.trim()||Object.values(Y).some(c=>c!=="all"&&c!=="")?`No ${h===0?"active":"deactivated"} users found matching your filters`:h===0?"No active users found":"No deactivated users found"}),(oe.trim()||Object.values(Y).some(c=>c!=="all"&&c!==""))&&o.jsx(ve,{variant:"text",color:"primary",onClick:()=>{Me(),lt()},sx:{mt:1},children:"Clear All Filters"})]})})})]})}),o.jsx(Vr,{rowsPerPageOptions:[5,10,25,50],component:"div",count:He.length,rowsPerPage:z,page:N,onPageChange:ue,onRowsPerPageChange:Te,labelDisplayedRows:({from:c,to:p,count:A})=>`${c}-${p} of ${A}`,labelRowsPerPage:"Rows per page:"}),o.jsxs(Dr,{anchorEl:l,open:!!l,onClose:I,children:[f&&f.role!=="admin"&&o.jsxs(Ie,{onClick:()=>q("admin"),children:[o.jsx(bt,{fontSize:"small",sx:{mr:1}}),"Make Admin"]}),f&&f.role==="admin"&&o.jsxs(Ie,{onClick:()=>q("user"),children:[o.jsx(et,{fontSize:"small",sx:{mr:1}}),"Remove Admin Privileges"]})]}),o.jsxs(ft,{open:j,onClose:W,children:[o.jsx(ht,{children:Q.newRole==="admin"?"Grant Admin Privileges":"Remove Admin Privileges"}),o.jsxs(vt,{children:[o.jsx(Be,{sx:{mb:2},children:Q.newRole==="admin"?`You are about to grant admin privileges to ${Q.userName}. This will give them full access to manage users and system settings.`:`You are about to remove admin privileges from ${Q.userName}.`}),o.jsxs(Be,{sx:{mb:2,fontWeight:"bold"},children:["To confirm, please type: ",o.jsx("span",{style:{color:"#1b5e20"},children:Q.confirmationPhrase})]}),o.jsx(xe,{autoFocus:!0,fullWidth:!0,value:C,onChange:c=>V(c.target.value),error:C!==""&&C!==Q.confirmationPhrase,helperText:C!==""&&C!==Q.confirmationPhrase?"Text doesn't match":null})]}),o.jsxs(mt,{children:[o.jsx(ve,{onClick:W,disabled:U.roleChange,children:"Cancel"}),o.jsx(ve,{onClick:J,color:"primary",variant:"contained",disabled:C!==Q.confirmationPhrase||U.roleChange,startIcon:U.roleChange?o.jsx(Ze,{size:16,color:"inherit"}):null,children:U.roleChange?"Processing...":"Confirm"})]})]}),o.jsxs(ft,{open:x.open,onClose:()=>D({...x,open:!1}),children:[o.jsx(ht,{children:x.title}),o.jsx(vt,{children:o.jsx(Be,{children:x.message})}),o.jsxs(mt,{children:[o.jsx(ve,{onClick:()=>D({...x,open:!1}),disabled:U.deactivate||U.recover||U.resetPassword,children:"Cancel"}),o.jsx(ve,{variant:"contained",color:x.confirmText==="Deactivate"?"error":x.confirmText==="Send Recovery Link"?"warning":"primary",onClick:X,disabled:U.deactivate||U.recover||U.resetPassword,startIcon:x.confirmText==="Deactivate"&&U.deactivate||x.confirmText==="Send Recovery Link"&&U.recover||x.confirmText==="Send Reset Link"&&U.resetPassword?o.jsx(Ze,{size:16,color:"inherit"}):null,children:x.confirmText==="Deactivate"&&U.deactivate||x.confirmText==="Send Recovery Link"&&U.recover||x.confirmText==="Send Reset Link"&&U.resetPassword?"Processing...":x.confirmText})]})]})]})};Xt.propTypes={users:T.arrayOf(T.shape({id:T.string.isRequired,name:T.string.isRequired,email:T.string.isRequired,role:T.string.isRequired,status:T.string.isRequired,lastActive:T.oneOfType([T.string,T.instanceOf(Date)]),profileImage:T.string})).isRequired,deletedUsers:T.arrayOf(T.shape({id:T.string.isRequired,name:T.string.isRequired,email:T.string.isRequired,role:T.string.isRequired,status:T.string.isRequired,deletedAt:T.oneOfType([T.string,T.instanceOf(Date)]),deactivatedAt:T.oneOfType([T.string,T.instanceOf(Date)]),createdAt:T.oneOfType([T.string,T.instanceOf(Date)]),profileImage:T.string})),handleEdit:T.func,handleDeactivateUser:T.func.isRequired,handleSendRecovery:T.func.isRequired,handleSendPasswordReset:T.func.isRequired,updateUserRole:T.func.isRequired};const Mt={usersList:[{id:"user1",name:"John Smith",email:"john.smith@example.com",role:"admin",status:"active",lastActive:new Date().toISOString(),isDeactivated:!1,createdAt:new Date(new Date().setDate(new Date().getDate()-120)).toISOString()},{id:"user2",name:"Jane Doe",email:"jane.doe@example.com",role:"user",status:"active",lastActive:new Date().toISOString(),isDeactivated:!1,createdAt:new Date(new Date().setDate(new Date().getDate()-60)).toISOString()},{id:"user3",name:"Robert Johnson",email:"robert.johnson@example.com",role:"user",status:"unverified",lastActive:null,isDeactivated:!1,createdAt:new Date(new Date().setDate(new Date().getDate()-10)).toISOString()},{id:"user4",name:"Emily Brown",email:"emily.brown@example.com",role:"user",status:"active",lastActive:new Date(new Date().setDate(new Date().getDate()-5)).toISOString(),isDeactivated:!1,createdAt:new Date(new Date().setDate(new Date().getDate()-45)).toISOString()},{id:"user5",name:"Michael Wilson",email:"michael.wilson@example.com",role:"admin",status:"inactive",lastActive:new Date(new Date().setDate(new Date().getDate()-32)).toISOString(),isDeactivated:!1,createdAt:new Date(new Date().setDate(new Date().getDate()-150)).toISOString()}],deletedUsers:[{id:"user6",name:"Sarah Miller",email:"sarah.miller@example.com",role:"user",status:"deactivated",lastActive:new Date(new Date().setDate(new Date().getDate()-90)).toISOString(),isDeactivated:!0,createdAt:new Date(new Date().setDate(new Date().getDate()-180)).toISOString(),deactivatedAt:new Date(new Date().setDate(new Date().getDate()-15)).toISOString()},{id:"user7",name:"David Taylor",email:"david.taylor@example.com",role:"user",status:"deactivated",lastActive:new Date(new Date().setDate(new Date().getDate()-120)).toISOString(),isDeactivated:!0,createdAt:new Date(new Date().setDate(new Date().getDate()-200)).toISOString(),deactivatedAt:new Date(new Date().setDate(new Date().getDate()-30)).toISOString()}],statistics:{totalUsers:"5",activeUsers:"3",newUsers:"1",verifiedUsers:"4",deletedUsers:"2"},activityData:[{date:"Mar 13",totalVisits:7,activeUsers:4,newUsers:2},{date:"Mar 14",totalVisits:5,activeUsers:3,newUsers:1},{date:"Mar 15",totalVisits:6,activeUsers:4,newUsers:0},{date:"Mar 16",totalVisits:6,activeUsers:3,newUsers:2},{date:"Mar 17",totalVisits:8,activeUsers:4,newUsers:1},{date:"Mar 18",totalVisits:10,activeUsers:4,newUsers:3},{date:"Mar 19",totalVisits:4,activeUsers:3,newUsers:0}]},Kn=()=>{const[i,s]=R.useState({usersList:[],deletedUsers:[],statistics:{totalUsers:"0",activeUsers:"0",newUsers:"0",verifiedUsers:"0",deletedUsers:"0",inactiveUsers:"0"},activityData:[]}),[a,t]=R.useState(!0),[e,n]=R.useState(null),[r,l]=R.useState(null),[d,f]=R.useState(0),k="http://localhost:5000/api",j=R.useCallback(()=>{console.log("Refreshing user management data..."),f(x=>x+1)},[]);return R.useEffect(()=>{(async()=>{var D,U,g;try{console.log("=== STARTING USER DATA FETCH ==="),t(!0),n(null);let h=[],P=[],N={},G=[];console.log("Fetching active users...");const z=await Oe.getAllUsers();if(console.log("Active users response:",z),!z||!z.success)throw console.error("Failed to fetch active users:",(z==null?void 0:z.message)||"Unknown error"),new Error(`Active users fetch failed: ${(z==null?void 0:z.message)||"Unknown error"}`);h=(z==null?void 0:z.users)||[],console.log(`Successfully fetched ${h.length} active users`),console.log("Fetching deactivated users with direct query...");try{const ae=await Oe.getDeactivatedUsers();if(console.log("Deactivated users direct query response:",ae),ae.success&&ae.users&&ae.users.length>0)P=ae.users,console.log(`Successfully fetched ${P.length} deactivated users with direct query`);else{console.log("Direct query returned no results, trying to filter from all users...");const I=await br.get(`${k}/auth/users`,{params:{all:!0,includeDeleted:!0,includeDeactivated:!0,_t:Date.now()},headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});console.log("All users response status:",I.status);let q=[];if((U=(D=I.data)==null?void 0:D.data)!=null&&U.users&&Array.isArray(I.data.data.users))q=I.data.data.users;else if((g=I.data)!=null&&g.users&&Array.isArray(I.data.users))q=I.data.users;else if(Array.isArray(I.data))q=I.data;else throw console.warn("Unexpected data structure in all users response:",Object.keys(I.data||{})),new Error("Could not extract users from API response");if(console.log(`Found ${q.length} total users from API`),q.length>0){console.log("Sample of first 3 users:",q.slice(0,3).map(J=>({id:J._id||J.id,email:J.email,isDeactivated:J.isDeactivated,isAutoDeactivated:J.isAutoDeactivated,status:J.status})));const W=new Set;q.forEach(J=>{Object.keys(J).forEach(pe=>W.add(pe))}),console.log("All possible user properties:",[...W].sort())}P=q.filter(W=>{const J=W.isDeactivated===!0,pe=W.isAutoDeactivated===!0,De=W.status==="deleted"||W.status==="deactivated",ye=W.status==="inactive",X=W.deactivatedAt||W.deletedAt,E=J||pe||De||ye||X;return E&&console.log(`Found deactivated user: ${W.email}`,{isDeactivated:J,isAutoDeactivated:pe,hasDeletedStatus:De,isInactive:ye,hasDeactivationDate:X}),E}),console.log(`Identified ${P.length} deactivated/inactive users after filtering`)}const $=h.filter(I=>I.lastLogin).length,u=h.length-$,H=h.filter(I=>{const q=new Date(I.createdAt),W=new Date,J=new Date;return J.setDate(W.getDate()-30),q>=J}).length,Y=h.filter(I=>I.isVerified).length;N={totalUsers:(h.length+P.length).toLocaleString(),activeUsers:$.toLocaleString(),inactiveUsers:(u+P.length).toLocaleString(),newUsers:H.toLocaleString(),verifiedUsers:Y.toLocaleString(),deletedUsers:P.length.toLocaleString()},console.log("Generating activity data...");const ce={},le=new Date;for(let I=6;I>=0;I--){const q=new Date(le);q.setDate(q.getDate()-I);const W=q.toLocaleDateString("en-US",{month:"short",day:"numeric"});ce[W]={date:W,totalVisits:0,activeUsers:0,newUsers:0}}[...h,...P].forEach(I=>{if(I.lastLogin){const W=new Date(I.lastLogin).toLocaleDateString("en-US",{month:"short",day:"numeric"});ce[W]&&(ce[W].totalVisits++,ce[W].activeUsers++)}if(I.createdAt){const W=new Date(I.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric"});ce[W]&&ce[W].newUsers++}}),G=Object.values(ce),console.log("Activity data generated:",G.length,"days")}catch(ae){console.error("Error fetching deactivated users:",ae),console.warn("Continuing with only active users"),P=[];const $=h.filter(H=>H.lastLogin).length,u=h.length-$;N={totalUsers:h.length.toLocaleString(),activeUsers:$.toLocaleString(),inactiveUsers:u.toLocaleString(),newUsers:"0",verifiedUsers:"0",deletedUsers:"0"},G=Mt.activityData}console.log("Formatting user data for UI...");const he=(ae,$=!1)=>Array.isArray(ae)?ae.map(u=>{const H=(u==null?void 0:u.firstName)||"",Y=(u==null?void 0:u.lastName)||"",ce=(u==null?void 0:u.name)||`${H} ${Y}`.trim()||"Unnamed User";let le="unknown";return $||(u==null?void 0:u.isDeactivated)===!0||(u==null?void 0:u.isAutoDeactivated)===!0?le="deactivated":(u==null?void 0:u.status)==="inactive"?le="inactive":u!=null&&u.status?le=u.status:(u==null?void 0:u.isVerified)===!1?le="unverified":u!=null&&u.lastLogin?le="active":le="inactive",{id:(u==null?void 0:u._id)||(u==null?void 0:u.id)||"unknown-id",name:ce,email:(u==null?void 0:u.email)||"no-email",role:(u==null?void 0:u.role)||"user",status:le,lastActive:(u==null?void 0:u.lastActive)||(u==null?void 0:u.lastLogin)||(u==null?void 0:u.updatedAt)||new Date,isDeactivated:$||(u==null?void 0:u.isDeactivated)===!0||(u==null?void 0:u.isAutoDeactivated)===!0||(u==null?void 0:u.status)==="inactive",createdAt:(u==null?void 0:u.createdAt)||new Date,deactivatedAt:(u==null?void 0:u.deactivatedAt)||(u==null?void 0:u.deletedAt)||(u==null?void 0:u.autoDeactivatedAt)||null}}):(console.error("Expected users to be an array but got:",typeof ae),[]),oe=he(h),de=he(P,!0);console.log(`Formatted ${oe.length} active users and ${de.length} deleted users`),console.log("Updating state with fetched data..."),s({usersList:oe,deletedUsers:de,statistics:N,activityData:G}),console.log("=== USER DATA FETCH COMPLETED SUCCESSFULLY ===")}catch(h){console.error("Critical error in fetchUsers:",h),n(h.message||"An error occurred while fetching user data"),console.warn("Falling back to mock data due to critical error"),s(Mt)}finally{t(!1)}})()},[d]),{data:i,setData:s,loading:a,error:e,selectedUser:r,setSelectedUser:l,handleDeactivateUser:async x=>{try{const D=await Oe.deactivateUser(x);if(D.success){const U=i.usersList.find(g=>g.id===x);if(U){const g={...U,status:"deactivated",isDeactivated:!0,deactivatedAt:new Date().toISOString()};s(h=>{var P;return{...h,usersList:h.usersList.filter(N=>N.id!==x),deletedUsers:[...h.deletedUsers,g],statistics:{...h.statistics,activeUsers:(parseInt(h.statistics.activeUsers.replace(/,/g,""),10)-1).toLocaleString(),deletedUsers:(parseInt(h.statistics.deletedUsers.replace(/,/g,""),10)+1).toLocaleString(),inactiveUsers:(parseInt(((P=h.statistics.inactiveUsers)==null?void 0:P.replace(/,/g,""))||"0",10)+1).toLocaleString()}}})}return{success:!0,message:"User successfully deactivated"}}else throw new Error(D.message||"Failed to deactivate user")}catch(D){return console.error("Failed to deactivate user:",D),{success:!1,error:{message:D.message||"Failed to deactivate user"}}}},handleRestoreUser:async x=>{try{const D=await Oe.restoreUser(x);if(D.success){const U=i.deletedUsers.find(g=>g.id===x);if(U){const g={...U,status:"active",isDeactivated:!1,lastActive:new Date().toISOString()};s(h=>{var P;return{...h,deletedUsers:h.deletedUsers.filter(N=>N.id!==x),usersList:[...h.usersList,g],statistics:{...h.statistics,totalUsers:(parseInt(h.statistics.totalUsers.replace(/,/g,""),10)+1).toLocaleString(),deletedUsers:(parseInt(h.statistics.deletedUsers.replace(/,/g,""),10)-1).toLocaleString(),inactiveUsers:(parseInt(((P=h.statistics.inactiveUsers)==null?void 0:P.replace(/,/g,""))||"0",10)-1).toLocaleString()}}})}return{success:!0,message:"User successfully restored"}}else throw new Error(D.message||"Failed to restore user")}catch(D){return console.error("Failed to restore user:",D),{success:!1,error:{message:D.message||"Failed to restore user"}}}},handleSendRecoveryLink:async x=>{try{const D=await gt.requestAccountRecovery(x);if(D.success)return{success:!0,message:"Recovery link sent successfully"};throw new Error(D.message||"Failed to send recovery link")}catch(D){return console.error("Failed to send recovery link:",D),{success:!1,error:{message:D.message||"Failed to send recovery link"}}}},handleSendPasswordResetLink:async x=>{try{const D=await gt.forgotPassword(x);if(D.success)return{success:!0,message:"Password reset link sent successfully"};throw new Error(D.message||"Failed to send password reset link")}catch(D){return console.error("Failed to send password reset link:",D),{success:!1,error:{message:D.message||"Failed to send password reset link"}}}},updateUserRole:async(x,D)=>{try{const U=await Oe.updateUserRole(x,D);if(U.success)return s(g=>({...g,usersList:g.usersList.map(h=>h.id===x?{...h,role:D,lastActive:new Date().toISOString()}:h)})),{success:!0,message:U.message};throw new Error(U.message||"Failed to update role")}catch(U){return console.error("Error updating user role:",U),{success:!1,error:{message:U.message||"Failed to update user role"}}}},refreshData:j}};function ps(){var P,N,G,z,he,oe,de,ae;const[i,s]=R.useState(0),a=Tr(),{data:t,loading:e,setSelectedUser:n,handleSendRecoveryLink:r,handleSendPasswordResetLink:l,updateUserRole:d,handleDeactivateUser:f,refreshData:k}=Kn(),[j,w]=R.useState({open:!1,message:"",severity:"success"});R.useEffect(()=>{a&&typeof a.setLoading=="function"&&a.setLoading(e)},[e,a]),R.useEffect(()=>{var $,u;console.log("UserControl data:",t),console.log("UsersList available:",(($=t==null?void 0:t.usersList)==null?void 0:$.length)||0),console.log("DeletedUsers available:",((u=t==null?void 0:t.deletedUsers)==null?void 0:u.length)||0),t!=null&&t.statistics&&console.log("Inactive users count:",t.statistics.inactiveUsers)},[t]);const C=($,u)=>{s(u)},V=$=>{console.log("Edit user:",$),n($)},Q=async $=>{var u;a&&typeof a.setLoading=="function"&&a.setLoading(!0);try{const H=await f($);H.success?(w({open:!0,message:"User has been successfully deactivated",severity:"success"}),k()):w({open:!0,message:((u=H.error)==null?void 0:u.message)||"Failed to deactivate user",severity:"error"})}catch(H){console.error("Error in deactivating user:",H),w({open:!0,message:"An error occurred while deactivating the user",severity:"error"})}finally{a&&typeof a.setLoading=="function"&&a.setLoading(!1)}},ie=async $=>{var u;a&&typeof a.setLoading=="function"&&a.setLoading(!0);try{const H=await r($);H.success?(w({open:!0,message:"Reactivation link has been sent to the user",severity:"success"}),k()):w({open:!0,message:((u=H.error)==null?void 0:u.message)||"Failed to send reactivation link",severity:"error"})}catch(H){console.error("Error in sending recovery link:",H),w({open:!0,message:"An error occurred while sending reactivation link",severity:"error"})}finally{a&&typeof a.setLoading=="function"&&a.setLoading(!1)}},x=async $=>{var u;a&&typeof a.setLoading=="function"&&a.setLoading(!0);try{const H=await l($);H.success?w({open:!0,message:"Password reset link has been sent to the user",severity:"success"}):w({open:!0,message:((u=H.error)==null?void 0:u.message)||"Failed to send password reset link",severity:"error"})}catch(H){console.error("Error in sending password reset:",H),w({open:!0,message:"An error occurred while sending password reset link",severity:"error"})}finally{a&&typeof a.setLoading=="function"&&a.setLoading(!1)}},D=async($,u)=>{var H;a&&typeof a.setLoading=="function"&&a.setLoading(!0);try{const Y=await d($,u);Y.success?w({open:!0,message:`User role has been updated to ${u}`,severity:"success"}):w({open:!0,message:((H=Y.error)==null?void 0:H.message)||"Failed to update user role",severity:"error"})}catch(Y){console.error("Error in updating user role:",Y),w({open:!0,message:"An error occurred while updating user role",severity:"error"})}finally{a&&typeof a.setLoading=="function"&&a.setLoading(!1)}},U=()=>{w({...j,open:!1})},g=!t||!t.usersList||t.usersList.length===0;if(e&&g)return a&&typeof a.Loader=="function"?o.jsx(Cr,{fullPage:!0,message:"Loading user data..."}):o.jsx(B,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"300px"},children:o.jsx(Ze,{})});const h={...t,usersList:(t==null?void 0:t.usersList)||[],deletedUsers:(t==null?void 0:t.deletedUsers)||[],statistics:{...(t==null?void 0:t.statistics)||{},totalUsers:((P=t==null?void 0:t.statistics)==null?void 0:P.totalUsers)||"0",activeUsers:((N=t==null?void 0:t.statistics)==null?void 0:N.activeUsers)||"0",newUsers:((G=t==null?void 0:t.statistics)==null?void 0:G.newUsers)||"0",verifiedUsers:((z=t==null?void 0:t.statistics)==null?void 0:z.verifiedUsers)||"0",deletedUsers:((he=t==null?void 0:t.statistics)==null?void 0:he.deletedUsers)||"0",inactiveUsers:((oe=t==null?void 0:t.statistics)==null?void 0:oe.inactiveUsers)||(parseInt(((de=t==null?void 0:t.statistics)==null?void 0:de.totalUsers)||0)-parseInt(((ae=t==null?void 0:t.statistics)==null?void 0:ae.activeUsers)||0)).toString()},activityData:(t==null?void 0:t.activityData)||[]};return o.jsxs(B,{sx:{p:2,maxWidth:"100%",top:100},children:[o.jsx(fe,{variant:"h5",component:"h1",fontWeight:"medium",sx:{mb:2},children:"User Management"}),g&&o.jsx(pt,{severity:"warning",sx:{mb:2},children:"No user data available. This could be a data fetching issue or empty database."}),o.jsx(B,{sx:{borderBottom:1,borderColor:"divider"},children:o.jsxs(Yt,{value:i,onChange:C,TabIndicatorProps:{style:{height:"3px",backgroundColor:"#1b5e20"}},children:[o.jsx($e,{label:"DASHBOARD",sx:{fontWeight:i===0?"bold":"normal",color:i===0?"#1b5e20":"inherit"}}),o.jsx($e,{label:"USERS LIST",sx:{fontWeight:i===1?"bold":"normal",color:i===1?"#1b5e20":"inherit"}})]})}),i===0&&o.jsx(Gt,{data:h}),i===1&&o.jsx(Xt,{users:h.usersList,deletedUsers:h.deletedUsers,handleEdit:V,handleDeactivateUser:Q,handleSendRecovery:ie,handleSendPasswordReset:x,updateUserRole:D}),o.jsx(Ur,{open:j.open,autoHideDuration:6e3,onClose:U,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:o.jsx(pt,{onClose:U,severity:j.severity,variant:"filled",sx:{width:"100%"},children:j.message})}),a&&a.LoadingOverlay&&o.jsx(a.LoadingOverlay,{})]})}export{ps as default};
