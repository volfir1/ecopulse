import{r as t}from"./index-CeiZKB8G.js";const K=({data:b=[],columns:f=[],onExport:C,onRefresh:p,onSelectionChange:k,onRowClick:m,defaultSortColumn:g="",defaultSortDirection:j="asc"})=>{const[r,c]=t.useState(b),[v,h]=t.useState(!1),[n,R]=t.useState([]),[L,G]=t.useState(g),[F,H]=t.useState(j),[w,y]=t.useState({}),V=t.useCallback(async()=>{if(p){h(!0);try{const e=await p();e&&c(e)}catch(e){console.error("Error refreshing data:",e)}finally{h(!1)}}},[p]),O=t.useCallback(()=>{if(C)C(r,n);else{const e=n.length>0?r.filter(u=>n.includes(u.id)):r,a=f.map(u=>u.label).join(","),s=e.map(u=>f.map(z=>{let d=u[z.id];return typeof d=="string"&&d.includes(",")?`"${d}"`:d}).join(",")),l=[a,...s].join(`
`),i=new Blob([l],{type:"text/csv;charset=utf-8;"}),D=URL.createObjectURL(i),o=document.createElement("a");o.href=D,o.setAttribute("download","table-data.csv"),document.body.appendChild(o),o.click(),document.body.removeChild(o)}},[r,n,f,C]),x=t.useCallback(e=>{R(e),k&&k(e)},[k]),E=t.useCallback(e=>{if(m){const a=r.find(s=>s.id===e);m(a,e)}},[r,m]);t.useMemo(()=>{c(b)},[b]);const S=t.useCallback((e,a)=>Object.keys(a).length===0?e:e.filter(s=>Object.entries(a).every(([l,i])=>i?String(s[l]).toLowerCase().includes(String(i).toLowerCase()):!0)),[]),M=t.useMemo(()=>S(r,w),[r,w,S]),T=t.useCallback((e,a)=>{y(s=>({...s,[e]:a}))},[]),U=t.useCallback(()=>{y({})},[]),A=t.useCallback(e=>{c(e)},[]),B=t.useCallback(e=>{c(a=>[...a,e])},[]),$=t.useCallback((e,a)=>{c(s=>s.map(l=>l.id===e?{...l,...a}:l))},[]),q=t.useCallback(e=>{c(a=>a.filter(s=>s.id!==e))},[]);return{data:M,loading:v,selectedRows:n,sortColumn:L,sortDirection:F,filterValues:w,updateFilter:T,clearFilters:U,setLoading:h,updateData:A,addRow:B,updateRow:$,deleteRow:q,handleRefresh:V,handleExport:O,handleSelectionChange:x,handleRowClick:E}};export{K as u};
