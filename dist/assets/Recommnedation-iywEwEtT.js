import{e as C,r as l,X as E,j as e,Y as i,P as c,Z as B,T as o,O as D,$ as S}from"./index-BN0NLy4X.js";import{a as R}from"./api-DsXL_j3W.js";import{S as Y}from"./SingleYearPicker-vaKepwjh.js";import{C as F}from"./Chip-BQdj-Ugh.js";import"./axios-CmsuhreG.js";import"./AdapterDayjs-BpcbILur.js";import"./index-B8U9fKH1.js";import"./useThemeProps-CQcjcwiv.js";import"./index-CHCKNM3c.js";import"./Select-BvIDhjGm.js";import"./TextField-Bsv3TW2t.js";import"./refresh-ccw-DgaJWPi_.js";const m={cityData:{budget:"₱300000",year:"2025",location:{coordinates:"14.5176° N, 121.0509° E",solarPotential:"High",windPotential:"Moderate",hydroPotential:"Available (Nearby Rivers)"}},projections:[],costBenefits:[]},z=()=>{const n=C(),[g,d]=l.useState(!0),[u,b]=l.useState(E(m.cityData.year)),[v,j]=l.useState(m.cityData),[p,r]=l.useState(m.projections),[f,x]=l.useState(m.costBenefits),[y,h]=l.useState(m.energyPotential);return l.useEffect(()=>{(async()=>{d(!0);try{await new Promise(t=>setTimeout(t,800)),d(!1)}catch(t){console.error("Error fetching data:",t),n.error("Failed to fetch recommendations data"),d(!1)}})()},[u]),{cityData:v,projections:p,costBenefits:f,energyPotential:y,handleDownloadPDF:()=>{try{n.info("Preparing PDF download..."),n.success("PDF downloaded successfully!")}catch(s){console.error("Error downloading PDF:",s),n.error("Failed to download PDF")}},year:u,handleYearChange:s=>{!s||!s.isValid()||(b(s),j(t=>({...t,year:s.year().toString()})))},handleBudgetChange:s=>{const t=s.target.value;(t===""||/^\d+$/.test(t))&&j(N=>({...N,budget:t?`₱${t}`:""}))},isLoading:g}},X=()=>{const{cityData:n,projections:g,costBenefits:d,energyPotential:u,handleDownloadPDF:b,year:v,handleYearChange:j,isLoading:p}=z(),[r,f]=l.useState(null),[x,y]=l.useState(5e4),[h,w]=l.useState(new Date().getFullYear()+1);l.useEffect(()=>{(async()=>{try{const s=await R.get("/api/solar_recommendations",{params:{year:h,budget:x}});f(s.data.recommendations)}catch(s){console.error("Error fetching solar recommendations:",s)}})()},[h,x]);const P=a=>{const s=a.target.value;if(/^\d*$/.test(s)){const t=parseInt(s,10);(t>=15e3||s==="")&&y(s===""?"":t)}};return e.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[e.jsx("div",{className:"bg-green-700 text-white shadow-md",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4 flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Energy Recommendations"}),e.jsxs("div",{className:"flex items-center text-green-100 text-sm",children:[e.jsx(i,{name:"location",size:16,className:"mr-1"}),e.jsxs("span",{children:[n.city," • ",n.period]})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[e.jsx(c,{className:"mb-6 rounded-lg shadow-sm",children:e.jsxs("div",{className:"p-5 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Budget"}),e.jsx(B,{placeholder:"Enter Budget",value:x,onChange:P,size:"medium",variant:"outlined",className:"w-full",prefix:"₱"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Minimum: ₱15,000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),e.jsx(Y,{initialYear:h,onYearChange:a=>w(a),className:"w-full"})]})]})}),e.jsx(o,{variant:"h6",className:"font-semibold mb-3 text-gray-800",children:"Renewable Energy Potential"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:e.jsxs(c,{className:"rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"bg-yellow-500 h-1"}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-yellow-100 flex items-center justify-center mr-3",children:e.jsx(i,{name:"solar",size:20,className:"text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Solar"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Potential: ",n.location.solarPotential]})]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Average 5.5 kWh/m²/day"})]})]})}),e.jsx(o,{variant:"h6",className:"font-semibold mb-3 text-gray-800",children:"Future Projections"}),e.jsx(c,{className:"mb-6 rounded-lg shadow-sm",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[g.map((a,s)=>e.jsxs("div",{children:[e.jsxs("div",{className:"mb-2",children:[e.jsx(F,{label:a.year,size:"small",className:"bg-blue-100 text-blue-700 mb-1 mr-2"}),e.jsx("span",{className:"font-medium",children:a.title})]}),e.jsx("div",{className:"relative h-2 bg-gray-200 rounded-full mb-3",children:e.jsx("div",{className:"absolute top-0 left-0 h-full bg-blue-500 rounded-full",style:{width:`${a.progress}%`}})}),e.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:a.details.map((t,N)=>e.jsxs("li",{className:"flex",children:[e.jsx("span",{className:"h-2 w-2 mt-1.5 mr-2 rounded-full bg-blue-500 flex-shrink-0"}),e.jsx("span",{children:t})]},N))})]},s)),r&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"font-medium",children:r.future_projections.year}),e.jsx("p",{className:"text-sm text-gray-600",children:r.future_projections.title})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{className:"text-gray-600",children:["Predicted MERALCO Rate:",e.jsx("span",{className:"font-medium ml-1",children:r.future_projections["Predicted MERALCO Rate"]})]}),e.jsxs("p",{className:"text-gray-600",children:["Installable Solar Capacity:",e.jsx("span",{className:"font-medium ml-1",children:r.future_projections["Installable Solar Capacity"]})]})]})]})]})})}),e.jsx(o,{variant:"h6",className:"font-semibold mb-3 text-gray-800",children:"Cost-Benefit Analysis"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:[d.map((a,s)=>e.jsxs(c,{className:"rounded-lg shadow-sm p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:a.label}),e.jsx(D,{title:a.description||"",children:e.jsx(S,{className:"p-0 min-w-0",children:e.jsx(i,{name:"info",size:16,className:"text-gray-400"})})})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(i,{name:a.icon,size:20,className:"text-gray-500 mr-2"}),e.jsx(o,{variant:"h6",className:"font-bold",children:a.value})]})]},s)),r&&r.cost_benefit_analysis.map((a,s)=>e.jsxs(c,{className:"rounded-lg shadow-sm p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:a.label}),e.jsx(D,{title:a.description||"",children:e.jsx(S,{className:"p-0 min-w-0",children:e.jsx(i,{name:"info",size:16,className:"text-gray-400"})})})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(i,{name:a.icon,size:20,className:"text-gray-500 mr-2"}),e.jsx(o,{variant:"h6",className:"font-bold",children:a.value})]})]},s))]})]}),p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-20 flex items-center justify-center z-50",children:e.jsx(c,{className:"p-6 rounded-lg shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(i,{name:"loading",size:24,className:"text-green-500 animate-spin"}),e.jsx(o,{children:"Loading data..."})]})})})]})};export{X as default};
