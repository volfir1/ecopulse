import{f as z,b as I,m as Y,i as R,c as K,A as xe,d as G,e as re,g as Se,h as ne,j as Ae,k as we,u as Pe,l as q,G as Fe,n as ie,o as oe,D as De,p as Ee,X as Ce,Y as Me,q as _e}from"./generateCategoricalChart-D0QOHPu-.js";import{R as g,aj as de,r as Oe,ak as ke,al as We,a0 as Te,c as le,a1 as je}from"./index-CeiZKB8G.js";import Ne from"./html2canvas.esm-CBrSDip1.js";import{s as ze}from"./tup_logo-CddcVZx9.js";var Ge=["layout","type","stroke","connectNulls","isRange","ref"],Re=["key"],ue;function L(e){"@babel/helpers - typeof";return L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},L(e)}function fe(e,r){if(e==null)return{};var l=Le(e,r),n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function Le(e,r){if(e==null)return{};var l={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(r.indexOf(n)>=0)continue;l[n]=e[n]}return l}function T(){return T=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var l=arguments[r];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e},T.apply(this,arguments)}function se(e,r){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),l.push.apply(l,n)}return l}function O(e){for(var r=1;r<arguments.length;r++){var l=arguments[r]!=null?arguments[r]:{};r%2?se(Object(l),!0).forEach(function(n){C(e,n,l[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):se(Object(l)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(l,n))})}return e}function Be(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function ce(e,r){for(var l=0;l<r.length;l++){var n=r[l];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pe(n.key),n)}}function Ie(e,r,l){return r&&ce(e.prototype,r),l&&ce(e,l),Object.defineProperty(e,"prototype",{writable:!1}),e}function $e(e,r,l){return r=V(r),Ye(e,he()?Reflect.construct(r,l||[],V(e).constructor):r.apply(e,l))}function Ye(e,r){if(r&&(L(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xe(e)}function Xe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function he(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(he=function(){return!!e})()}function V(e){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},V(e)}function Ve(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&J(e,r)}function J(e,r){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},J(e,r)}function C(e,r,l){return r=pe(r),r in e?Object.defineProperty(e,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[r]=l,e}function pe(e){var r=Ue(e,"string");return L(r)=="symbol"?r:r+""}function Ue(e,r){if(L(e)!="object"||!e)return e;var l=e[Symbol.toPrimitive];if(l!==void 0){var n=l.call(e,r);if(L(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var j=function(e){function r(){var l;Be(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return l=$e(this,r,[].concat(o)),C(l,"state",{isAnimationFinished:!0}),C(l,"id",Pe("recharts-area-")),C(l,"handleAnimationEnd",function(){var a=l.props.onAnimationEnd;l.setState({isAnimationFinished:!0}),q(a)&&a()}),C(l,"handleAnimationStart",function(){var a=l.props.onAnimationStart;l.setState({isAnimationFinished:!1}),q(a)&&a()}),l}return Ve(r,e),Ie(r,[{key:"renderDots",value:function(n,o,i){var a=this.props.isAnimationActive,u=this.state.isAnimationFinished;if(a&&!u)return null;var d=this.props,f=d.dot,h=d.points,s=d.dataKey,m=z(this.props,!1),t=z(f,!0),p=h.map(function(b,P){var x=O(O(O({key:"dot-".concat(P),r:3},m),t),{},{index:P,cx:b.x,cy:b.y,dataKey:s,value:b.value,payload:b.payload,points:h});return r.renderDotItem(f,x)}),A={clipPath:n?"url(#clipPath-".concat(o?"":"dots-").concat(i,")"):null};return g.createElement(I,T({className:"recharts-area-dots"},A),p)}},{key:"renderHorizontalRect",value:function(n){var o=this.props,i=o.baseLine,a=o.points,u=o.strokeWidth,d=a[0].x,f=a[a.length-1].x,h=n*Math.abs(d-f),s=Y(a.map(function(m){return m.y||0}));return R(i)&&typeof i=="number"?s=Math.max(i,s):i&&Array.isArray(i)&&i.length&&(s=Math.max(Y(i.map(function(m){return m.y||0})),s)),R(s)?g.createElement("rect",{x:d<f?d:d-h,y:0,width:h,height:Math.floor(s+(u?parseInt("".concat(u),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var o=this.props,i=o.baseLine,a=o.points,u=o.strokeWidth,d=a[0].y,f=a[a.length-1].y,h=n*Math.abs(d-f),s=Y(a.map(function(m){return m.x||0}));return R(i)&&typeof i=="number"?s=Math.max(i,s):i&&Array.isArray(i)&&i.length&&(s=Math.max(Y(i.map(function(m){return m.x||0})),s)),R(s)?g.createElement("rect",{x:0,y:d<f?d:d-h,width:s+(u?parseInt("".concat(u),10):1),height:Math.floor(h)}):null}},{key:"renderClipRect",value:function(n){var o=this.props.layout;return o==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,o,i,a){var u=this.props,d=u.layout,f=u.type,h=u.stroke,s=u.connectNulls,m=u.isRange;u.ref;var t=fe(u,Ge);return g.createElement(I,{clipPath:i?"url(#clipPath-".concat(a,")"):null},g.createElement(K,T({},z(t,!0),{points:n,connectNulls:s,type:f,baseLine:o,layout:d,stroke:"none",className:"recharts-area-area"})),h!=="none"&&g.createElement(K,T({},z(this.props,!1),{className:"recharts-area-curve",layout:d,type:f,connectNulls:s,fill:"none",points:n})),h!=="none"&&m&&g.createElement(K,T({},z(this.props,!1),{className:"recharts-area-curve",layout:d,type:f,connectNulls:s,fill:"none",points:o})))}},{key:"renderAreaWithAnimation",value:function(n,o){var i=this,a=this.props,u=a.points,d=a.baseLine,f=a.isAnimationActive,h=a.animationBegin,s=a.animationDuration,m=a.animationEasing,t=a.animationId,p=this.state,A=p.prevPoints,b=p.prevBaseLine;return g.createElement(xe,{begin:h,duration:s,isActive:f,easing:m,from:{t:0},to:{t:1},key:"area-".concat(t),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(P){var x=P.t;if(A){var E=A.length/u.length,y=u.map(function(w,_){var M=Math.floor(_*E);if(A[M]){var F=A[M],k=G(F.x,w.x),W=G(F.y,w.y);return O(O({},w),{},{x:k(x),y:W(x)})}return w}),v;if(R(d)&&typeof d=="number"){var S=G(b,d);v=S(x)}else if(re(d)||Se(d)){var c=G(b,0);v=c(x)}else v=d.map(function(w,_){var M=Math.floor(_*E);if(b[M]){var F=b[M],k=G(F.x,w.x),W=G(F.y,w.y);return O(O({},w),{},{x:k(x),y:W(x)})}return w});return i.renderAreaStatically(y,v,n,o)}return g.createElement(I,null,g.createElement("defs",null,g.createElement("clipPath",{id:"animationClipPath-".concat(o)},i.renderClipRect(x))),g.createElement(I,{clipPath:"url(#animationClipPath-".concat(o,")")},i.renderAreaStatically(u,d,n,o)))})}},{key:"renderArea",value:function(n,o){var i=this.props,a=i.points,u=i.baseLine,d=i.isAnimationActive,f=this.state,h=f.prevPoints,s=f.prevBaseLine,m=f.totalLength;return d&&a&&a.length&&(!h&&m>0||!ne(h,a)||!ne(s,u))?this.renderAreaWithAnimation(n,o):this.renderAreaStatically(a,u,n,o)}},{key:"render",value:function(){var n,o=this.props,i=o.hide,a=o.dot,u=o.points,d=o.className,f=o.top,h=o.left,s=o.xAxis,m=o.yAxis,t=o.width,p=o.height,A=o.isAnimationActive,b=o.id;if(i||!u||!u.length)return null;var P=this.state.isAnimationFinished,x=u.length===1,E=de("recharts-area",d),y=s&&s.allowDataOverflow,v=m&&m.allowDataOverflow,S=y||v,c=re(b)?this.id:b,w=(n=z(a,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},_=w.r,M=_===void 0?3:_,F=w.strokeWidth,k=F===void 0?2:F,W=Ae(a)?a:{},B=W.clipDot,$=B===void 0?!0:B,N=M*2+k;return g.createElement(I,{className:E},y||v?g.createElement("defs",null,g.createElement("clipPath",{id:"clipPath-".concat(c)},g.createElement("rect",{x:y?h:h-t/2,y:v?f:f-p/2,width:y?t:t*2,height:v?p:p*2})),!$&&g.createElement("clipPath",{id:"clipPath-dots-".concat(c)},g.createElement("rect",{x:h-N/2,y:f-N/2,width:t+N,height:p+N}))):null,x?null:this.renderArea(S,c),(a||x)&&this.renderDots(S,$,c),(!A||P)&&we.renderCallByParent(this.props,u))}}],[{key:"getDerivedStateFromProps",value:function(n,o){return n.animationId!==o.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:o.curPoints,prevBaseLine:o.curBaseLine}:n.points!==o.curPoints||n.baseLine!==o.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])}(Oe.PureComponent);ue=j;C(j,"displayName","Area");C(j,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Fe.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});C(j,"getBaseValue",function(e,r,l,n){var o=e.layout,i=e.baseValue,a=r.props.baseValue,u=a??i;if(R(u)&&typeof u=="number")return u;var d=o==="horizontal"?n:l,f=d.scale.domain();if(d.type==="number"){var h=Math.max(f[0],f[1]),s=Math.min(f[0],f[1]);return u==="dataMin"?s:u==="dataMax"||h<0?h:Math.max(Math.min(f[0],f[1]),0)}return u==="dataMin"?f[0]:u==="dataMax"?f[1]:f[0]});C(j,"getComposedData",function(e){var r=e.props,l=e.item,n=e.xAxis,o=e.yAxis,i=e.xAxisTicks,a=e.yAxisTicks,u=e.bandSize,d=e.dataKey,f=e.stackedData,h=e.dataStartIndex,s=e.displayedData,m=e.offset,t=r.layout,p=f&&f.length,A=ue.getBaseValue(r,l,n,o),b=t==="horizontal",P=!1,x=s.map(function(y,v){var S;p?S=f[h+v]:(S=ie(y,d),Array.isArray(S)?P=!0:S=[A,S]);var c=S[1]==null||p&&ie(y,d)==null;return b?{x:oe({axis:n,ticks:i,bandSize:u,entry:y,index:v}),y:c?null:o.scale(S[1]),value:S,payload:y}:{x:c?null:n.scale(S[1]),y:oe({axis:o,ticks:a,bandSize:u,entry:y,index:v}),value:S,payload:y}}),E;return p||P?E=x.map(function(y){var v=Array.isArray(y.value)?y.value[0]:null;return b?{x:y.x,y:v!=null&&y.y!=null?o.scale(v):null}:{x:v!=null?n.scale(v):null,y:y.y}}):E=b?o.scale(A):n.scale(A),O({points:x,baseLine:E,layout:t,isRange:P},m)});C(j,"renderDotItem",function(e,r){var l;if(g.isValidElement(e))l=g.cloneElement(e,r);else if(q(e))l=e(r);else{var n=de("recharts-area-dot",typeof e!="boolean"?e.className:""),o=r.key,i=fe(r,Re);l=g.createElement(De,T({},i,{key:o,className:n}))}return l});var at=Ee({chartName:"AreaChart",GraphicalChild:j,axisComponents:[{axisType:"xAxis",AxisComp:Ce},{axisType:"yAxis",AxisComp:Me}],formatAxisMap:_e});const U={solar:{primaryColor:"#FFB800",secondaryColor:"#FFCD49",gradientOpacity:{start:.2,end:0},downloadFileName:"Solar_Power_Generation_Summary.pdf"},hydro:{primaryColor:"#2E90E5",secondaryColor:"#4FA2EA",gradientOpacity:{start:.3,end:0},downloadFileName:"Hydro_Power_Generation_Summary.pdf"},wind:{primaryColor:"#64748B",secondaryColor:"#94A3B8",gradientOpacity:{start:.25,end:0},downloadFileName:"Wind_Power_Generation_Summary.pdf"},biomass:{primaryColor:"#16A34A",secondaryColor:"#22C55E",gradientOpacity:{start:.2,end:.05},downloadFileName:"Biomass_Power_Generation_Summary.pdf"},geothermal:{primaryColor:"#FF6B6B",secondaryColor:"#FF9E9E",gradientOpacity:{start:.2,end:0},downloadFileName:"Geothermal_Power_Generation_Summary.pdf"}},{text:X,background:He,divider:Ke}=ke.palette,rt=(e="solar")=>{const r=U[e]||U.solar;return{gradient:{id:`${e}Gradient`,stops:[{offset:"5%",color:r.secondaryColor,opacity:r.gradientOpacity.start},{offset:"95%",color:r.secondaryColor,opacity:r.gradientOpacity.end}]},area:{type:"monotone",dataKey:"value",stroke:r.primaryColor,fill:`url(#${e}Gradient)`,strokeWidth:2,dot:{r:4,fill:r.primaryColor,strokeWidth:2,stroke:"#FFFFFF"},activeDot:{r:6,fill:r.primaryColor,stroke:"#FFFFFF",strokeWidth:2}},tooltip:{contentStyle:{backgroundColor:He.paper,border:`1px solid ${Ke}`,borderRadius:"6px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}}},nt=()=>({cartesianGrid:{strokeDasharray:"3 3",vertical:!1,stroke:"#e5e7eb"},xAxis:{stroke:X.secondary,tickLine:!0,fontSize:12,tickMargin:12,tick:{fill:X.secondary}},yAxis:{stroke:X.secondary,tickLine:!0,fontSize:12,tickMargin:12,tick:{fill:X.secondary}}}),it=(e="solar")=>U[e]||U.solar,ot=e=>{const r={solar:{color:"#FFB800",endpoint:"/api/predictions/solar/",fileName:"Solar_Power_Generation_Summary.pdf",title:"Solar Power Generation Chart",tableTitle:"Solar Power Generation Data Table",recommendations:["Invest in additional solar panel infrastructure to capitalize on the projected growth trend.","Develop energy storage solutions to address intermittency challenges.","Evaluate technological upgrades to improve solar capture efficiency.","Consider strategic placement of new solar installations based on irradiance data."],pdfStyles:{fillColor:[255,180,0],lightFill:[252,248,227]}},hydro:{color:"#2E90E5",endpoint:"/api/predictions/hydro/",fileName:"Hydropower_Generation_Summary.pdf",title:"Hydropower Generation Chart",tableTitle:"Hydropower Generation Data Table",recommendations:["Implement advanced water flow monitoring systems to optimize reservoir management.","Invest in turbine efficiency upgrades to increase power output during peak seasons.","Develop comprehensive drought contingency plans for low-water periods.","Explore hybrid renewable integration to balance seasonal hydropower fluctuations."],pdfStyles:{fillColor:[46,144,229],lightFill:[235,245,255]}},wind:{color:"#64748B",endpoint:"/api/predictions/wind/",fileName:"Wind_Power_Generation_Summary.pdf",title:"Wind Power Generation Chart",tableTitle:"Wind Power Generation Data Table",recommendations:["Invest in advanced turbine technology to improve efficiency in varying wind conditions.","Develop more sophisticated wind forecasting systems to optimize generation scheduling.","Implement smart grid integration to better manage intermittency challenges.","Explore hybrid wind-storage solutions to enhance reliability and grid stability."],pdfStyles:{fillColor:[100,116,139],lightFill:[240,244,248]}},biomass:{color:"#16A34A",endpoint:"/api/predictions/biomass/",fileName:"Biomass_Power_Generation_Summary.pdf",title:"Biomass Generation Chart",tableTitle:"Biomass Generation Data Table",recommendations:["Invest in additional processing capacity to handle the projected increase.","Develop partnerships with agricultural suppliers to ensure consistent feedstock availability.","Evaluate efficiency improvements to current generation facilities.","Consider expanding storage capabilities to manage seasonal fluctuations."],pdfStyles:{fillColor:[22,163,74],lightFill:[240,248,240]}},geothermal:{color:"#FF6B6B",endpoint:"/api/predictions/geothermal/",fileName:"Geothermal_Power_Generation_Summary.pdf",title:"Geothermal Generation Chart",tableTitle:"Geothermal Generation Data Table",recommendations:["Optimize well management and resource extraction to maximize long-term sustainability.","Implement advanced heat exchange technologies to increase efficiency.","Develop enhanced geothermal systems (EGS) for areas with lower natural temperatures.","Explore cascade applications to utilize residual heat in multiple processes."],pdfStyles:{fillColor:[255,107,107],lightFill:[255,235,235]}}},l=r[e]||r.solar;return We((n,o)=>({energyType:e,config:l,generationData:[],currentProjection:null,loading:!0,selectedStartYear:2025,selectedEndYear:2030,chartRef:null,additionalData:{},apiError:null,setChartRef:i=>n({chartRef:i}),setYearRange:(i,a)=>{n({selectedStartYear:i,selectedEndYear:a,apiError:null}),o().fetchData(i,a)},fetchData:async(i,a)=>{var u,d,f;n({loading:!0,apiError:null});try{const h=await je.get(`${l.endpoint}?start_year=${i}&end_year=${a}`);if(!((u=h==null?void 0:h.data)!=null&&u.predictions))throw new Error("No predictions data available");const s=h.data.predictions.map(t=>({date:t.Year,value:Math.abs(t["Predicted Production"])})),m=((d=s[s.length-1])==null?void 0:d.value)||null;n({generationData:s,currentProjection:m,loading:!1,apiError:null})}catch(h){console.error(`Error fetching ${e} data:`,h);const s=o().generateMockData(i,a);n({generationData:s,currentProjection:((f=s[s.length-1])==null?void 0:f.value)||null,loading:!1,apiError:{message:"Using simulated data",usingMockData:!0}})}},generateMockData:(i,a)=>{const u=[];for(let d=i;d<=a;d++)u.push(d);return u.map(d=>{const f=75+d%10*8,h=Math.sin(d*.5)*15;let s=1;e==="solar"&&(s=1.2),e==="wind"&&(s=1.1),e==="hydro"&&(s=.95),e==="biomass"&&(s=.85),e==="geothermal"&&(s=1.05);const m=(d-i)*2.5,t=(f+h+m)*s;return{date:d,value:parseFloat(t.toFixed(2))}})},generateMockAdditionalData:()=>e==="solar"?{irradianceData:o().getSolarIrradianceData(),panelPerformance:o().getPanelPerformance()}:e==="hydro"?{waterFlowData:o().getWaterFlowData(),turbineEfficiency:o().getTurbineEfficiency()}:e==="wind"?{windSpeedData:o().getWindSpeedData(),turbinePerformance:o().getTurbinePerformance()}:e==="biomass"?{feedstockData:o().getFeedstockData(),efficiencyData:o().getEfficiencyData()}:e==="geothermal"?{temperatureData:o().getTemperatureData(),wellPerformance:o().getWellPerformance()}:{},initialize:()=>{const{selectedStartYear:i,selectedEndYear:a,fetchData:u}=o();u(i,a)},getSolarIrradianceData:()=>Array.from({length:7},(i,a)=>({day:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][a],irradiance:800+Math.sin(a*.8)*200+Math.random()*100,power:4200+Math.sin(a*.8)*800+Math.random()*400})),getPanelPerformance:()=>Array.from({length:6},(i,a)=>({array:`Array ${a+1}`,efficiency:95+Math.sin(a*.5)*3+Math.random()*2,output:2500+Math.sin(a*.5)*300+Math.random()*200})),getWaterFlowData:()=>Array.from({length:7},(i,a)=>({day:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][a],flow:4200+Math.sin(a*.8)*800+Math.random()*400,generation:3800+Math.sin(a*.8)*600+Math.random()*300})),getTurbineEfficiency:()=>Array.from({length:8},(i,a)=>({turbine:`T${a+1}`,efficiency:85+Math.sin(a*.5)*10+Math.random()*5,output:2800+Math.sin(a*.7)*400+Math.random()*200})),getWindSpeedData:()=>Array.from({length:7},(i,a)=>({day:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][a],speed:15+Math.sin(a*.8)*5+Math.random()*3,power:3500+Math.sin(a*.8)*800+Math.random()*500})),getTurbinePerformance:()=>Array.from({length:6},(i,a)=>({turbine:`Turbine ${a+1}`,efficiency:92+Math.sin(a*.7)*5+Math.random()*3,output:2200+Math.sin(a*.6)*400+Math.random()*200})),getFeedstockData:()=>Array.from({length:7},(i,a)=>({day:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][a],agricultural:2800+Math.sin(a*.8)*500+Math.random()*300,forestry:2200+Math.cos(a*.8)*400+Math.random()*250})),getEfficiencyData:()=>Array.from({length:6},(i,a)=>({source:["Wood","Crop","Waste","Biogas","Pellets","Other"][a],efficiency:75+Math.sin(a*.7)*15+Math.random()*10,output:2400+Math.sin(a*.6)*500+Math.random()*300})),getTemperatureData:()=>Array.from({length:7},(i,a)=>({day:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][a],temperature:220+Math.sin(a*.3)*30+Math.random()*15,output:3200+Math.sin(a*.3)*500+Math.random()*250})),getWellPerformance:()=>Array.from({length:5},(i,a)=>({well:`Well ${a+1}`,temperature:240+Math.sin(a*.6)*40+Math.random()*20,pressure:85+Math.sin(a*.4)*10+Math.random()*5,output:2600+Math.sin(a*.5)*400+Math.random()*300})),handleDownload:async i=>{const{generationData:a,selectedStartYear:u,selectedEndYear:d,currentProjection:f,chartRef:h,config:s,apiError:m}=o();m&&m.usingMockData&&i&&typeof i.warning=="function"&&i.warning("Note: Using simulated data for this report as actual data could not be retrieved.");try{i&&typeof i.info=="function"&&i.info("Preparing your download...");const t=new Te({orientation:"portrait",unit:"mm",format:"a4"}),p=t.internal.pageSize.getWidth(),A=t.internal.pageSize.getHeight(),b=30;t.setFillColor(...s.pdfStyles.fillColor),t.rect(0,0,p,b,"F"),t.addImage(le,"PNG",15,5,20,20),t.addImage(ze,"PNG",p-35,5,20,20),t.setTextColor(255,255,255),t.setFontSize(16);const P="Ecopulse",x=t.getStringUnitWidth(P)*t.internal.getFontSize()/t.internal.scaleFactor,E=(p-x)/2;t.text(P,E,17),t.setFontSize(11);const y=`Date Generated: ${new Date().toLocaleDateString()}`,v=t.getStringUnitWidth(y)*t.internal.getFontSize()/t.internal.scaleFactor,S=(p-v)/2;t.text(y,S,25),t.setTextColor(0,0,0);let c=b+15;t.setFontSize(12);const w=`Year Range: ${u} - ${d}`,_=t.getStringUnitWidth(w)*t.internal.getFontSize()/t.internal.scaleFactor,M=(p-_)/2;t.text(w,M,c),c+=8;const F=`Current Projection: ${f?f.toFixed(2):"N/A"} GWh`,k=t.getStringUnitWidth(F)*t.internal.getFontSize()/t.internal.scaleFactor,W=(p-k)/2;if(t.text(F,W,c),c+=15,m&&m.usingMockData){t.setFontSize(10),t.setTextColor(192,0,0);const D="Note: Using simulated data for this report",ee=t.getStringUnitWidth(D)*t.internal.getFontSize()/t.internal.scaleFactor,H=(p-ee)/2;t.text(D,H,c),t.setTextColor(0,0,0),c+=10}if(h&&h.current)try{const D=h.current,H=(await Ne(D,{scale:2,useCORS:!0,logging:!1})).toDataURL("image/png");t.setFontSize(14);const te=s.title,ge=t.getStringUnitWidth(te)*t.internal.getFontSize()/t.internal.scaleFactor,ve=(p-ge)/2;t.text(te,ve,c),c+=8;const ae=180,be=(p-ae)/2;t.addImage(H,"PNG",be,c,ae,90),c+=100}catch(D){console.error("Error capturing chart:",D)}else c+=10;t.setFontSize(14);const B=s.tableTitle,$=t.getStringUnitWidth(B)*t.internal.getFontSize()/t.internal.scaleFactor,N=(p-$)/2;t.text(B,N,c),c+=8,t.autoTable({head:[["Year","Predicted Production (GWh)"]],body:a.map(D=>[D.date,D.value.toFixed(2)]),startY:c,margin:{left:30,right:30},headStyles:{fillColor:s.pdfStyles.fillColor,halign:"center",fontSize:11},columnStyles:{0:{cellWidth:60,halign:"center"},1:{cellWidth:100,halign:"center"}},styles:{fontSize:10,cellPadding:5,overflow:"linebreak"},alternateRowStyles:{fillColor:s.pdfStyles.lightFill}}),c=t.autoTable.previous.finalY+15,c>A-140&&(t.addPage(),c=20),t.setFillColor(...s.pdfStyles.fillColor),t.rect(15,c,p-30,20,"F"),t.setTextColor(255,255,255),t.setFontSize(12),t.setFont(void 0,"bold"),t.text("RECOMMENDATIONS",p/2,c+13,{align:"center"}),t.setFont(void 0,"normal"),t.setTextColor(0,0,0),c+=25,t.setDrawColor(...s.pdfStyles.fillColor),t.setLineWidth(.5),t.line(15,c,p-15,c),c+=10,t.setFontSize(9),t.setFont(void 0,"italic"),t.text(`Based on the projected increase in ${e} power generation, we recommend:`,20,c),t.setFont(void 0,"normal"),c+=10,s.recommendations.forEach(D=>{t.setFillColor(...s.pdfStyles.fillColor),t.circle(20,c-1,2,"F"),t.setFontSize(9),t.text(D,25,c),c+=8}),c+=7,t.setDrawColor(...s.pdfStyles.fillColor),t.setLineWidth(.5),t.line(15,c,p-15,c),c+=7,t.setFontSize(8),t.setFont(void 0,"bold"),t.text("Sources:",20,c),t.setFont(void 0,"normal");const Q=(p-40)/2;t.text(`1. Placeholder source for ${e} data`,20,c+7),t.text("2. Placeholder source for prediction models",20,c+14),t.text("3. Placeholder source for efficiency calculation",20+Q,c+7),t.text("4. Placeholder source for energy conversion factors",20+Q,c+14),t.addImage(le,"PNG",p-25,c+5,15,15),t.setFontSize(7);const Z=`© ${new Date().getFullYear()} Ecopulse. All rights reserved.`,me=t.getStringUnitWidth(Z)*t.internal.getFontSize()/t.internal.scaleFactor,ye=(p-me)/2;return t.text(Z,ye,c+22),c>A-30&&t.addPage(),t.save(s.fileName),i&&typeof i.success=="function"&&i.success("Summary downloaded successfully!"),{success:!0}}catch(t){return console.error("Download error:",t),i&&typeof i.error=="function"&&i.error("Failed to download summary. Please try again."),{success:!1,error:t}}}}))};export{at as A,j as a,nt as b,ot as c,it as d,rt as g};
