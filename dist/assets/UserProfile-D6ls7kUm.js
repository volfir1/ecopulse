import{k as ie,u as me,b as pe,e as le,r as P,a5 as q,f as he,a6 as ge,l as fe,a7 as xe,j as e,L as ve,B as g,T as A,V as Z,a8 as K,E as we,a as E,a2 as be,a9 as ye,aa as ee,q as je,ab as Pe,ac as Se}from"./index-CeiZKB8G.js";import{F as Ce,c as Ae,b as Ie,d as ae,a as re,e as Ne}from"./index.esm-CrTxtpVV.js";import{u as Re}from"./index-D_GLsIW_.js";import{C as se}from"./Container-Df-kvLoc.js";import{G as x}from"./Grid-D1VGGK9h.js";import{T as W,I as Ee}from"./TextField-CJViWXc3.js";import{F as De,S as Fe}from"./Select-CMa9xVQT.js";import"./useThemeProps-B7RzBULZ.js";import"./styled-ZZIuKTKu.js";/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],te=ie("CircleX",ke);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],oe=ie("SquarePen",Ue),ne=t=>{const B={minLength:t.length>=8,hasUpperCase:/[A-Z]/.test(t),hasLowerCase:/[a-z]/.test(t),hasNumber:/\d/.test(t),hasSpecialChar:/[!@#$%^&*(),.?":{}|<>]/.test(t)},D=Object.entries(B).filter(([i,F])=>!F).map(([i])=>{switch(i){case"minLength":return"Password must be at least 8 characters long";case"hasUpperCase":return"Password must contain at least one uppercase letter";case"hasLowerCase":return"Password must contain at least one lowercase letter";case"hasNumber":return"Password must contain at least one number";case"hasSpecialChar":return"Password must contain at least one special character";default:return""}});return{isValid:D.length===0,errors:D}},$e=()=>{const{user:t,logout:B}=me(),D=pe(),i=le(),[F,j]=P.useState(!1),[J,k]=P.useState(!1),[v,V]=P.useState({firstName:"",lastName:"",email:"",phone:"",gender:"prefer-not-to-say",role:""}),[I,d]=P.useState({currentPassword:"",newPassword:"",confirmPassword:""});P.useEffect(()=>{t&&(V({firstName:t.firstName||"",lastName:t.lastName||"",email:t.email||"",phone:t.phone||"",gender:t.gender||"prefer-not-to-say",role:t.role||"user",avatar:t.avatar}),k(!!t.googleId))},[t]);const L=o=>{const{name:r,value:s}=o.target;V({...v,[r]:s})},U=o=>{const{name:r,value:s}=o.target;d({...I,[r]:s})},T=async o=>{try{const s=await(await fetch(o)).blob();return new Promise((l,u)=>{const c=new FileReader;c.onload=()=>{const h=c.result.split(",")[1];l(h)},c.onerror=()=>u(new Error("Failed to convert image to base64")),c.readAsDataURL(s)})}catch(r){throw console.error("Error converting image to base64:",r),r}},w=async o=>{if(o&&o.preventDefault(),!(t!=null&&t.id))return i.error("User not authenticated"),{success:!1,message:"User not authenticated"};j(!0);try{const r=await q.updateProfile(t.id,v);if(r.success){try{const s=localStorage.getItem("user");if(s){const u={...JSON.parse(s),...v};localStorage.setItem("user",JSON.stringify(u))}}catch(s){console.error("Error updating localStorage:",s)}return i.success("Profile updated successfully"),r}else return i.error(r.message||"Failed to update profile"),r}catch(r){return i.error(r.message||"An error occurred while updating profile"),{success:!1,message:r.message||"An error occurred"}}finally{j(!1)}},S=async o=>{var s,l,u;if(o.preventDefault(),J){i.warning("Google-authenticated accounts cannot change passwords here. Please use Google's account settings to manage your password.",{duration:5e3});return}const r=ne(I.newPassword);if(!r.isValid){r.errors.forEach(c=>i.error(c));return}if(I.newPassword!==I.confirmPassword){i.error("New passwords don't match");return}j(!0);try{const c=await q.changePassword(t.id,I.currentPassword,I.newPassword);c.success?(i.success(c.message),d({currentPassword:"",newPassword:"",confirmPassword:""})):i.error(c.message||"Failed to update password")}catch(c){(s=c.message)!=null&&s.includes("Google-authenticated")||(l=c.message)!=null&&l.includes("social login")||(u=c.message)!=null&&u.includes("Cannot change password for this account type")?(k(!0),i.warning("Google-authenticated accounts cannot change passwords here. Please use Google's account settings to manage your password.",{duration:5e3})):i.error(c.message||"Failed to update password")}finally{j(!1)}},C=async()=>{j(!0);try{const o=await he.deactivateAccount();o.success?(i.success(o.message||"Account deleted successfully"),await B(),D("/account-deactivated",{state:{email:t==null?void 0:t.email}})):i.error(o.message||"Failed to delete account")}catch(o){i.error(o.message||"An error occurred while deleting account")}finally{j(!1)}},Q=async(o,r)=>{j(!0);try{const s=ne(r);if(!s.isValid){s.errors.forEach(u=>i.error(u));return}const l=await q.changePassword(o,r);l.success&&(i.success(l.message),l.accessToken&&localStorage.setItem("authToken",l.accessToken),D("/login"))}catch(s){i.error(s.message)}finally{j(!1)}},X=async(o,r)=>{try{return new Promise((s,l)=>{const u=new FileReader;u.onload=async()=>{const c=u.result;try{r&&r(10);const h=Date.now(),p={base64Image:c,avatarId:"custom-upload",uniqueId:h};r&&r(30);const m=await fetch("http://localhost:5000/api/upload/avatar/base64",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},credentials:"include",body:JSON.stringify(p)});if(r&&r(80),!m.ok)throw new Error("Upload failed");const N=await m.json();console.log("Avatar upload response:",N),r&&r(100);const z=N.avatar||N.avatarUrl,R=localStorage.getItem("user");if(R){const M=JSON.parse(R);M.avatar=z,localStorage.setItem("user",JSON.stringify(M))}s(z)}catch(h){console.error("Error in avatar upload:",h),l(h)}},u.onerror=()=>{l(new Error("Error reading file"))},u.readAsDataURL(o)})}catch(s){throw console.error("Avatar upload error:",s),s}},Y=async(o,r)=>{try{if(j(!0),!(t!=null&&t.id))throw new Error("User not authenticated");const s=r.split(".").pop().toLowerCase(),l=`image/${s==="svg"?"svg+xml":s}`,u=await T(r),c=`data:${l};base64,${u}`,h=await $(c);let p="";try{p=r;const m={...v,avatar:p},N=await q.updateProfile(t.id,m);if(!N.success)throw new Error(N.message||"Failed to update avatar");const z=localStorage.getItem("user");if(z){const R=JSON.parse(z);R.avatar=p,localStorage.setItem("user",JSON.stringify(R))}return i.success("Avatar updated successfully"),p}catch(m){throw console.error("Failed to update avatar:",m),m}}catch(s){throw console.error("Error updating avatar:",s),i.error(s.message||"Failed to update avatar"),s}finally{j(!1)}},$=async o=>new Promise((r,s)=>{const l=new Image;l.onload=()=>{const u=document.createElement("canvas"),c=u.getContext("2d");let h=l.width,p=l.height;const m=150;h>p&&h>m?(p*=m/h,h=m):p>m&&(h*=m/p,p=m),h=Math.floor(h),p=Math.floor(p),u.width=h,u.height=p,c.imageSmoothingQuality="high",c.drawImage(l,0,0,h,p),r(u.toDataURL("image/jpeg",.2))},l.onerror=s,l.src=o});return{user:t,formData:v,passwordData:I,isLoading:F,isGoogleAccount:J,handleInputChange:L,handlePasswordChange:U,uploadAvatar:X,uploadDefaultAvatar:Y,originalHandleProfileSubmit:w,handlePasswordSubmit:S,handleDeactivateAccount:C,handlePasswordReset:Q}},O=[{id:"avatar-1",src:"/avatars/1.svg",alt:"Avatar 1"},{id:"avatar-2",src:"/avatars/2.svg",alt:"Avatar 2"},{id:"avatar-3",src:"/avatars/3.svg",alt:"Avatar 3"},{id:"avatar-4",src:"/avatars/4.svg",alt:"Avatar 4"},{id:"avatar-5",src:"/avatars/5.svg",alt:"Avatar 5"},{id:"avatar-6",src:"/avatars/6.svg",alt:"Avatar 6"},{id:"default-avatar",src:"/avatars/7.svg",alt:"Default Avatar"}],ze=[{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"non-binary",label:"Non-binary"},{value:"transgender",label:"Transgender"},{value:"other",label:"Other"},{value:"prefer-not-to-say",label:"Prefer not to say"}],Ve=()=>{const t=ge(),{isLoading:B,startLoading:D,stopLoading:i}=fe(),F=Re(t.breakpoints.down("md")),[j,J]=P.useState("profile"),k=P.useRef(null),v=le(),{updateProfilePicture:V,updateDefaultAvatar:I}=xe(),[d,L]=P.useState(!1),[U,T]=P.useState({}),{user:w,formData:S,handleInputChange:C,originalHandleProfileSubmit:Q,isGoogleAccount:X,userAvatar:Y}=$e(),[$,o]=P.useState(null),[r,s]=P.useState(!1),[l,u]=P.useState(0),[c,h]=P.useState(!1),[p,m]=P.useState(Y||"/avatars/default-avatar.svg");P.useEffect(()=>{if(w&&w.avatar){const a=`?t=${Date.now()}`,n=O.find(b=>b.id===w.avatar);n?(m(n.src),o(n.id)):(m(`${w.avatar}${a}`),s(!0))}w&&T({firstName:w.firstName||"",lastName:w.lastName||"",email:w.email||"",phone:w.phone||"",gender:w.gender||"prefer-not-to-say",role:w.role||"user",avatar:w.avatar})},[w]);const N=[{id:"profile",icon:"profile",label:"Profile"},{id:"security",icon:"security",label:"Security"}],z=a=>{if(!d)return;o(a),s(!1);const n=O.find(b=>b.id===a);n&&(m(n.src),C({target:{name:"avatar",value:a}}))},R=()=>{T({...S}),L(!0)},M=()=>{if(Object.keys(U).forEach(a=>{C({target:{name:a,value:U[a]}})}),U.avatar){const a=O.find(n=>n.id===U.avatar);a?(m(a.src),o(a.id),s(!1)):(m(`${U.avatar}?t=${Date.now()}`),s(!0),o(null))}L(!1)},ce=async a=>{a.preventDefault(),D();try{if($&&!r){const b=O.find(y=>y.id===$);if(b){v.info("Processing...",{autoClose:2e3});const y=await I($,b.src);if(!y.success)throw new Error(y.error||"Failed to upload default avatar");C({target:{name:"avatar",value:y.avatar}});const f=`?t=${Date.now()}`;m(`${y.avatar}${f}`)}}const n=await Q(a);if(n&&n.success)T({...S}),L(!1),v.success("Profile updated successfully!"),setTimeout(()=>{i(),window.location.reload()},1500);else throw new Error((n==null?void 0:n.message)||"Failed to update profile")}catch(n){v.error(n.message||"Error updating profile. Please try again."),i()}},de=()=>{var a;d&&((a=k.current)==null||a.click())},ue=async a=>{var y;const n=(y=a.target.files)==null?void 0:y[0];if(!n)return;if(!["image/jpeg","image/png","image/gif","image/jpg"].includes(n.type)){v.error("Please select a valid image file (JPEG, PNG, GIF)");return}h(!0),u(10);try{const f=await V(n,G=>{u(G)});if(!f.success)throw new Error(f.error||"Failed to upload avatar");s(!0),o(null);const _=`?t=${Date.now()}`,H=`${f.avatar}${_}`;m(H),C({target:{name:"avatar",value:f.avatar}}),T(G=>({...G,avatar:f.avatar})),v.success("Avatar uploaded successfully!")}catch(f){console.error("Avatar upload error:",f),v.error(f.message||"Failed to upload avatar")}finally{h(!1),k.current&&(k.current.value="")}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[B&&e.jsx(ve,{}),e.jsx(g,{sx:{py:{xs:4,md:5},px:3,background:"linear-gradient(135deg, #10B981 0%, #047857 100%)",boxShadow:"0 4px 12px rgba(0,0,0,0.08)"},children:e.jsxs(se,{maxWidth:"lg",children:[e.jsx(A,{variant:"h4",sx:{fontWeight:700,color:"white",mb:1},children:"My Profile"}),e.jsx(A,{variant:"subtitle1",sx:{color:"rgba(255,255,255,0.85)",fontWeight:400},children:"Manage your personal information and account security"})]})}),e.jsx(se,{maxWidth:"lg",sx:{py:{xs:3,md:5},px:{xs:2,sm:3}},children:e.jsxs(x,{container:!0,spacing:3,children:[e.jsx(x,{item:!0,xs:12,md:3,children:e.jsxs(Z,{elevation:0,sx:{borderRadius:2,border:"1px solid",borderColor:"divider",position:"sticky",top:16,overflow:"hidden"},children:[e.jsxs(g,{sx:{p:3,display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"white"},children:[e.jsx(K,{src:p,alt:S.firstName,sx:{width:90,height:90,mb:2,border:"3px solid white",boxShadow:"0 4px 10px rgba(0,0,0,0.1)"}},`sidebar-avatar-${p}`),e.jsxs(A,{variant:"h6",sx:{fontWeight:600,textAlign:"center"},children:[S.firstName," ",S.lastName]}),e.jsx(A,{variant:"body2",color:"text.secondary",sx:{mb:1,textAlign:"center"},children:S.email}),e.jsx(g,{sx:{px:2,py:.5,borderRadius:6,bgcolor:"primary.50",color:"primary.700",textTransform:"capitalize",fontSize:13,fontWeight:500},children:S.role||"User"})]}),e.jsx(we,{}),e.jsx(g,{sx:{p:2,display:F?"flex":"block",justifyContent:"center",gap:2},children:N.map(a=>e.jsx(E,{variant:j===a.id?"contained":"text",color:j===a.id?"primary":"inherit",onClick:()=>J(a.id),fullWidth:!F,startIcon:e.jsx(be,{name:a.icon}),sx:{py:1.5,justifyContent:"flex-start",mb:F?0:1,borderRadius:1.5,textAlign:"left"},children:a.label},a.id))})]})}),e.jsxs(x,{item:!0,xs:12,md:9,children:[j==="profile"&&e.jsxs(g,{children:[e.jsxs(Z,{elevation:0,sx:{p:{xs:3,md:4},mb:3,borderRadius:2,border:"1px solid",borderColor:"divider"},children:[e.jsxs(g,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(A,{variant:"h6",sx:{fontWeight:600,color:"text.primary"},children:"Profile Picture"}),d?e.jsx(g,{sx:{display:"flex",gap:1},children:e.jsx(E,{variant:"outlined",startIcon:e.jsx(te,{size:16}),onClick:M,color:"error",sx:{borderRadius:2},children:"Cancel"})}):e.jsx(E,{variant:"outlined",startIcon:e.jsx(oe,{size:16}),onClick:R,color:"primary",sx:{borderRadius:2},children:"Edit Profile"})]}),e.jsxs(x,{container:!0,spacing:3,children:[e.jsx(x,{item:!0,xs:12,sm:6,children:e.jsxs(g,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",mb:{xs:3,sm:0}},children:[e.jsx(K,{src:p,alt:S.firstName,sx:{width:120,height:120,border:"3px solid white",boxShadow:"0 4px 10px rgba(0,0,0,0.1)",mb:3,opacity:d?1:.85,transition:"opacity 0.2s ease"}},`profile-avatar-${p}`),e.jsx(E,{variant:"outlined",startIcon:e.jsx(ye,{size:16}),onClick:de,color:"primary",disabled:!d,sx:{borderRadius:2,opacity:d?1:.7,pointerEvents:d?"auto":"none"},children:"Upload New Photo"}),e.jsx("input",{type:"file",ref:k,style:{display:"none"},accept:"image/jpeg, image/png, image/gif",onChange:ue,disabled:!d}),c&&e.jsxs(g,{sx:{mt:2,width:"100%",maxWidth:200},children:[e.jsx(g,{sx:{height:6,borderRadius:3,bgcolor:ee(t.palette.primary.main,.2),overflow:"hidden"},children:e.jsx(g,{sx:{height:"100%",borderRadius:3,width:`${l}%`,bgcolor:"primary.main",transition:"width 0.3s ease-in-out"}})}),e.jsxs(A,{variant:"caption",sx:{display:"block",textAlign:"center",mt:1},children:["Uploading... ",l,"%"]})]})]})}),e.jsxs(x,{item:!0,xs:12,sm:6,children:[e.jsx(A,{variant:"subtitle2",sx:{mb:2,fontWeight:600,color:d?"text.primary":"text.secondary"},children:"Select Default Avatar"}),e.jsx(g,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(60px, 1fr))",gap:1.5,opacity:d?1:.7,pointerEvents:d?"auto":"none"},children:O.map(a=>e.jsxs(g,{onClick:()=>z(a.id),sx:{p:1,border:"2px solid",borderColor:$===a.id?"primary.main":ee("#000",.06),borderRadius:2,cursor:d?"pointer":"default",position:"relative",transition:"all 0.2s ease","&:hover":d?{borderColor:ee(t.palette.primary.main,.5),transform:"translateY(-2px)",boxShadow:"0 4px 8px rgba(0,0,0,0.05)"}:{}},children:[e.jsx(K,{src:a.src,alt:a.alt,sx:{width:"100%",height:"auto",aspectRatio:"1/1"}}),$===a.id&&e.jsx(g,{sx:{position:"absolute",top:-8,right:-8,bgcolor:"primary.main",borderRadius:"50%",width:22,height:22,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(je,{size:14,color:"white"})})]},a.id))})]})]})]}),e.jsxs(Z,{elevation:0,sx:{p:{xs:3,md:4},borderRadius:2,border:"1px solid",borderColor:"divider"},children:[e.jsx(A,{variant:"h6",sx:{mb:3,fontWeight:600,color:"text.primary"},children:"Personal Information"}),e.jsx("form",{onSubmit:ce,children:e.jsxs(x,{container:!0,spacing:3,children:[e.jsx(x,{item:!0,xs:12,sm:6,children:e.jsx(W,{fullWidth:!0,label:"First Name",name:"firstName",value:S.firstName,onChange:C,required:!0,variant:"outlined",disabled:!d,InputProps:{sx:{borderRadius:1.5,bgcolor:d?"transparent":"action.disabledBackground"}}})}),e.jsx(x,{item:!0,xs:12,sm:6,children:e.jsx(W,{fullWidth:!0,label:"Last Name",name:"lastName",value:S.lastName,onChange:C,required:!0,variant:"outlined",disabled:!d,InputProps:{sx:{borderRadius:1.5,bgcolor:d?"transparent":"action.disabledBackground"}}})}),e.jsx(x,{item:!0,xs:12,sm:6,children:e.jsx(W,{fullWidth:!0,label:"Email",name:"email",type:"email",value:S.email,onChange:C,required:!0,variant:"outlined",disabled:!0,InputProps:{sx:{borderRadius:1.5,bgcolor:"action.disabledBackground","& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"text.secondary"}}},helperText:"Email cannot be changed"})}),e.jsx(x,{item:!0,xs:12,sm:6,children:e.jsxs(De,{fullWidth:!0,variant:"outlined",children:[e.jsx(Ee,{id:"gender-label",children:"Gender"}),e.jsx(Fe,{labelId:"gender-label",id:"gender",name:"gender",value:S.gender||"prefer-not-to-say",label:"Gender",onChange:C,disabled:!d,sx:{borderRadius:1.5,bgcolor:d?"transparent":"action.disabledBackground"},children:ze.map(a=>e.jsx(Pe,{value:a.value,children:a.label},a.value))})]})}),e.jsx(x,{item:!0,xs:12,children:e.jsx(g,{sx:{display:"flex",justifyContent:"flex-end",mt:2},children:d?e.jsxs(g,{sx:{display:"flex",gap:2},children:[e.jsx(E,{type:"button",variant:"outlined",color:"error",size:"large",startIcon:e.jsx(te,{size:18}),onClick:M,sx:{borderRadius:2,px:3},children:"Cancel"}),e.jsx(E,{type:"submit",variant:"contained",color:"primary",size:"large",startIcon:e.jsx(Se,{size:18}),sx:{borderRadius:2,px:3},children:"Save Changes"})]}):e.jsx(E,{type:"button",variant:"contained",color:"primary",size:"large",startIcon:e.jsx(oe,{size:18}),onClick:R,sx:{borderRadius:2,px:4},children:"Edit Profile"})})})]})})]})]}),j==="security"&&e.jsxs(Z,{elevation:0,sx:{p:{xs:3,md:4},borderRadius:2,border:"1px solid",borderColor:"divider"},children:[e.jsx(A,{variant:"h6",sx:{mb:3,fontWeight:600,color:"text.primary"},children:"Security Settings"}),X?e.jsx(g,{sx:{p:3,borderRadius:2,mb:3,bgcolor:"info.50",borderLeft:"4px solid",borderColor:"info.main"},children:e.jsxs(g,{sx:{display:"flex",alignItems:"flex-start"},children:[e.jsx(g,{sx:{mr:2,color:"info.main",display:"flex"},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsx(A,{sx:{color:"info.dark"},children:"You signed in with Google. To change your password, please visit your Google account settings."})]})}):e.jsx(Ce,{initialValues:{currentPassword:"",newPassword:"",confirmPassword:""},validationSchema:Ae({currentPassword:re().required("Current password is required"),newPassword:re().required("New password is required").min(8,"Password must be at least 8 characters").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,"Password must contain at least one uppercase letter, one lowercase letter, one number, and one special character"),confirmPassword:re().required("Please confirm your password").oneOf([Ne("newPassword"),null],"Passwords don't match")}),onSubmit:(a,{setSubmitting:n,resetForm:b})=>{q.changePassword(w.id,a.currentPassword,a.newPassword).then(f=>{f.success?(v.success(f.message||"Password updated successfully"),b()):v.error(f.message||"Failed to update password")}).catch(f=>{var _,H,G;(_=f.message)!=null&&_.includes("Google-authenticated")||(H=f.message)!=null&&H.includes("social login")||(G=f.message)!=null&&G.includes("Cannot change password for this account type")?(setIsGoogleAccount(!0),v.warning("Google-authenticated accounts cannot change passwords here. Please use Google's account settings to manage your password.",{duration:5e3})):v.error(f.message||"Failed to update password")}).finally(()=>{n(!1)})},children:({isSubmitting:a,errors:n,touched:b})=>e.jsx(Ie,{children:e.jsxs(x,{container:!0,spacing:3,children:[e.jsx(x,{item:!0,xs:12,children:e.jsx(ae,{name:"currentPassword",children:({field:y})=>e.jsx(W,{fullWidth:!0,label:"Current Password",type:"password",...y,error:b.currentPassword&&!!n.currentPassword,helperText:b.currentPassword&&n.currentPassword,variant:"outlined",InputProps:{sx:{borderRadius:1.5}}})})}),e.jsx(x,{item:!0,xs:12,sm:6,children:e.jsx(ae,{name:"newPassword",children:({field:y})=>e.jsx(W,{fullWidth:!0,label:"New Password",type:"password",...y,error:b.newPassword&&!!n.newPassword,helperText:b.newPassword&&n.newPassword,variant:"outlined",InputProps:{sx:{borderRadius:1.5}}})})}),e.jsx(x,{item:!0,xs:12,sm:6,children:e.jsx(ae,{name:"confirmPassword",children:({field:y})=>e.jsx(W,{fullWidth:!0,label:"Confirm New Password",type:"password",...y,error:b.confirmPassword&&!!n.confirmPassword,helperText:b.confirmPassword&&n.confirmPassword,variant:"outlined",InputProps:{sx:{borderRadius:1.5}}})})}),e.jsx(x,{item:!0,xs:12,children:e.jsx(g,{sx:{display:"flex",justifyContent:"flex-end",mt:2},children:e.jsx(E,{type:"submit",variant:"contained",color:"primary",size:"large",disabled:a,sx:{borderRadius:2,px:4},children:a?"Updating...":"Update Password"})})})]})})})]})]})]})})]})};export{Ve as default};
