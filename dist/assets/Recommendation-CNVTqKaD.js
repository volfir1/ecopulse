import{a0 as Ne,c as J,r as o,a1 as O,j as e,X as P,az as Ce,ab as be,n as V,aA as Z,aB as ee,J as te,aC as se,B as re,aD as ae,aF as Re,aE as Pe}from"./index-CeiZKB8G.js";import{s as ke}from"./tup_logo-CddcVZx9.js";import{S as ne}from"./SingleYearPicker--w-JP6tS.js";import{C as Se}from"./Chip-D2qSxnvf.js";import"./DatePicker-Ds6sJbAa.js";import"./index-D_GLsIW_.js";import"./useThemeProps-B7RzBULZ.js";import"./index-BGHELInD.js";import"./TextField-CJViWXc3.js";import"./Select-CMa9xVQT.js";import"./AdapterDayjs-J5u3snYC.js";import"./refresh-ccw-DYG20dKq.js";const Ee=async c=>{try{const s=new Ne({orientation:"portrait",unit:"mm",format:"a4"}),n=s.internal.pageSize.getWidth(),d=s.internal.pageSize.getHeight(),a=30;s.setFillColor(22,163,74),s.rect(0,0,n,a,"F"),s.addImage(J,"PNG",15,5,20,20),s.addImage(ke,"PNG",n-35,5,20,20),s.setTextColor(255,255,255),s.setFontSize(16);const i="Ecopulse Energy Recommendations",p=s.getStringUnitWidth(i)*s.internal.getFontSize()/s.internal.scaleFactor,W=(n-p)/2;s.text(i,W,17),s.setFontSize(11);const k=`Date Generated: ${new Date().toLocaleDateString()}`,L=s.getStringUnitWidth(k)*s.internal.getFontSize()/s.internal.scaleFactor,j=(n-L)/2;s.text(k,j,25),s.setTextColor(0,0,0);let l=a+15;s.setFontSize(14);const C="Recommendation Parameters",m=s.getStringUnitWidth(C)*s.internal.getFontSize()/s.internal.scaleFactor,f=(n-m)/2;s.text(C,f,l),l+=8,s.autoTable({head:[["Year","Solar Cost (PHP/W)","MERALCO Rate (PHP/kWh)"]],body:c.map(w=>[w.year,parseFloat(w.solarCost).toFixed(2),parseFloat(w.meralcoRate).toFixed(2)]),startY:l,margin:{left:30,right:30},headStyles:{fillColor:[22,163,74],halign:"center",fontSize:11},columnStyles:{0:{cellWidth:40,halign:"center"},1:{cellWidth:60,halign:"center"},2:{cellWidth:60,halign:"center"}},styles:{fontSize:10,cellPadding:5,overflow:"linebreak"},alternateRowStyles:{fillColor:[240,248,240]}}),l=s.autoTable.previous.finalY+15,l>d-40&&(s.addPage(),l=20),s.setDrawColor(22,163,74),s.setLineWidth(.5),s.line(15,l,n-15,l),l+=10,s.addImage(J,"PNG",15,l,15,15),s.setFontSize(8);const M="Phone: +63 2 1234 5678 | Email: info@ecopulse.com | Website: www.ecopulse.com",v=s.getStringUnitWidth(M)*s.internal.getFontSize()/s.internal.scaleFactor,A=(n-v)/2;s.text(M,A,l+5),l+=10,s.setFontSize(7);const b=`Â© ${new Date().getFullYear()} Ecopulse. All rights reserved.`,S=s.getStringUnitWidth(b)*s.internal.getFontSize()/s.internal.scaleFactor,h=(n-S)/2;return s.text(b,h,l),s.save(`Energy_Recommendations_${new Date().getFullYear()}.pdf`),!0}catch(s){return console.error("Export error:",s),!1}},x=({children:c,className:s,variant:n,onClick:d,disabled:a,icon:i,...p})=>e.jsxs("button",{className:`px-4 py-2 rounded-md font-medium transition-all duration-200 flex items-center gap-2 
      ${n==="primary"?"bg-green-500 text-white hover:bg-green-600 shadow-sm":n==="danger"?"bg-red-500 text-white hover:bg-red-600 shadow-sm":"bg-gray-200 text-gray-800 hover:bg-gray-300"} ${a?"opacity-50 cursor-not-allowed pointer-events-none":""}
      ${s}`,onClick:d,disabled:a,...p,children:[i&&i,c]}),We=({children:c,className:s})=>e.jsx("div",{className:`bg-white rounded-lg shadow-md transition-shadow duration-300 hover:shadow-lg ${s}`,children:c}),T=({label:c,value:s,placeholder:n,disabled:d,onChange:a,error:i,helperText:p})=>e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:c}),e.jsx("input",{type:"number",step:"0.01",className:`border ${i?"border-red-500":"border-gray-300"} rounded-md p-2 w-full focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all ${d?"bg-gray-100":""}`,placeholder:n,value:s||"",disabled:d,readOnly:d,onChange:a}),i&&p&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:p})]}),le=({icon:c,title:s,description:n,action:d})=>e.jsxs("div",{className:"text-center p-8 rounded-lg border-2 border-dashed border-gray-300 bg-gray-50",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 text-green-600",children:c}),e.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:s}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n}),d&&e.jsx("div",{className:"mt-4",children:d})]}),q=({text:c,highlight:s})=>{if(!s.trim())return e.jsx("span",{children:c});const n=new RegExp(`(${s})`,"gi"),d=c.toString().split(n);return e.jsx("span",{children:d.map((a,i)=>n.test(a)?e.jsx("span",{className:"bg-yellow-200 font-medium",children:a},i):e.jsx("span",{children:a},i))})},Ie=()=>{const[c,s]=o.useState(!1),[n,d]=o.useState(!1),[a,i]=o.useState({}),[p,W]=o.useState(new Date().getFullYear()),[k,L]=o.useState(new Date().getFullYear()),[j,l]=o.useState(!1),[C,m]=o.useState({open:!1,message:"",type:"info"}),[f,M]=o.useState([]),[v,A]=o.useState(!1),[b,S]=o.useState(null),[h,w]=o.useState(""),E=o.useRef(null),[g,oe]=o.useState({key:"year",direction:"asc"}),[y,F]=o.useState(null),[K,X]=o.useState(null),N=o.useCallback(async()=>{A(!0),S(null);try{const t=await O.get("/api/add/recommendations");if(t.data.status==="success"){const r=t.data.records||[];console.log("Fetched recommendation records:",r);const u=r.map(Y=>({id:Y._id,year:Y.Year,solarCost:Y["Solar Cost (PHP/W)"],meralcoRate:Y["MERALCO Rate (PHP/kWh)"]}));M(u)}else S(`Error: ${t.data.message||"Unknown error"}`)}catch(t){console.error("Error fetching recommendation data:",t),S(`Failed to load data: ${t.message}`)}finally{A(!1)}},[]);o.useEffect(()=>{N()},[N]),o.useEffect(()=>{const t=r=>{(r.ctrlKey||r.metaKey)&&r.key==="f"&&(r.preventDefault(),E.current&&E.current.focus()),r.key==="Escape"&&h&&(r.preventDefault(),_()),(r.ctrlKey||r.metaKey)&&r.key==="n"&&!c&&!n&&(r.preventDefault(),B())};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[h,c,n]);const ie=t=>{W(t),i({...a,Year:t})},ce=t=>{L(t),i({...a,Year:t})},B=()=>{const t=new Date().getFullYear();W(t),i({Year:t,"Solar Cost (PHP/W)":"","MERALCO Rate (PHP/kWh)":""}),s(!0)},de=t=>{L(t.Year),i(t),d(!0)},H=()=>s(!1),z=()=>d(!1),me=async()=>{l(!0);try{const t={Year:p,"Solar Cost (PHP/W)":parseFloat(a["Solar Cost (PHP/W)"])||0,"MERALCO Rate (PHP/kWh)":parseFloat(a["MERALCO Rate (PHP/kWh)"])||0};console.log("Saving recommendation with payload:",t);const r=await O.post("/api/add/recommendations",t);r.data.status==="success"?(m({open:!0,message:"Recommendation created successfully!",type:"success"}),H(),N()):m({open:!0,message:`Error: ${r.data.message||"Unknown error"}`,type:"error"})}catch(t){console.error("Error saving recommendation:",t);let r="Failed to save recommendation";t.code==="ECONNABORTED"?r="Request timed out - the server took too long to respond":t.code==="ERR_NETWORK"?r="Network error - please check if the backend server is running":t.response&&(r=t.response.data.message||t.message),m({open:!0,message:`Error: ${r}`,type:"error"})}finally{l(!1)}},xe=async()=>{l(!0);try{const t={Year:k,"Solar Cost (PHP/W)":parseFloat(a["Solar Cost (PHP/W)"])||0,"MERALCO Rate (PHP/kWh)":parseFloat(a["MERALCO Rate (PHP/kWh)"])||0};console.log("Updating recommendation with payload:",t);const r=await O.put(`/api/add/recommendations/${a.id}`,t);r.data.status==="success"?(m({open:!0,message:"Recommendation updated successfully!",type:"success"}),z(),N()):m({open:!0,message:`Error: ${r.data.message||"Unknown error"}`,type:"error"})}catch(t){console.error("Error updating recommendation:",t);let r="Failed to update recommendation";t.code==="ECONNABORTED"?r="Request timed out - the server took too long to respond":t.code==="ERR_NETWORK"?r="Network error - please check if the backend server is running":t.response&&(r=t.response.data.message||t.message),m({open:!0,message:`Error: ${r}`,type:"error"})}finally{l(!1)}},he=async t=>{if(window.confirm("Are you sure you want to delete this record?")){l(!0);try{const r=await O.delete(`/api/add/recommendations/${t}`);r.data.status==="success"?(m({open:!0,message:"Recommendation deleted successfully!",type:"success"}),N()):m({open:!0,message:`Error: ${r.data.message||"Unknown error"}`,type:"error"})}catch(r){console.error("Error deleting recommendation:",r),m({open:!0,message:`Error: ${r.message}`,type:"error"})}finally{l(!1)}}},G=()=>{m(t=>({...t,open:!1}))},D=(t,r)=>{i(u=>({...u,[t]:r.target.value}))},ge=async()=>{try{const t=await Ee(Q);m(t?{open:!0,message:"PDF exported successfully!",type:"success"}:{open:!0,message:"Failed to export PDF. Please try again.",type:"error"})}catch(t){console.error("Export error:",t),m({open:!0,message:"Error exporting PDF: "+t.message,type:"error"})}},ue=t=>{w(t.target.value)},_=()=>{w(""),E.current&&E.current.focus()},$=t=>{let r="asc";g.key===t&&g.direction==="asc"&&(r="desc"),oe({key:t,direction:r})},pe=t=>{X(t.currentTarget)},I=()=>{X(null)},fe=t=>{F(t===y?null:t),I()},ye=()=>{F(null),I()},je=()=>{let t=[...f];if(y!==null&&(t=t.filter(r=>r.year===y)),h.trim()){const r=h.toLowerCase().trim();t=t.filter(u=>String(u.year).toLowerCase().includes(r)||String(u.solarCost).toLowerCase().includes(r)||String(u.meralcoRate).toLowerCase().includes(r))}return t},ve=t=>g.key?[...t].sort((r,u)=>r[g.key]<u[g.key]?g.direction==="asc"?-1:1:r[g.key]>u[g.key]?g.direction==="asc"?1:-1:0):t,we=[...new Set(f.map(t=>t.year))].sort(),Q=je(),R=ve(Q),U=t=>g.key!==t?e.jsx("svg",{className:"w-4 h-4 ml-1 text-gray-300",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}):g.direction==="asc"?e.jsx("svg",{className:"w-4 h-4 ml-1 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L6.707 7.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})}):e.jsx("svg",{className:"w-4 h-4 ml-1 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M14.707 12.293a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L9 14.586V3a1 1 0 012 0v11.586l2.293-2.293a1 1 0 011.414 0z",clipRule:"evenodd"})});return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-100",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-green-500",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Energy Recommendations"}),e.jsx("p",{className:"text-gray-500",children:"Generate and manage energy recommendations based on regional data"})]})]}),e.jsx(P,{title:"Add New Recommendation (Ctrl+N)",arrow:!0,children:e.jsx(x,{variant:"primary",className:"flex items-center gap-2",onClick:B,icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),children:"Add New Recommendation"})})]}),e.jsxs(We,{className:"mb-6 overflow-visible",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsx("h2",{className:"text-lg font-medium",children:"Recommendation History"}),y!==null&&e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(Se,{label:`Year: ${y}`,color:"primary",variant:"outlined",onDelete:()=>F(null),size:"small",className:"bg-green-50 text-green-700 border-green-300"}),y!==null&&e.jsx(x,{variant:"secondary",className:"text-xs py-1 px-2 h-8",onClick:ye,children:"Clear All Filters"})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mt-4 gap-4",children:[e.jsxs("div",{className:"flex items-center relative w-full md:w-auto",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),e.jsx("input",{type:"text",placeholder:"Search records... (Ctrl+F)",className:"border border-gray-300 rounded-md py-2 pl-10 pr-12 w-full focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:h,onChange:ue,ref:E}),h&&e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:e.jsx("button",{type:"button",onClick:_,className:"rounded-full p-1 hover:bg-gray-200 focus:outline-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})})})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[e.jsx(x,{variant:"secondary",className:"flex items-center gap-1",onClick:pe,disabled:f.length===0,icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z",clipRule:"evenodd"})}),children:"Filter"}),e.jsxs(Ce,{anchorEl:K,open:!!K,onClose:I,PaperProps:{style:{maxHeight:300,minWidth:150}},children:[e.jsx("div",{className:"px-3 py-2 border-b border-gray-200",children:e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Filter by Year"})}),we.map(t=>e.jsx(be,{onClick:()=>fe(t),style:{backgroundColor:y===t?"rgba(22, 163, 74, 0.1)":void 0},children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-2",children:y===t&&e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),t]})},t))]}),e.jsx(P,{title:"Refresh data",arrow:!0,children:e.jsx(x,{variant:"secondary",className:"flex items-center gap-1",onClick:N,disabled:v,icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})}),children:v?"Loading...":"Refresh"})}),e.jsx(P,{title:"Export to PDF",arrow:!0,children:e.jsx(x,{variant:"primary",onClick:ge,disabled:R.length===0||v,icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v3.586l-1.293-1.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V8z",clipRule:"evenodd"})}),children:"Export"})})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:v?e.jsxs("div",{className:"flex justify-center items-center p-12",children:[e.jsx(V,{size:40}),e.jsx("span",{className:"ml-3 text-gray-500",children:"Loading recommendation data..."})]}):b?e.jsxs("div",{className:"text-center p-12 bg-red-50",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-red-500 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h3",{className:"text-lg font-medium text-red-800 mb-2",children:"Error Loading Data"}),e.jsx("p",{className:"text-red-600",children:b}),e.jsx(x,{variant:"primary",className:"mt-4",onClick:N,children:"Try Again"})]}):f.length===0?e.jsx(le,{icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),title:"No recommendation records found",description:"Add your first recommendation to get started",action:e.jsx(x,{variant:"primary",onClick:B,className:"mt-2",children:"Add New Recommendation"})}):R.length===0?e.jsx(le,{icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),title:"No matching records found",description:"Try adjusting your search or filters",action:e.jsx(x,{variant:"secondary",onClick:()=>{w(""),F(null)},className:"mt-2",children:"Clear All Filters"})}):e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:()=>$("year"),children:e.jsxs("div",{className:"flex items-center",children:["Year",U("year")]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:()=>$("solarCost"),children:e.jsxs("div",{className:"flex items-center",children:["Solar Cost (PHP/W)",U("solarCost")]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:()=>$("meralcoRate"),children:e.jsxs("div",{className:"flex items-center",children:["MERALCO Rate (PHP/kWh)",U("meralcoRate")]})}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R.map(t=>e.jsxs("tr",{className:"hover:bg-green-50 transition-colors duration-150",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.jsx(q,{text:t.year,highlight:h})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsx(q,{text:t.solarCost,highlight:h})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsx(q,{text:t.meralcoRate,highlight:h})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx(P,{title:"Edit record",arrow:!0,children:e.jsx("button",{className:"text-green-600 hover:text-green-900 mr-3 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 rounded",onClick:()=>{const r={...t,Year:t.year,"Solar Cost (PHP/W)":t.solarCost,"MERALCO Rate (PHP/kWh)":t.meralcoRate};de(r)},children:"Edit"})}),e.jsx(P,{title:"Delete record",arrow:!0,children:e.jsx("button",{className:"text-red-600 hover:text-red-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 rounded",onClick:()=>he(t.id),children:"Delete"})})]})]},t.id))})]})}),!v&&!b&&R.length>0&&e.jsxs("div",{className:"px-6 py-4 flex items-center justify-between border-t border-gray-200",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",e.jsx("span",{className:"font-medium",children:"1"})," to ",e.jsx("span",{className:"font-medium",children:R.length})," of ",e.jsx("span",{className:"font-medium",children:f.length})," records",(h.trim()||y!==null)&&R.length!==f.length&&e.jsxs("span",{className:"ml-1 italic text-gray-400",children:["(filtered from ",f.length," total)"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(x,{variant:"secondary",className:"mr-2",disabled:!0,children:"Previous"}),e.jsx(x,{variant:"secondary",disabled:!0,children:"Next"})]})]})]}),e.jsxs(Z,{open:c,onClose:H,maxWidth:"sm",fullWidth:!0,children:[e.jsxs(ee,{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-medium",children:"Add New Recommendation"}),e.jsx(te,{onClick:H,size:"small",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsx(se,{children:e.jsxs(re,{className:"p-4 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year"}),e.jsx(ne,{initialYear:p,onYearChange:ie})]}),e.jsxs("div",{className:"border p-4 rounded-md bg-gray-50",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Input Parameters"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(T,{label:"Solar Cost (PHP/W)",value:a["Solar Cost (PHP/W)"],placeholder:"Enter value",onChange:t=>D("Solar Cost (PHP/W)",t),error:!a["Solar Cost (PHP/W)"],helperText:a["Solar Cost (PHP/W)"]?"":"This field is required"}),e.jsx(T,{label:"MERALCO Rate (PHP/kWh)",value:a["MERALCO Rate (PHP/kWh)"],placeholder:"Enter value",onChange:t=>D("MERALCO Rate (PHP/kWh)",t),error:!a["MERALCO Rate (PHP/kWh)"],helperText:a["MERALCO Rate (PHP/kWh)"]?"":"This field is required"})]})]})]})}),e.jsxs(ae,{className:"p-4",children:[e.jsx(x,{variant:"secondary",onClick:H,className:"mr-2",disabled:j,children:"Cancel"}),e.jsx(x,{variant:"primary",onClick:me,disabled:j||!a["Solar Cost (PHP/W)"]||!a["MERALCO Rate (PHP/kWh)"],children:j?e.jsxs("div",{className:"flex items-center",children:[e.jsx(V,{size:16,color:"inherit",className:"mr-2"}),"Saving..."]}):"Save"})]})]}),e.jsxs(Z,{open:n,onClose:z,maxWidth:"sm",fullWidth:!0,children:[e.jsxs(ee,{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-medium",children:"Edit Recommendation"}),e.jsx(te,{onClick:z,size:"small",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsx(se,{children:e.jsxs(re,{className:"p-4 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year"}),e.jsx(ne,{initialYear:k,onYearChange:ce,disabled:!0})]}),e.jsxs("div",{className:"border p-4 rounded-md bg-gray-50",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Input Parameters"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(T,{label:"Solar Cost (PHP/W)",value:a["Solar Cost (PHP/W)"],placeholder:"Enter value",onChange:t=>D("Solar Cost (PHP/W)",t),error:!a["Solar Cost (PHP/W)"],helperText:a["Solar Cost (PHP/W)"]?"":"This field is required"}),e.jsx(T,{label:"MERALCO Rate (PHP/kWh)",value:a["MERALCO Rate (PHP/kWh)"],placeholder:"Enter value",onChange:t=>D("MERALCO Rate (PHP/kWh)",t),error:!a["MERALCO Rate (PHP/kWh)"],helperText:a["MERALCO Rate (PHP/kWh)"]?"":"This field is required"})]})]})]})}),e.jsxs(ae,{className:"p-4",children:[e.jsx(x,{variant:"secondary",onClick:z,className:"mr-2",disabled:j,children:"Cancel"}),e.jsx(x,{variant:"primary",onClick:xe,disabled:j||!a["Solar Cost (PHP/W)"]||!a["MERALCO Rate (PHP/kWh)"],children:j?e.jsxs("div",{className:"flex items-center",children:[e.jsx(V,{size:16,color:"inherit",className:"mr-2"}),"Updating..."]}):"Update"})]})]}),e.jsx(Re,{open:C.open,autoHideDuration:6e3,onClose:G,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:e.jsx(Pe,{onClose:G,severity:C.type,sx:{width:"100%"},variant:"filled",children:C.message})}),e.jsx("div",{className:"fixed bottom-4 right-4",children:e.jsx(P,{title:e.jsxs("div",{className:"p-1",children:[e.jsx("p",{className:"font-medium mb-1",children:"Keyboard Shortcuts:"}),e.jsxs("ul",{className:"text-xs",children:[e.jsxs("li",{className:"mb-1",children:[e.jsx("span",{className:"bg-gray-100 text-gray-800 px-1 py-0.5 rounded mr-1",children:"Ctrl+F"}),e.jsx("span",{children:"Search"})]}),e.jsxs("li",{className:"mb-1",children:[e.jsx("span",{className:"bg-gray-100 text-gray-800 px-1 py-0.5 rounded mr-1",children:"Esc"}),e.jsx("span",{children:"Clear search"})]}),e.jsxs("li",{children:[e.jsx("span",{className:"bg-gray-100 text-gray-800 px-1 py-0.5 rounded mr-1",children:"Ctrl+N"}),e.jsx("span",{children:"New recommendation"})]})]})]}),arrow:!0,placement:"left",children:e.jsx("div",{className:"bg-gray-800 bg-opacity-70 hover:bg-opacity-90 transition-colors text-white rounded-full p-2 cursor-help",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})})})})]})};export{Ie as default};
